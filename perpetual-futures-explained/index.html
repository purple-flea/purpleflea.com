<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Perpetual Futures Explained â€” Guide for AI Agent Developers</title>
<meta name="description" content="What are perpetual futures contracts? Complete guide covering funding rates, mark price, liquidation mechanics, leverage, and how AI agents can trade 275 perp markets via Purple Flea.">
<link rel="canonical" href="https://purpleflea.com/perpetual-futures-explained/">
<meta property="og:title" content="Perpetual Futures Explained â€” Guide for AI Agent Developers">
<meta property="og:description" content="What are perpetual futures contracts? Complete guide covering funding rates, mark price, liquidation mechanics, leverage, and how AI agents can trade 275 perp markets via Purple Flea.">
<meta property="og:url" content="https://purpleflea.com/perpetual-futures-explained/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Purple Flea">
<meta property="og:image" content="https://purpleflea.com/flea.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@purpleflea">
<meta name="twitter:title" content="Perpetual Futures Explained â€” Guide for AI Agent Developers">
<meta name="twitter:description" content="Complete guide to perp futures: funding rates, mark price, liquidation mechanics, leverage, and trading via Purple Flea API.">
<meta name="twitter:image" content="https://purpleflea.com/flea.jpg">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "name": "Perpetual Futures Explained",
  "url": "https://purpleflea.com/perpetual-futures-explained/",
  "description": "Complete guide to perpetual futures contracts for AI agent developers: funding rates, mark price, liquidation mechanics, leverage, and trading via Purple Flea API.",
  "publisher": { "@type": "Organization", "name": "Purple Flea", "url": "https://purpleflea.com" }
}
</script>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŸ£</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --purple: #A855F7;
  --purple-dim: #7C3AED;
  --purple-glow: rgba(168, 85, 247, 0.3);
  --purple-subtle: rgba(168, 85, 247, 0.08);
  --bg: #09090B;
  --bg-card: rgba(255, 255, 255, 0.03);
  --bg-card-hover: rgba(255, 255, 255, 0.06);
  --border: rgba(255, 255, 255, 0.06);
  --border-hover: rgba(168, 85, 247, 0.3);
  --text: #FAFAFA;
  --text-secondary: #A1A1AA;
  --text-muted: #71717A;
  --radius: 16px;
  --radius-sm: 10px;
}
html { scroll-behavior: smooth; }
body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
body::before { content: ''; position: fixed; inset: 0; z-index: 9999; pointer-events: none; opacity: 0.025; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"); background-repeat: repeat; background-size: 180px; }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(168, 85, 247, 0.3); border-radius: 3px; }
::selection { background: rgba(168, 85, 247, 0.4); color: white; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.reveal { opacity: 0; transform: translateY(30px); transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1); }
.reveal.visible { opacity: 1; transform: translateY(0); }
.reveal-delay-1 { transition-delay: 0.1s; }
.reveal-delay-2 { transition-delay: 0.2s; }
.reveal-delay-3 { transition-delay: 0.3s; }

/* NAV */
nav { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; padding: 16px 0; transition: all 0.3s ease; }
nav.scrolled { background: rgba(9, 9, 11, 0.8); backdrop-filter: blur(20px) saturate(1.5); border-bottom: 1px solid var(--border); }
.nav-inner { display: flex; align-items: center; justify-content: space-between; max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.nav-logo { display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 18px; text-decoration: none; color: var(--text); }
.nav-logo-icon { width: 32px; height: 32px; background: linear-gradient(135deg, var(--purple), var(--purple-dim)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 16px; }
.nav-links { display: flex; align-items: center; gap: 32px; list-style: none; }
.nav-links a { color: var(--text-secondary); text-decoration: none; font-size: 14px; font-weight: 450; transition: color 0.2s; }
.nav-links a:hover { color: var(--text); }
.nav-cta { display: inline-flex; align-items: center; gap: 6px; padding: 8px 18px; background: var(--purple); color: white !important; border-radius: 8px; font-weight: 500; font-size: 14px; text-decoration: none; transition: all 0.2s; }
.nav-cta:hover { background: var(--purple-dim); transform: translateY(-1px); }
@media (max-width: 768px) { .nav-links { display: none; } }

/* HERO */
.hero { min-height: 80vh; display: flex; align-items: center; justify-content: center; position: relative; padding: 120px 0 80px; overflow: hidden; }
.hero-bg { position: absolute; inset: 0; overflow: hidden; }
.hero-gradient-1 { position: absolute; top: -30%; left: 50%; transform: translateX(-50%); width: 900px; height: 600px; background: radial-gradient(ellipse, rgba(168, 85, 247, 0.15) 0%, transparent 70%); filter: blur(60px); }
.hero-grid { position: absolute; inset: 0; background-image: linear-gradient(rgba(168, 85, 247, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(168, 85, 247, 0.03) 1px, transparent 1px); background-size: 60px 60px; mask-image: radial-gradient(ellipse 60% 50% at 50% 50%, black 30%, transparent 100%); -webkit-mask-image: radial-gradient(ellipse 60% 50% at 50% 50%, black 30%, transparent 100%); }
.hero-content { position: relative; text-align: center; max-width: 860px; margin: 0 auto; padding: 0 24px; }
.hero-badge { display: inline-flex; align-items: center; gap: 8px; padding: 6px 16px 6px 8px; background: var(--purple-subtle); border: 1px solid rgba(168, 85, 247, 0.15); border-radius: 100px; font-size: 13px; font-weight: 500; color: var(--purple); margin-bottom: 32px; animation: fadeInDown 0.8s ease; }
.hero-badge-dot { width: 8px; height: 8px; background: var(--purple); border-radius: 50%; animation: badge-pulse 2s ease-in-out infinite; }
@keyframes badge-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
@keyframes fadeInDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes gradient-shift { 0% { background-position: 0% center; } 50% { background-position: 100% center; } 100% { background-position: 0% center; } }
.hero h1 { font-size: clamp(2.5rem, 6vw, 4.5rem); font-weight: 800; line-height: 1.05; letter-spacing: -0.03em; margin-bottom: 24px; animation: fadeInUp 0.8s ease 0.1s both; }
.hero h1 .gradient { background: linear-gradient(135deg, var(--purple) 0%, #C084FC 50%, var(--purple) 100%); background-size: 200% auto; -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; animation: gradient-shift 5s ease infinite; }
.hero-desc { font-size: clamp(1rem, 2vw, 1.2rem); color: var(--text-secondary); margin-bottom: 40px; line-height: 1.7; animation: fadeInUp 0.8s ease 0.2s both; }
.hero-actions { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; animation: fadeInUp 0.8s ease 0.3s both; }
.btn-primary { display: inline-flex; align-items: center; gap: 8px; padding: 14px 28px; background: var(--purple); color: white; border-radius: var(--radius-sm); font-weight: 600; font-size: 15px; text-decoration: none; transition: all 0.2s; box-shadow: 0 0 30px rgba(168, 85, 247, 0.3); }
.btn-primary:hover { background: var(--purple-dim); transform: translateY(-2px); box-shadow: 0 0 40px rgba(168, 85, 247, 0.5); }
.btn-secondary { display: inline-flex; align-items: center; gap: 8px; padding: 14px 28px; background: var(--bg-card); color: var(--text); border-radius: var(--radius-sm); font-weight: 500; font-size: 15px; text-decoration: none; border: 1px solid var(--border); transition: all 0.2s; }
.btn-secondary:hover { border-color: var(--border-hover); background: var(--bg-card-hover); transform: translateY(-2px); }

/* SECTIONS */
section { padding: 100px 0; position: relative; }
.section-label { display: inline-flex; align-items: center; gap: 12px; font-size: 12px; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--purple); margin-bottom: 20px; }
.section-label::before { content: ''; width: 24px; height: 1px; background: var(--purple); }
.section-title { font-size: clamp(2rem, 4vw, 3rem); font-weight: 800; letter-spacing: -0.02em; margin-bottom: 20px; }
.section-desc { font-size: 1.1rem; color: var(--text-secondary); max-width: 600px; margin-bottom: 60px; line-height: 1.7; }
.section-divider { border: none; height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent); margin: 0; }

/* CODE BLOCK */
.code-block { background: rgba(0,0,0,0.4); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; font-family: 'JetBrains Mono', monospace; font-size: 13.5px; line-height: 1.7; overflow-x: auto; position: relative; }
.code-block .code-header { display: flex; align-items: center; gap: 8px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
.code-dot { width: 12px; height: 12px; border-radius: 50%; }
.code-dot.red { background: #EF4444; }
.code-dot.yellow { background: #FBBF24; }
.code-dot.green { background: #22C55E; }
.code-filename { margin-left: 8px; font-size: 12px; color: var(--text-muted); }
.kw { color: #C084FC; }
.fn { color: #93C5FD; }
.st { color: #86EFAC; }
.cm { color: var(--text-muted); font-style: italic; }
.num { color: #FDE68A; }
.cls { color: #F9A8D4; }
.at { color: #A855F7; }

/* GRID */
.grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }
.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
@media (max-width: 768px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } }

/* CARDS */
.card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 32px; transition: all 0.3s ease; }
.card:hover { background: var(--bg-card-hover); border-color: var(--border-hover); transform: translateY(-4px); box-shadow: 0 20px 60px rgba(0,0,0,0.4), 0 0 30px rgba(168,85,247,0.05); }
.card-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; margin-bottom: 20px; }
.card-icon.purple { background: rgba(168, 85, 247, 0.15); }
.card-icon.blue { background: rgba(96, 165, 250, 0.15); }
.card-icon.green { background: rgba(34, 197, 94, 0.15); }
.card-icon.orange { background: rgba(251, 146, 60, 0.15); }
.card h3 { font-size: 1.1rem; font-weight: 600; margin-bottom: 10px; }
.card p { color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6; }

/* INSTALL BANNER */
.install-banner { background: rgba(168, 85, 247, 0.06); border: 1px solid rgba(168, 85, 247, 0.2); border-radius: var(--radius); padding: 20px 28px; display: flex; align-items: center; gap: 16px; margin-bottom: 48px; font-family: 'JetBrains Mono', monospace; font-size: 14px; }
.install-banner .pip { color: var(--text-muted); }
.install-banner .pkg { color: var(--purple); font-weight: 600; }
.copy-btn { margin-left: auto; padding: 6px 14px; background: var(--purple-subtle); border: 1px solid var(--border-hover); color: var(--purple); border-radius: 6px; font-size: 12px; cursor: pointer; font-family: inherit; transition: all 0.2s; }
.copy-btn:hover { background: rgba(168,85,247,0.15); }

/* STEPS */
.steps { display: flex; flex-direction: column; gap: 0; }
.step { display: flex; gap: 24px; padding: 32px 0; border-bottom: 1px solid var(--border); }
.step:last-child { border-bottom: none; }
.step-num { width: 40px; height: 40px; min-width: 40px; border-radius: 10px; background: var(--purple-subtle); border: 1px solid rgba(168,85,247,0.2); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; color: var(--purple); }
.step-content h3 { font-size: 1.05rem; font-weight: 600; margin-bottom: 8px; }
.step-content p { color: var(--text-secondary); font-size: 0.9rem; }

/* CTA SECTION */
.cta-section { text-align: center; padding: 100px 0; }
.cta-box { background: linear-gradient(135deg, rgba(168,85,247,0.08) 0%, rgba(124,58,237,0.05) 100%); border: 1px solid rgba(168,85,247,0.2); border-radius: 24px; padding: 80px 40px; position: relative; overflow: hidden; }
.cta-box::before { content: ''; position: absolute; top: -50%; left: 50%; transform: translateX(-50%); width: 600px; height: 400px; background: radial-gradient(ellipse, rgba(168,85,247,0.1) 0%, transparent 70%); filter: blur(40px); pointer-events: none; }
.cta-box h2 { font-size: clamp(2rem, 4vw, 3rem); font-weight: 800; letter-spacing: -0.02em; margin-bottom: 20px; position: relative; }
.cta-box p { color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 40px; position: relative; }

/* FOOTER */
footer { padding: 60px 0 40px; border-top: 1px solid var(--border); }
.footer-top { display: grid; grid-template-columns: 1fr 2fr; gap: 60px; margin-bottom: 60px; }
.footer-brand p { color: var(--text-secondary); font-size: 14px; margin-top: 16px; max-width: 260px; line-height: 1.6; }
.footer-columns { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; }
.footer-col h4 { font-size: 13px; font-weight: 600; margin-bottom: 16px; }
.footer-col ul { list-style: none; display: flex; flex-direction: column; gap: 10px; }
.footer-col a { color: var(--text-muted); text-decoration: none; font-size: 13px; transition: color 0.2s; }
.footer-col a:hover { color: var(--text); }
.footer-bottom { display: flex; align-items: center; justify-content: space-between; padding-top: 24px; border-top: 1px solid var(--border); }
.footer-bottom p { color: var(--text-muted); font-size: 13px; }
.footer-social { display: flex; gap: 24px; }
.footer-social a { color: var(--text-muted); text-decoration: none; font-size: 13px; transition: color 0.2s; }
.footer-social a:hover { color: var(--text); }
@media (max-width: 768px) { .footer-top { grid-template-columns: 1fr; gap: 40px; } .footer-columns { grid-template-columns: repeat(2, 1fr); } .footer-bottom { flex-direction: column; gap: 16px; text-align: center; } }

/* RELATED LINKS */
.related-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
@media (max-width: 768px) { .related-grid { grid-template-columns: 1fr; } }
.related-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 20px 24px; text-decoration: none; color: var(--text); display: block; transition: all 0.2s; }
.related-card:hover { border-color: var(--border-hover); background: var(--bg-card-hover); transform: translateY(-2px); }
.related-card .label { font-size: 11px; color: var(--purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px; }
.related-card .title { font-size: 14px; font-weight: 600; }
.related-card .desc { font-size: 13px; color: var(--text-muted); margin-top: 4px; }

/* PROSE */
.prose { max-width: 800px; }
.prose h2 { font-size: clamp(1.5rem, 3vw, 2rem); font-weight: 700; letter-spacing: -0.02em; margin-bottom: 16px; margin-top: 60px; }
.prose h2:first-child { margin-top: 0; }
.prose h3 { font-size: 1.15rem; font-weight: 600; margin-bottom: 12px; margin-top: 32px; color: var(--text); }
.prose p { color: var(--text-secondary); font-size: 1rem; line-height: 1.8; margin-bottom: 20px; }
.prose ul, .prose ol { color: var(--text-secondary); font-size: 1rem; line-height: 1.8; margin-bottom: 20px; padding-left: 24px; }
.prose li { margin-bottom: 8px; }
.prose strong { color: var(--text); font-weight: 600; }
.prose code { font-family: 'JetBrains Mono', monospace; font-size: 0.875em; background: rgba(168,85,247,0.1); color: var(--purple); padding: 2px 7px; border-radius: 4px; }
.formula-block { background: rgba(0,0,0,0.4); border: 1px solid var(--border); border-left: 3px solid var(--purple); border-radius: var(--radius-sm); padding: 20px 24px; font-family: 'JetBrains Mono', monospace; font-size: 13px; color: var(--text-secondary); margin: 24px 0; line-height: 1.8; }
.info-box { background: rgba(168,85,247,0.06); border: 1px solid rgba(168,85,247,0.2); border-radius: var(--radius-sm); padding: 20px 24px; margin: 24px 0; }
.info-box p { color: var(--text-secondary); font-size: 0.95rem; margin: 0; }
</style>
</head>
<body>

<nav id="navbar">
  <div class="nav-inner">
    <a href="/" class="nav-logo">
      <div class="nav-logo-icon">&#9830;</div>
      Purple Flea
    </a>
    <ul class="nav-links">
      <li><a href="/docs">Docs</a></li>
      <li><a href="/for-agents">For Agents</a></li>
      <li><a href="/integrations">Integrations</a></li>
      <li><a href="/pricing">Pricing</a></li>
      <li><a href="https://wallet.purpleflea.com" target="_blank" class="nav-cta">Get Started &rarr;</a></li>
    </ul>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg">
    <div class="hero-gradient-1"></div>
    <div class="hero-grid"></div>
  </div>
  <div class="hero-content">
    <div class="hero-badge">
      <div class="hero-badge-dot"></div>
      Trading Education
    </div>
    <h1>Perpetual Futures<br><span class="gradient">Explained</span></h1>
    <p class="hero-desc">
      Everything you need to know about perpetual futures contracts â€” funding rates, mark price, liquidation mechanics, leverage, and why AI agents are the perfect perp traders.
    </p>
    <div class="hero-actions">
      <a href="/trading-api/" class="btn-primary">Trading API &rarr;</a>
      <a href="#what-is-a-perp" class="btn-secondary">Start Reading</a>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- MAIN CONTENT -->
<section id="what-is-a-perp">
  <div class="container">
    <div class="prose reveal">

      <h2>What Is a Perpetual Futures Contract?</h2>
      <p>
        A perpetual futures contract â€” often called a "perp" â€” is a derivative instrument that lets you speculate on the price of an asset without ever owning it. Unlike traditional futures contracts, perpetuals have <strong>no expiry date</strong>. You can hold a position for five minutes or five years; there is no settlement day forcing you to close.
      </p>
      <p>
        Traditional futures (like those traded on the CME for Bitcoin or oil) must be rolled over before expiry, creating cost and administrative friction. Perpetuals eliminate that entirely. They were invented by BitMEX in 2016 and have since become the most liquid derivatives market in crypto, with daily volume routinely exceeding the spot market.
      </p>
      <p>
        The mechanism that keeps a perp anchored to the underlying spot price â€” rather than drifting indefinitely â€” is the <strong>funding rate</strong>. Without this, a perpetual with no expiry would trade at whatever sentiment dictated, completely detached from reality. The funding rate is the elegant solution: it charges holders on the expensive side and pays holders on the cheap side, continuously nudging the perp price back toward spot.
      </p>

      <h2>Key Concepts</h2>

      <h3>Mark Price vs Index Price vs Last Price</h3>
      <p>
        Three prices matter in a perp market, and confusing them is a common beginner mistake:
      </p>
      <ul>
        <li><strong>Last Price</strong> â€” the price of the most recent trade on the perp exchange itself. Volatile, easily manipulated by a single large order.</li>
        <li><strong>Index Price</strong> â€” a volume-weighted average of the spot price across multiple major exchanges (e.g., Binance, Coinbase, Kraken). Represents the "true" fair value of the asset.</li>
        <li><strong>Mark Price</strong> â€” a smoothed price derived from the index price plus a decaying funding basis. The critical one: <strong>liquidations are calculated against mark price, not last price</strong>. This prevents exchange manipulators from forcing liquidations by flash-crashing the last price.</li>
      </ul>
      <div class="info-box">
        <p>For AI agents: always fetch the mark price for risk calculations, not the last traded price. A single whale sell can move last price by 5% with zero effect on mark price.</p>
      </div>

      <h3>Funding Rate</h3>
      <p>
        Every 8 hours (on most exchanges), a payment changes hands between long and short holders. The direction and magnitude depend on whether the perp is trading above or below the index price:
      </p>
      <ul>
        <li><strong>Positive funding rate</strong>: perp is trading above spot. Longs pay shorts. Bulls are paying a premium for leverage, and shorts collect it.</li>
        <li><strong>Negative funding rate</strong>: perp is trading below spot. Shorts pay longs. Bears are paying a premium, bulls collect.</li>
      </ul>
      <p>
        Funding payments are automatic â€” no action required. If you hold a $10,000 long at a 0.01% funding rate, you pay $1 every 8 hours (~$3/day, ~$1,095/year). Annualized, a 0.01% per-interval rate is roughly 10.95% APY â€” a meaningful drag in sideways markets.
      </p>

      <h3>Open Interest</h3>
      <p>
        Open interest (OI) is the total USD value of all open positions in a market. It is the single best indicator of how much speculative capital is deployed. Rising OI alongside rising price suggests real demand; rising OI alongside falling price suggests shorts are piling in. AI agents can use OI as a filter: avoid opening large positions when OI is extremely elevated (crowded trade risk) or extremely low (poor liquidity).
      </p>

      <h3>Leverage</h3>
      <p>
        Leverage lets you control a larger position than your collateral alone would allow. At 10x leverage, $1,000 of margin controls a $10,000 position. A 1% move in your favor becomes a 10% gain on your collateral. A 1% move against you is a 10% loss. At 10x, a 10% adverse move wipes your position entirely â€” that is the liquidation point (before maintenance margin requirements).
      </p>
      <p>
        Purple Flea supports 1x to 50x leverage across all 275 perpetual markets. For AI agents, lower leverage (2xâ€“5x) is almost always preferable: it allows more room for adverse moves, reduces funding cost exposure, and makes position sizing math simpler.
      </p>

      <h2>Long vs Short</h2>

      <h3>Going Long</h3>
      <p>
        Opening a long means you profit if the asset price increases. You are synthetically buying the asset with borrowed capital. If BTC-PERP is at $60,000 and you open a $6,000 long at 10x, you profit $1,000 for every $1,000 increase in BTC price (before fees and funding). If you hold the position while funding is positive, you pay funding every 8 hours â€” this is the cost of maintaining bullish exposure.
      </p>

      <h3>Going Short</h3>
      <p>
        A short profits when price falls. You are synthetically selling an asset you don't own. If BTC drops from $60,000 to $57,000, a $6,000 short at 10x earns roughly $500 (5% drop, 10x = 50% gain on margin). Shorts receive funding payments when rates are positive â€” bears are effectively paid to hold their position during bull runs where longs are desperate for leverage.
      </p>

      <h3>Delta-Neutral Strategies</h3>
      <p>
        A delta-neutral position combines a long and short of equal size to eliminate directional exposure entirely. The position does not care whether price goes up or down â€” it collects (or pays) only the funding rate. When funding is persistently positive â€” common in bull markets â€” a delta-neutral position that is long spot and short perp earns the funding rate with near-zero price risk. This is the basis of <a href="/funding-rate-arbitrage/" style="color:var(--purple)">funding rate arbitrage</a>, one of the most reliable AI agent strategies.
      </p>

      <h2>Liquidation Mechanics</h2>

      <h3>Isolated vs Cross Margin</h3>
      <p>
        <strong>Isolated margin</strong> dedicates a fixed amount of collateral to a single position. If that position is liquidated, only the isolated margin is lost â€” the rest of your account is safe. This is the recommended mode for AI agents running multiple positions.
      </p>
      <p>
        <strong>Cross margin</strong> uses your entire account balance as collateral for all positions. Positions are less likely to be individually liquidated, but a single bad trade can cascade across your whole portfolio. Avoid cross margin for automated agents unless you have explicit risk controls.
      </p>

      <h3>Liquidation Price Formula</h3>
      <p>
        For a long position, the liquidation price is approximately:
      </p>
      <div class="formula-block">
        liquidation_price = entry_price * (1 - (1 / leverage) + maintenance_margin_rate)<br><br>
        Example: entry = $60,000, leverage = 10x, maintenance_margin = 0.5%<br>
        liquidation_price = 60,000 * (1 - 0.1 + 0.005) = 60,000 * 0.905 = $54,300
      </div>
      <p>
        For a short position, the liquidation price is higher than entry: <code>entry_price * (1 + (1/leverage) - maintenance_margin_rate)</code>.
      </p>

      <h3>Auto-Deleveraging (ADL)</h3>
      <p>
        When a position is liquidated, the exchange's insurance fund absorbs the loss. If the insurance fund is exhausted â€” rare but possible during extreme volatility â€” the exchange triggers auto-deleveraging (ADL). ADL forcibly closes profitable positions on the opposite side of the market to cover the deficit. Profitable traders, sorted by profitability and leverage, are closed without consent. ADL is a tail risk that AI agents should monitor via the exchange's ADL queue indicator.
      </p>

      <h3>How to Avoid Liquidation</h3>
      <p>
        The best liquidation avoidance strategies for automated agents:
      </p>
      <ul>
        <li>Monitor margin ratio continuously via the API â€” add collateral when it drops below a safety threshold (e.g., 25%)</li>
        <li>Use lower leverage (5x or below for volatile assets)</li>
        <li>Set stop-losses programmatically â€” close the position before liquidation triggers</li>
        <li>Size positions as a fraction of total capital (Kelly criterion or fixed fractional)</li>
        <li>Call <code>POST /trading/add-margin</code> automatically when margin ratio crosses a warning level</li>
      </ul>

      <h2>Funding Rate Deep Dive</h2>

      <h3>The Formula</h3>
      <p>
        Most exchanges use a variant of the following funding rate formula:
      </p>
      <div class="formula-block">
        premium_index = (mark_price - index_price) / index_price<br>
        funding_rate = clamp(premium_index, -max_rate, max_rate)<br><br>
        Typical max_rate = 0.075% per 8h interval<br>
        Annualized max = 0.075% * 3 * 365 = 82.125% APY
      </div>
      <p>
        The clamp prevents extreme funding rates from making positions untenable. In practice, BTC funding averages ~0.01% per interval during neutral markets and spikes to 0.05-0.075% during peak bull runs.
      </p>

      <h3>Profiting from Funding</h3>
      <p>
        AI agents can systematically collect funding by identifying markets where the rate has been persistently positive (or negative) and opening delta-neutral positions. The key insight: you do not need directional conviction. You only need funding income to exceed transaction costs and any residual basis risk. Over bull markets, BTC-PERP has averaged annualized funding income of 10â€“15% APY for short holders running delta-neutral strategies.
      </p>

      <h2>Why AI Agents Love Perps</h2>
      <ul>
        <li><strong>24/7 operation</strong> â€” crypto perp markets never close. An AI agent running continuously has a genuine edge over human traders who sleep, get distracted, or hesitate.</li>
        <li><strong>No expiry to manage</strong> â€” no rolling positions, no delivery dates, no calendar management. A perp opened today can be closed at the optimal moment â€” whenever that is.</li>
        <li><strong>Built-in short selling</strong> â€” no need to borrow shares or deal with short-sale restrictions. Open a short with a single API call.</li>
        <li><strong>Funding rate income</strong> â€” mechanical, predictable income streams that don't require price prediction. Exactly the kind of strategy where an always-on agent excels.</li>
        <li><strong>Programmatic liquidation monitoring</strong> â€” an agent can poll its margin ratio every second and react in milliseconds, far faster than any human.</li>
        <li><strong>Rich API surface</strong> â€” every action in perp trading (open, close, adjust leverage, add margin, query funding) maps cleanly to an API call.</li>
      </ul>

      <h2>Trading Perps via Purple Flea API</h2>
      <p>
        Purple Flea provides a clean REST API giving your agent access to all 275 perpetual futures markets available on Hyperliquid. No KYC. No withdrawal limits. Instant settlement.
      </p>

    </div>

    <div class="reveal reveal-delay-1" style="max-width: 800px;">
      <div class="code-block">
        <div class="code-header">
          <div class="code-dot red"></div>
          <div class="code-dot yellow"></div>
          <div class="code-dot green"></div>
          <span class="code-filename">perp_agent.py</span>
        </div>
<span class="kw">import</span> requests

API_KEY = <span class="st">"pf_sk_..."</span>
BASE = <span class="st">"https://api.purpleflea.com"</span>
HEADERS = {<span class="st">"Authorization"</span>: <span class="st">f"Bearer {API_KEY}"</span>}

<span class="cm"># 1. Get current mark price for BTC-PERP</span>
price_resp = requests.<span class="fn">get</span>(
    <span class="st">f"{BASE}/trading/price"</span>,
    params={<span class="st">"market"</span>: <span class="st">"BTC-PERP"</span>},
    headers=HEADERS
)
mark_price = price_resp.json()[<span class="st">"mark_price"</span>]
funding_rate = price_resp.json()[<span class="st">"funding_rate"</span>]  <span class="cm"># current 8h rate</span>
print(<span class="st">f"BTC mark: ${mark_price:,.2f} | Funding: {funding_rate*100:.4f}%"</span>)

<span class="cm"># 2. Open a long position if funding rate is negative (shorts paying longs)</span>
<span class="kw">if</span> funding_rate &lt; <span class="num">0</span>:
    order = requests.<span class="fn">post</span>(
        <span class="st">f"{BASE}/trading/order"</span>,
        json={
            <span class="st">"market"</span>: <span class="st">"BTC-PERP"</span>,
            <span class="st">"side"</span>: <span class="st">"long"</span>,
            <span class="st">"size_usd"</span>: <span class="num">1000</span>,
            <span class="st">"leverage"</span>: <span class="num">3</span>,
            <span class="st">"margin_mode"</span>: <span class="st">"isolated"</span>
        },
        headers=HEADERS
    )
    print(<span class="st">"Opened long:"</span>, order.json()[<span class="st">"position_id"</span>])
      </div>
    </div>

    <div class="prose reveal reveal-delay-2">
      <p>
        The API returns mark price, funding rate, open interest, 24h volume, and order book depth for all 275 markets. Position management endpoints let your agent add margin, adjust leverage, and set stop-loss orders programmatically. Full documentation at <a href="/trading-api/" style="color:var(--purple)">/trading-api/</a>.
      </p>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- RELATED -->
<section>
  <div class="container">
    <div class="reveal">
      <div class="section-label">Keep Learning</div>
      <h2 class="section-title">Related guides.</h2>
    </div>
    <div class="related-grid reveal reveal-delay-1">
      <a href="/trading-api/" class="related-card">
        <div class="label">API Reference</div>
        <div class="title">Trading API Docs</div>
        <div class="desc">Full endpoint reference for 275 perp markets</div>
      </a>
      <a href="/funding-rate-arbitrage/" class="related-card">
        <div class="label">Strategy</div>
        <div class="title">Funding Rate Arbitrage</div>
        <div class="desc">Earn yield with delta-neutral perp strategies</div>
      </a>
      <a href="/ai-trading-bot/" class="related-card">
        <div class="label">Tutorial</div>
        <div class="title">Build an AI Trading Bot</div>
        <div class="desc">End-to-end guide: agent setup, strategy, deployment</div>
      </a>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta-section">
  <div class="container">
    <div class="cta-box reveal">
      <h2>Ready to trade perps<br>with your <span style="color:var(--purple)">AI agent?</span></h2>
      <p>275 markets. No KYC. Instant settlement. Free to start.</p>
      <div class="hero-actions">
        <a href="https://wallet.purpleflea.com" class="btn-primary" target="_blank">Register your agent &rarr;</a>
        <a href="/trading-api/" class="btn-secondary">Read the API docs</a>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<footer>
  <div class="container">
    <div class="footer-top">
      <div class="footer-brand">
        <a href="/" class="nav-logo">
          <div class="nav-logo-icon">&#9830;</div>
          Purple Flea
        </a>
        <p>AI-first infrastructure for autonomous agents. Built for machines, verified by math.</p>
      </div>
      <div class="footer-columns">
        <div class="footer-col">
          <h4>Products</h4>
          <ul>
            <li><a href="https://casino.purpleflea.com" target="_blank">Casino</a></li>
            <li><a href="https://trading.purpleflea.com" target="_blank">Trading</a></li>
            <li><a href="https://wallet.purpleflea.com" target="_blank">Wallet</a></li>
            <li><a href="https://domains.purpleflea.com" target="_blank">Domains</a></li>
            <li><a href="/crypto-wallet-api/">Wallet API Docs</a></li>
            <li><a href="/trading-api/">Trading API Docs</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Developers</h4>
          <ul>
            <li><a href="/docs">Docs</a></li>
            <li><a href="/for-agents">For Agents</a></li>
            <li><a href="/for-langchain/">LangChain</a></li>
            <li><a href="/for-crewai/">CrewAI</a></li>
            <li><a href="/for-claude/">Claude / MCP</a></li>
            <li><a href="/quick-start">Quick Start</a></li>
            <li><a href="/openapi">OpenAPI</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Company</h4>
          <ul>
            <li><a href="/pricing">Pricing</a></li>
            <li><a href="/stats">Stats</a></li>
            <li><a href="/changelog">Changelog</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li><a href="mailto:hello@purpleflea.com">Contact</a></li>
            <li><a href="https://github.com/Purple-flea" target="_blank">GitHub</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2026 Purple Flea. All rights reserved.</p>
      <div class="footer-social">
        <a href="https://github.com/Purple-flea" target="_blank">GitHub</a>
        <a href="https://x.com/purpleflea" target="_blank">X / Twitter</a>
      </div>
    </div>
  </div>
</footer>

<script>
const navbar = document.getElementById('navbar');
window.addEventListener('scroll', () => { navbar.classList.toggle('scrolled', window.scrollY > 50); });
const revealEls = document.querySelectorAll('.reveal');
const revealObs = new IntersectionObserver((entries) => {
  entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); revealObs.unobserve(e.target); } });
}, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });
revealEls.forEach(el => revealObs.observe(el));
</script>
</body>
</html>
