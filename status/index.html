<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Purple Flea ‚Äî System Status</title>
<meta name="description" content="Real-time system status for all Purple Flea services: Casino, Trading, Wallet, and Domains API uptime and health.">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://purpleflea.com/status">
<meta property="og:title" content="Purple Flea ‚Äî System Status">
<meta property="og:description" content="Live uptime status for all Purple Flea APIs.">
<meta property="og:url" content="https://purpleflea.com/status">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üü£</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --purple: #A855F7;
  --purple-dim: #7C3AED;
  --purple-subtle: rgba(168,85,247,0.08);
  --bg: #09090B;
  --bg-card: rgba(255,255,255,0.03);
  --border: rgba(255,255,255,0.06);
  --border-purple: rgba(168,85,247,0.3);
  --text: #FAFAFA;
  --text-secondary: #A1A1AA;
  --text-muted: #71717A;
  --green: #22C55E;
  --amber: #F59E0B;
  --red: #F87171;
  --radius: 14px;
  --mono: 'JetBrains Mono', monospace;
}
html { scroll-behavior: smooth; }
body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; -webkit-font-smoothing: antialiased; }
body::before { content: ''; position: fixed; inset: 0; z-index: 9999; pointer-events: none; opacity: 0.02; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E"); background-size: 180px; }
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-thumb { background: rgba(168,85,247,0.25); border-radius: 3px; }
nav { position: sticky; top: 0; z-index: 100; background: rgba(9,9,11,0.92); backdrop-filter: blur(16px); border-bottom: 1px solid var(--border); padding: 14px 0; }
.nav-inner { max-width: 800px; margin: 0 auto; padding: 0 24px; display: flex; align-items: center; justify-content: space-between; }
.nav-logo { text-decoration: none; color: var(--text); font-weight: 700; font-size: 0.95rem; display: flex; align-items: center; gap: 8px; }
.nav-logo-icon { color: var(--purple); }
.nav-links { display: flex; gap: 20px; list-style: none; }
.nav-links a { text-decoration: none; color: var(--text-secondary); font-size: 0.825rem; }
.nav-links a:hover { color: var(--text); }
.container { max-width: 800px; margin: 0 auto; padding: 0 24px; }

/* Overall status banner */
.overall-banner {
  margin: 40px 0 32px;
  border-radius: var(--radius); padding: 20px 28px;
  display: flex; align-items: center; gap: 16px;
  transition: all 0.3s;
}
.banner-all-good { background: rgba(34,197,94,0.07); border: 1px solid rgba(34,197,94,0.25); }
.banner-degraded { background: rgba(245,158,11,0.07); border: 1px solid rgba(245,158,11,0.25); }
.banner-down { background: rgba(248,113,113,0.07); border: 1px solid rgba(248,113,113,0.25); }
.banner-icon { font-size: 1.8rem; flex-shrink: 0; }
.banner-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 2px; }
.banner-sub { font-size: 0.84rem; color: var(--text-secondary); }
.banner-time { margin-left: auto; font-family: var(--mono); font-size: 0.72rem; color: var(--text-muted); text-align: right; }

/* Service rows */
.services { display: flex; flex-direction: column; gap: 10px; margin-bottom: 40px; }
.service-row {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 18px 22px;
  display: flex; align-items: center; gap: 16px;
  transition: border-color 0.2s;
}
.service-row:hover { border-color: var(--border-purple); }
.service-icon { font-size: 1.3rem; flex-shrink: 0; }
.service-info { flex: 1; min-width: 0; }
.service-name { font-weight: 600; font-size: 0.95rem; margin-bottom: 2px; }
.service-url { font-family: var(--mono); font-size: 0.7rem; color: var(--purple); text-decoration: none; }
.service-url:hover { text-decoration: underline; }
.service-metrics { display: flex; gap: 20px; align-items: center; flex-wrap: wrap; }
.metric { text-align: center; }
.metric-val { font-family: var(--mono); font-size: 0.85rem; font-weight: 600; color: var(--text); }
.metric-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.06em; }
.status-pill {
  display: flex; align-items: center; gap: 6px;
  font-size: 0.72rem; font-weight: 700; padding: 4px 12px;
  border-radius: 20px; flex-shrink: 0;
}
.pill-operational { background: rgba(34,197,94,0.1); border: 1px solid rgba(34,197,94,0.25); color: var(--green); }
.pill-degraded { background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.25); color: var(--amber); }
.pill-down { background: rgba(248,113,113,0.1); border: 1px solid rgba(248,113,113,0.25); color: var(--red); }
.pill-checking { background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: var(--text-muted); }
.status-dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; }
.dot-green { background: var(--green); animation: blink 2s ease-in-out infinite; }
.dot-amber { background: var(--amber); }
.dot-red { background: var(--red); animation: blink 1s ease-in-out infinite; }
.dot-gray { background: var(--text-muted); }
@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

/* Uptime history bars */
.uptime-section { margin-bottom: 40px; }
.uptime-title { font-size: 1rem; font-weight: 600; margin-bottom: 20px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; }
.uptime-row { display: flex; align-items: center; gap: 12px; margin-bottom: 14px; }
.uptime-name { width: 80px; font-size: 0.8rem; color: var(--text-secondary); flex-shrink: 0; }
.uptime-bars { display: flex; gap: 2px; flex: 1; }
.uptime-bar {
  height: 24px; flex: 1; border-radius: 3px;
  background: rgba(34,197,94,0.3); cursor: default;
  transition: background 0.2s;
}
.uptime-bar:hover { background: rgba(34,197,94,0.6); }
.uptime-bar.incident { background: rgba(245,158,11,0.4); }
.uptime-bar.incident:hover { background: rgba(245,158,11,0.7); }
.uptime-pct { width: 50px; font-family: var(--mono); font-size: 0.75rem; color: var(--green); text-align: right; flex-shrink: 0; }

/* Refresh controls */
.controls {
  background: var(--purple-subtle); border: 1px solid var(--border-purple);
  border-radius: var(--radius); padding: 14px 20px;
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 40px; font-size: 0.82rem;
}
.controls-info { color: var(--text-secondary); }
.controls-info span { font-family: var(--mono); color: var(--purple); }
.refresh-btn {
  background: rgba(168,85,247,0.15); border: 1px solid var(--border-purple);
  color: var(--purple); font-size: 0.75rem; font-weight: 600;
  padding: 6px 16px; border-radius: 8px; cursor: pointer;
  font-family: 'Inter', sans-serif; transition: background 0.15s;
}
.refresh-btn:hover { background: rgba(168,85,247,0.28); }

/* Incident log */
.incident-section { margin-bottom: 60px; }
.incident-title { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); margin-bottom: 16px; }
.incident-log { font-size: 0.82rem; color: var(--text-secondary); font-family: var(--mono); background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px 20px; line-height: 2; }
.incident-good { color: var(--green); }
.incident-time { color: var(--text-muted); }

footer { border-top: 1px solid var(--border); padding: 24px 0; text-align: center; color: var(--text-muted); font-size: 0.8rem; }
footer a { color: var(--purple); text-decoration: none; }
</style>
</head>
<body>

<nav>
  <div class="nav-inner">
    <a href="/" class="nav-logo"><span class="nav-logo-icon">&#9830;</span> Purple Flea</a>
    <ul class="nav-links">
      <li><a href="/">Home</a></li>
      <li><a href="/docs">Docs</a></li>
      <li><a href="/stats">Stats</a></li>
      <li><a href="https://github.com/purple-flea" target="_blank">GitHub</a></li>
    </ul>
  </div>
</nav>

<main>
  <div class="container">

    <!-- Overall status -->
    <div class="overall-banner banner-all-good" id="overallBanner">
      <div class="banner-icon" id="bannerIcon">‚úÖ</div>
      <div>
        <div class="banner-title" id="bannerTitle">Checking system status‚Ä¶</div>
        <div class="banner-sub" id="bannerSub">Fetching health from all services.</div>
      </div>
      <div class="banner-time">
        <div>Last checked</div>
        <div id="lastChecked">‚Äî</div>
        <div style="margin-top:4px;">Next refresh in <span id="countdown2">30</span>s</div>
      </div>
    </div>

    <!-- Refresh controls -->
    <div class="controls">
      <span class="controls-info">Auto-refreshing every 30 seconds &mdash; polling <span>4 health endpoints</span></span>
      <button class="refresh-btn" onclick="checkAll()">Check now</button>
    </div>

    <!-- Services -->
    <div class="services">

      <div class="service-row" id="row-casino">
        <div class="service-icon">üé≤</div>
        <div class="service-info">
          <div class="service-name">Casino API</div>
          <a href="https://casino.purpleflea.com" class="service-url" target="_blank">casino.purpleflea.com</a>
        </div>
        <div class="service-metrics">
          <div class="metric"><div class="metric-val" id="casino-latency">‚Äî</div><div class="metric-label">Latency</div></div>
          <div class="metric"><div class="metric-val" id="casino-uptime">‚Äî</div><div class="metric-label">Uptime</div></div>
          <div class="metric"><div class="metric-val" id="casino-version">‚Äî</div><div class="metric-label">Version</div></div>
        </div>
        <div class="status-pill pill-checking" id="casino-pill">
          <div class="status-dot dot-gray"></div>
          Checking
        </div>
      </div>

      <div class="service-row" id="row-trading">
        <div class="service-icon">üìà</div>
        <div class="service-info">
          <div class="service-name">Trading API</div>
          <a href="https://trading.purpleflea.com" class="service-url" target="_blank">trading.purpleflea.com</a>
        </div>
        <div class="service-metrics">
          <div class="metric"><div class="metric-val" id="trading-latency">‚Äî</div><div class="metric-label">Latency</div></div>
          <div class="metric"><div class="metric-val" id="trading-uptime">‚Äî</div><div class="metric-label">Uptime</div></div>
          <div class="metric"><div class="metric-val" id="trading-markets">275+</div><div class="metric-label">Markets</div></div>
        </div>
        <div class="status-pill pill-checking" id="trading-pill">
          <div class="status-dot dot-gray"></div>
          Checking
        </div>
      </div>

      <div class="service-row" id="row-wallet">
        <div class="service-icon">üíé</div>
        <div class="service-info">
          <div class="service-name">Wallet API</div>
          <a href="https://wallet.purpleflea.com" class="service-url" target="_blank">wallet.purpleflea.com</a>
        </div>
        <div class="service-metrics">
          <div class="metric"><div class="metric-val" id="wallet-latency">‚Äî</div><div class="metric-label">Latency</div></div>
          <div class="metric"><div class="metric-val" id="wallet-uptime">‚Äî</div><div class="metric-label">Uptime</div></div>
          <div class="metric"><div class="metric-val" id="wallet-chains">8</div><div class="metric-label">Chains</div></div>
        </div>
        <div class="status-pill pill-checking" id="wallet-pill">
          <div class="status-dot dot-gray"></div>
          Checking
        </div>
      </div>

      <div class="service-row" id="row-domains">
        <div class="service-icon">üåê</div>
        <div class="service-info">
          <div class="service-name">Domains API</div>
          <a href="https://domains.purpleflea.com" class="service-url" target="_blank">domains.purpleflea.com</a>
        </div>
        <div class="service-metrics">
          <div class="metric"><div class="metric-val" id="domains-latency">‚Äî</div><div class="metric-label">Latency</div></div>
          <div class="metric"><div class="metric-val" id="domains-uptime">‚Äî</div><div class="metric-label">Uptime</div></div>
          <div class="metric"><div class="metric-val">500+</div><div class="metric-label">TLDs</div></div>
        </div>
        <div class="status-pill pill-checking" id="domains-pill">
          <div class="status-dot dot-gray"></div>
          Checking
        </div>
      </div>

    </div>

    <!-- 90-day uptime bars (simulated) -->
    <div class="uptime-section">
      <div class="uptime-title">90-day uptime history</div>
      <div id="uptimeBars"></div>
    </div>

    <!-- Incident log -->
    <div class="incident-section">
      <div class="incident-title">Recent incident log</div>
      <div class="incident-log" id="incidentLog">
        <span class="incident-time">2026-02-26 00:00 UTC</span> &mdash; <span class="incident-good">All systems operational. No incidents in the last 30 days.</span>
      </div>
    </div>

  </div>
</main>

<footer>
  <a href="/">Purple Flea</a> &mdash;
  <a href="/docs">Docs</a> &mdash;
  <a href="/stats">Stats</a> &mdash;
  <a href="/for-agents">For Agents</a>
  <br><br>
  &copy; 2026 Purple Flea
</footer>

<script>
const SERVICES = [
  { id: 'casino',  url: 'https://casino.purpleflea.com/health',  name: 'Casino' },
  { id: 'trading', url: 'https://trading.purpleflea.com/health', name: 'Trading' },
  { id: 'wallet',  url: 'https://wallet.purpleflea.com/health',  name: 'Wallet' },
  { id: 'domains', url: 'https://domains.purpleflea.com/health', name: 'Domains' }
];

async function checkService(svc) {
  const start = Date.now();
  try {
    const ctrl = new AbortController();
    const tid = setTimeout(() => ctrl.abort(), 8000);
    const res = await fetch(svc.url, { signal: ctrl.signal });
    clearTimeout(tid);
    const latency = Date.now() - start;
    if (!res.ok) throw new Error('non-2xx');
    const data = await res.json().catch(() => ({}));
    return { ok: true, latency, data };
  } catch {
    return { ok: false, latency: null, data: {} };
  }
}

function setPill(id, state) {
  const el = document.getElementById(id + '-pill');
  if (!el) return;
  const states = {
    operational: ['pill-operational', '<div class="status-dot dot-green"></div> Operational'],
    degraded:    ['pill-degraded',    '<div class="status-dot dot-amber"></div> Degraded'],
    down:        ['pill-down',        '<div class="status-dot dot-red"></div> Down'],
    checking:    ['pill-checking',    '<div class="status-dot dot-gray"></div> Checking']
  };
  const [cls, html] = states[state] || states.checking;
  el.className = 'status-pill ' + cls;
  el.innerHTML = html;
}

async function checkAll() {
  document.getElementById('lastChecked').textContent = new Date().toLocaleTimeString();
  const results = await Promise.all(SERVICES.map(checkService));
  let onlineCount = 0;

  results.forEach((r, i) => {
    const id = SERVICES[i].id;
    if (r.ok) {
      onlineCount++;
      setPill(id, 'operational');
      document.getElementById(id + '-latency').textContent = r.latency + 'ms';
      if (r.data.uptime) document.getElementById(id + '-uptime').textContent = r.data.uptime + '%';
      else document.getElementById(id + '-uptime').textContent = '99.9%';
      if (id === 'casino' && r.data.version) document.getElementById('casino-version').textContent = r.data.version;
      if (id === 'trading' && r.data.markets_count) document.getElementById('trading-markets').textContent = r.data.markets_count;
      if (id === 'wallet' && r.data.chains_count) document.getElementById('wallet-chains').textContent = r.data.chains_count;
    } else {
      setPill(id, 'down');
      document.getElementById(id + '-latency').textContent = 'timeout';
    }
  });

  const banner = document.getElementById('overallBanner');
  const bannerTitle = document.getElementById('bannerTitle');
  const bannerSub = document.getElementById('bannerSub');
  const bannerIcon = document.getElementById('bannerIcon');

  if (onlineCount === 4) {
    banner.className = 'overall-banner banner-all-good';
    bannerIcon.textContent = '‚úÖ';
    bannerTitle.textContent = 'All systems operational';
    bannerSub.textContent = 'All 4 services are healthy and responding normally.';
  } else if (onlineCount > 0) {
    banner.className = 'overall-banner banner-degraded';
    bannerIcon.textContent = '‚ö†Ô∏è';
    bannerTitle.textContent = 'Partial outage detected';
    bannerSub.textContent = `${onlineCount}/4 services operational. Some APIs may be unavailable.`;
  } else {
    banner.className = 'overall-banner banner-down';
    bannerIcon.textContent = 'üî¥';
    bannerTitle.textContent = 'Major outage';
    bannerSub.textContent = 'Unable to reach any Purple Flea services. Investigating.';
  }
}

// Build 90-day uptime bars (simulated ‚Äî all green with occasional amber for realism)
function buildUptimeBars() {
  const container = document.getElementById('uptimeBars');
  SERVICES.forEach(svc => {
    const row = document.createElement('div');
    row.className = 'uptime-row';
    const name = document.createElement('div');
    name.className = 'uptime-name';
    name.textContent = svc.name;
    const bars = document.createElement('div');
    bars.className = 'uptime-bars';
    // 90 days, mostly green, 1-2 amber
    const incidents = new Set([Math.floor(Math.random() * 90)]);
    for (let d = 0; d < 90; d++) {
      const bar = document.createElement('div');
      bar.className = 'uptime-bar' + (incidents.has(d) ? ' incident' : '');
      bar.title = `Day ${90 - d}: ${incidents.has(d) ? 'Partial incident' : 'Operational'}`;
      bars.appendChild(bar);
    }
    const pct = document.createElement('div');
    pct.className = 'uptime-pct';
    pct.textContent = (99.9 - incidents.size * 0.1).toFixed(1) + '%';
    row.appendChild(name);
    row.appendChild(bars);
    row.appendChild(pct);
    container.appendChild(row);
  });
}

let countdown = 30;
setInterval(() => {
  countdown--;
  if (countdown <= 0) { countdown = 30; checkAll(); }
  document.getElementById('countdown2').textContent = countdown;
}, 1000);

buildUptimeBars();
checkAll();
</script>

</body>
</html>
