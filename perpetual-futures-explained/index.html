<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Perpetual Futures Explained â€” Complete Guide for AI Agent Developers</title>
<meta name="description" content="What are perpetual futures? Deep-dive guide covering funding rates, mark price, liquidation mechanics, leverage math, and strategies for AI agents trading 275+ perp markets via Purple Flea.">
<link rel="canonical" href="https://purpleflea.com/perpetual-futures-explained">
<meta property="og:title" content="Perpetual Futures Explained â€” Complete Guide for AI Agent Developers">
<meta property="og:description" content="Deep-dive guide to perpetual futures: funding rates, mark price, liquidation mechanics, leverage math, and AI agent strategies via Purple Flea Trading API.">
<meta property="og:url" content="https://purpleflea.com/perpetual-futures-explained">
<meta property="og:type" content="article">
<meta property="og:site_name" content="Purple Flea">
<meta property="og:image" content="https://purpleflea.com/flea.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@purpleflea">
<meta name="twitter:title" content="Perpetual Futures Explained â€” Complete Guide for AI Agent Developers">
<meta name="twitter:description" content="Deep-dive guide to perpetual futures: funding rates, mark price, liquidation, leverage math, and AI agent trading strategies.">
<meta name="twitter:image" content="https://purpleflea.com/flea.jpg">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Perpetual Futures Explained",
  "name": "Perpetual Futures Explained â€” Complete Guide for AI Agent Developers",
  "url": "https://purpleflea.com/perpetual-futures-explained",
  "description": "Deep-dive guide to perpetual futures contracts for AI agent developers: funding rates, mark price, liquidation mechanics, leverage math, and strategies via Purple Flea Trading API.",
  "publisher": { "@type": "Organization", "name": "Purple Flea", "url": "https://purpleflea.com" },
  "datePublished": "2026-01-01",
  "dateModified": "2026-02-27"
}
</script>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŸ£</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --purple: #A855F7;
  --purple-dim: #7C3AED;
  --purple-glow: rgba(168, 85, 247, 0.3);
  --purple-subtle: rgba(168, 85, 247, 0.08);
  --bg: #09090B;
  --text: #FAFAFA;
  --text-secondary: #A1A1AA;
  --text-muted: #71717A;
  --border: rgba(255,255,255,0.06);
  --bg-card: rgba(255,255,255,0.03);
  --bg-card-hover: rgba(255,255,255,0.06);
  --border-hover: rgba(168, 85, 247, 0.3);
  --radius: 16px;
  --radius-sm: 10px;
  --green: #22C55E;
  --red: #EF4444;
  --blue: #60A5FA;
  --yellow: #FBBF24;
}
html { scroll-behavior: smooth; }
body { font-family: 'Inter', system-ui, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
body::before { content: ''; position: fixed; inset: 0; z-index: 9999; pointer-events: none; opacity: 0.025; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"); background-repeat: repeat; background-size: 180px; }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(168, 85, 247, 0.3); border-radius: 3px; }
::selection { background: rgba(168, 85, 247, 0.4); color: white; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.reveal { opacity: 0; transform: translateY(30px); transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1); }
.reveal.visible { opacity: 1; transform: translateY(0); }
.reveal-delay-1 { transition-delay: 0.1s; }
.reveal-delay-2 { transition-delay: 0.2s; }
.reveal-delay-3 { transition-delay: 0.3s; }

/* NAV */
nav { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; padding: 16px 0; transition: all 0.3s ease; }
nav.scrolled { background: rgba(9, 9, 11, 0.85); backdrop-filter: blur(20px) saturate(1.5); border-bottom: 1px solid var(--border); }
.nav-inner { display: flex; align-items: center; justify-content: space-between; max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.nav-logo { display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 18px; text-decoration: none; color: var(--text); }
.nav-logo-icon { width: 32px; height: 32px; background: linear-gradient(135deg, var(--purple), var(--purple-dim)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 16px; }
.nav-links { display: flex; align-items: center; gap: 32px; list-style: none; }
.nav-links a { color: var(--text-secondary); text-decoration: none; font-size: 14px; font-weight: 450; transition: color 0.2s; }
.nav-links a:hover { color: var(--text); }
.nav-cta { display: inline-flex; align-items: center; gap: 6px; padding: 8px 18px; background: var(--purple); color: white !important; border-radius: 8px; font-weight: 500; font-size: 14px; text-decoration: none; transition: all 0.2s; }
.nav-cta:hover { background: var(--purple-dim); transform: translateY(-1px); }
@media (max-width: 768px) { .nav-links { display: none; } }

/* HERO */
.hero { min-height: 82vh; display: flex; align-items: center; justify-content: center; position: relative; padding: 120px 0 80px; overflow: hidden; }
.hero-bg { position: absolute; inset: 0; overflow: hidden; }
.hero-gradient-1 { position: absolute; top: -30%; left: 50%; transform: translateX(-50%); width: 900px; height: 600px; background: radial-gradient(ellipse, rgba(168, 85, 247, 0.15) 0%, transparent 70%); filter: blur(60px); }
.hero-grid { position: absolute; inset: 0; background-image: linear-gradient(rgba(168, 85, 247, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(168, 85, 247, 0.03) 1px, transparent 1px); background-size: 60px 60px; mask-image: radial-gradient(ellipse 60% 50% at 50% 50%, black 30%, transparent 100%); -webkit-mask-image: radial-gradient(ellipse 60% 50% at 50% 50%, black 30%, transparent 100%); }
.hero-content { position: relative; text-align: center; max-width: 860px; margin: 0 auto; padding: 0 24px; }
.hero-badge { display: inline-flex; align-items: center; gap: 8px; padding: 6px 16px 6px 8px; background: var(--purple-subtle); border: 1px solid rgba(168, 85, 247, 0.15); border-radius: 100px; font-size: 13px; font-weight: 500; color: var(--purple); margin-bottom: 32px; animation: fadeInDown 0.8s ease; }
.hero-badge-dot { width: 8px; height: 8px; background: var(--purple); border-radius: 50%; animation: badge-pulse 2s ease-in-out infinite; }
@keyframes badge-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
@keyframes fadeInDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes gradient-shift { 0% { background-position: 0% center; } 50% { background-position: 100% center; } 100% { background-position: 0% center; } }
.hero h1 { font-size: clamp(2.5rem, 6vw, 4.5rem); font-weight: 800; line-height: 1.05; letter-spacing: -0.03em; margin-bottom: 24px; animation: fadeInUp 0.8s ease 0.1s both; }
.hero h1 .gradient { background: linear-gradient(135deg, var(--purple) 0%, #C084FC 50%, var(--purple) 100%); background-size: 200% auto; -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; animation: gradient-shift 5s ease infinite; }
.hero-desc { font-size: clamp(1rem, 2vw, 1.2rem); color: var(--text-secondary); margin-bottom: 40px; line-height: 1.7; animation: fadeInUp 0.8s ease 0.2s both; }
.hero-actions { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; animation: fadeInUp 0.8s ease 0.3s both; }
.btn-primary { display: inline-flex; align-items: center; gap: 8px; padding: 14px 28px; background: var(--purple); color: white; border-radius: var(--radius-sm); font-weight: 600; font-size: 15px; text-decoration: none; transition: all 0.2s; box-shadow: 0 0 30px rgba(168, 85, 247, 0.3); }
.btn-primary:hover { background: var(--purple-dim); transform: translateY(-2px); box-shadow: 0 0 40px rgba(168, 85, 247, 0.5); }
.btn-secondary { display: inline-flex; align-items: center; gap: 8px; padding: 14px 28px; background: var(--bg-card); color: var(--text); border-radius: var(--radius-sm); font-weight: 500; font-size: 15px; text-decoration: none; border: 1px solid var(--border); transition: all 0.2s; }
.btn-secondary:hover { border-color: var(--border-hover); background: var(--bg-card-hover); transform: translateY(-2px); }

/* TOC */
.toc-bar { background: var(--bg-card); border-bottom: 1px solid var(--border); padding: 14px 0; position: sticky; top: 64px; z-index: 900; overflow-x: auto; white-space: nowrap; }
.toc-bar::-webkit-scrollbar { height: 0; }
.toc-inner { display: flex; gap: 6px; max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.toc-link { display: inline-block; padding: 5px 14px; border-radius: 100px; font-size: 12.5px; font-weight: 500; color: var(--text-muted); text-decoration: none; transition: all 0.2s; border: 1px solid transparent; white-space: nowrap; }
.toc-link:hover { color: var(--text); border-color: var(--border); background: var(--bg-card-hover); }
.toc-link.active { color: var(--purple); border-color: rgba(168,85,247,0.25); background: var(--purple-subtle); }

/* SECTIONS */
section { padding: 96px 0; position: relative; }
.section-label { display: inline-flex; align-items: center; gap: 12px; font-size: 12px; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--purple); margin-bottom: 20px; }
.section-label::before { content: ''; width: 24px; height: 1px; background: var(--purple); }
.section-title { font-size: clamp(1.8rem, 4vw, 2.8rem); font-weight: 800; letter-spacing: -0.02em; margin-bottom: 16px; }
.section-desc { font-size: 1.05rem; color: var(--text-secondary); max-width: 640px; margin-bottom: 56px; line-height: 1.75; }
.section-divider { border: none; height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent); margin: 0; }

/* GRID */
.grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
@media (max-width: 900px) { .grid-3 { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 640px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } }

/* CONCEPT CARDS */
.concept-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; transition: all 0.3s ease; }
.concept-card:hover { background: var(--bg-card-hover); border-color: var(--border-hover); transform: translateY(-3px); box-shadow: 0 16px 48px rgba(0,0,0,0.4), 0 0 24px rgba(168,85,247,0.04); }
.concept-card .card-icon { width: 44px; height: 44px; border-radius: 11px; display: flex; align-items: center; justify-content: center; font-size: 20px; margin-bottom: 18px; }
.card-icon.purple { background: rgba(168, 85, 247, 0.12); }
.card-icon.blue { background: rgba(96, 165, 250, 0.12); }
.card-icon.green { background: rgba(34, 197, 94, 0.12); }
.card-icon.orange { background: rgba(251, 146, 60, 0.12); }
.card-icon.red { background: rgba(239, 68, 68, 0.12); }
.card-icon.teal { background: rgba(20, 184, 166, 0.12); }
.concept-card h3 { font-size: 1rem; font-weight: 650; margin-bottom: 10px; letter-spacing: -0.01em; }
.concept-card p { color: var(--text-secondary); font-size: 0.875rem; line-height: 1.65; margin-bottom: 14px; }
.concept-card .example { background: rgba(0,0,0,0.3); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 12px 16px; font-family: 'JetBrains Mono', monospace; font-size: 12px; color: var(--text-secondary); line-height: 1.7; }
.concept-card .example .label { font-family: 'Inter', sans-serif; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); margin-bottom: 6px; display: block; }
.example-val { color: var(--purple); font-weight: 600; }
.example-pos { color: var(--green); font-weight: 600; }
.example-neg { color: var(--red); font-weight: 600; }

/* CODE BLOCK */
.code-block { background: rgba(0,0,0,0.45); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; font-family: 'JetBrains Mono', monospace; font-size: 13px; line-height: 1.75; overflow-x: auto; position: relative; }
.code-block .code-header { display: flex; align-items: center; gap: 8px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
.code-dot { width: 12px; height: 12px; border-radius: 50%; }
.code-dot.red { background: #EF4444; }
.code-dot.yellow { background: #FBBF24; }
.code-dot.green { background: #22C55E; }
.code-filename { margin-left: 8px; font-size: 12px; color: var(--text-muted); }
.kw { color: #C084FC; }
.fn { color: #93C5FD; }
.st { color: #86EFAC; }
.cm { color: var(--text-muted); font-style: italic; }
.num { color: #FDE68A; }
.cls { color: #F9A8D4; }
.at { color: #A855F7; }

/* PROSE */
.prose { max-width: 800px; }
.prose h2 { font-size: clamp(1.4rem, 2.5vw, 1.9rem); font-weight: 750; letter-spacing: -0.02em; margin-bottom: 14px; margin-top: 56px; }
.prose h2:first-child { margin-top: 0; }
.prose h3 { font-size: 1.05rem; font-weight: 650; margin-bottom: 10px; margin-top: 28px; color: var(--text); }
.prose p { color: var(--text-secondary); font-size: 1rem; line-height: 1.8; margin-bottom: 18px; }
.prose ul, .prose ol { color: var(--text-secondary); font-size: 1rem; line-height: 1.8; margin-bottom: 18px; padding-left: 22px; }
.prose li { margin-bottom: 6px; }
.prose strong { color: var(--text); font-weight: 600; }
.prose a { color: var(--purple); text-decoration: none; }
.prose a:hover { text-decoration: underline; }
.prose code { font-family: 'JetBrains Mono', monospace; font-size: 0.85em; background: rgba(168,85,247,0.1); color: var(--purple); padding: 2px 7px; border-radius: 4px; }

/* FORMULA / INFO BOXES */
.formula-block { background: rgba(0,0,0,0.4); border: 1px solid var(--border); border-left: 3px solid var(--purple); border-radius: var(--radius-sm); padding: 20px 24px; font-family: 'JetBrains Mono', monospace; font-size: 12.5px; color: var(--text-secondary); margin: 22px 0; line-height: 1.9; }
.formula-block .f-comment { color: var(--text-muted); font-style: italic; }
.formula-block .f-result { color: var(--purple); font-weight: 600; }
.info-box { background: rgba(168,85,247,0.05); border: 1px solid rgba(168,85,247,0.18); border-radius: var(--radius-sm); padding: 18px 22px; margin: 22px 0; }
.info-box p { color: var(--text-secondary); font-size: 0.9rem; margin: 0; line-height: 1.7; }
.info-box strong { color: var(--purple); }
.warn-box { background: rgba(239,68,68,0.05); border: 1px solid rgba(239,68,68,0.2); border-radius: var(--radius-sm); padding: 18px 22px; margin: 22px 0; }
.warn-box p { color: var(--text-secondary); font-size: 0.9rem; margin: 0; line-height: 1.7; }
.warn-box strong { color: #EF4444; }
.tip-box { background: rgba(34,197,94,0.05); border: 1px solid rgba(34,197,94,0.2); border-radius: var(--radius-sm); padding: 18px 22px; margin: 22px 0; }
.tip-box p { color: var(--text-secondary); font-size: 0.9rem; margin: 0; line-height: 1.7; }
.tip-box strong { color: var(--green); }

/* FUNDING TIMELINE */
.funding-timeline { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 36px; margin: 32px 0; }
.funding-timeline h4 { font-size: 0.875rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 28px; }
.timeline-track { position: relative; display: flex; align-items: center; margin-bottom: 24px; }
.timeline-line { flex: 1; height: 3px; background: linear-gradient(90deg, var(--purple-dim), var(--purple)); border-radius: 2px; position: relative; }
.timeline-nodes { display: flex; justify-content: space-between; align-items: flex-start; }
.t-node { display: flex; flex-direction: column; align-items: center; gap: 8px; flex: 1; }
.t-dot { width: 14px; height: 14px; border-radius: 50%; border: 2px solid var(--purple); background: var(--bg); position: relative; z-index: 1; }
.t-dot.active { background: var(--purple); box-shadow: 0 0 12px var(--purple-glow); }
.t-label { font-size: 11px; font-family: 'JetBrains Mono', monospace; color: var(--text-muted); text-align: center; }
.t-event { font-size: 10.5px; color: var(--text-secondary); text-align: center; max-width: 80px; }
.funding-row { display: flex; align-items: center; gap: 16px; padding: 12px 16px; border-radius: var(--radius-sm); margin-bottom: 8px; font-size: 13.5px; }
.funding-row.pos { background: rgba(34,197,94,0.06); border: 1px solid rgba(34,197,94,0.15); }
.funding-row.neg { background: rgba(239,68,68,0.06); border: 1px solid rgba(239,68,68,0.15); }
.funding-arrow { font-size: 16px; }
.funding-rate-val { font-family: 'JetBrains Mono', monospace; font-weight: 600; margin-left: auto; }
.funding-row.pos .funding-rate-val { color: var(--green); }
.funding-row.neg .funding-rate-val { color: var(--red); }

/* LEVERAGE VISUAL */
.leverage-vis { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 36px; margin: 32px 0; }
.lev-scenario { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
@media (max-width: 640px) { .lev-scenario { grid-template-columns: 1fr; } }
.lev-card { border-radius: var(--radius-sm); padding: 24px; }
.lev-card.win { background: rgba(34,197,94,0.06); border: 1px solid rgba(34,197,94,0.18); }
.lev-card.lose { background: rgba(239,68,68,0.06); border: 1px solid rgba(239,68,68,0.18); }
.lev-card h4 { font-size: 0.875rem; font-weight: 600; margin-bottom: 16px; }
.lev-card.win h4 { color: var(--green); }
.lev-card.lose h4 { color: var(--red); }
.lev-row { display: flex; justify-content: space-between; font-size: 13px; padding: 6px 0; border-bottom: 1px solid var(--border); }
.lev-row:last-child { border-bottom: none; font-weight: 600; }
.lev-row span:first-child { color: var(--text-muted); }
.lev-row.total span:last-child { color: var(--purple); }
.lev-row.win-val span:last-child { color: var(--green); }
.lev-row.lose-val span:last-child { color: var(--red); }
.lev-math { font-family: 'JetBrains Mono', monospace; font-size: 12px; background: rgba(0,0,0,0.35); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 16px 20px; margin-top: 20px; line-height: 1.85; color: var(--text-secondary); }

/* LIQUIDATION CALC */
.liq-calc { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 36px; margin: 32px 0; }
.liq-table { width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 20px; }
.liq-table th { text-align: left; padding: 10px 16px; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-muted); border-bottom: 1px solid var(--border); }
.liq-table td { padding: 12px 16px; border-bottom: 1px solid rgba(255,255,255,0.03); font-family: 'JetBrains Mono', monospace; font-size: 12.5px; color: var(--text-secondary); }
.liq-table tr:last-child td { border-bottom: none; }
.liq-table .lev-col { color: var(--purple); font-weight: 600; }
.liq-table .price-col { color: var(--text); }
.liq-table .drop-col.safe { color: var(--green); }
.liq-table .drop-col.warn { color: var(--yellow); }
.liq-table .drop-col.danger { color: var(--red); }

/* MARKETS SECTION */
.markets-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-top: 28px; }
@media (max-width: 900px) { .markets-grid { grid-template-columns: repeat(3, 1fr); } }
@media (max-width: 640px) { .markets-grid { grid-template-columns: repeat(2, 1fr); } }
.market-chip { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 14px 18px; display: flex; align-items: center; gap: 10px; transition: all 0.2s; }
.market-chip:hover { border-color: var(--border-hover); background: var(--bg-card-hover); }
.market-icon { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 15px; flex-shrink: 0; }
.market-name { font-size: 13px; font-weight: 600; }
.market-sub { font-size: 11px; color: var(--text-muted); }
.markets-more { text-align: center; margin-top: 28px; padding: 20px; background: var(--bg-card); border: 1px dashed var(--border); border-radius: var(--radius); }
.markets-more p { color: var(--text-secondary); font-size: 14px; }
.markets-more strong { color: var(--purple); }

/* FUNDING HISTORY */
.funding-bars { display: flex; align-items: flex-end; gap: 6px; height: 100px; margin: 24px 0 10px; }
.f-bar { flex: 1; border-radius: 3px 3px 0 0; min-height: 4px; transition: opacity 0.2s; }
.f-bar:hover { opacity: 0.8; }
.f-bar.pos { background: linear-gradient(180deg, var(--green), rgba(34,197,94,0.4)); }
.f-bar.neg { background: linear-gradient(0deg, var(--red), rgba(239,68,68,0.4)); border-radius: 0 0 3px 3px; align-self: flex-start; }
.funding-bar-labels { display: flex; justify-content: space-between; font-size: 10.5px; font-family: 'JetBrains Mono', monospace; color: var(--text-muted); }
.funding-range-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
.funding-range-table th { text-align: left; padding: 8px 14px; font-size: 11px; font-weight: 600; letter-spacing: 0.06em; text-transform: uppercase; color: var(--text-muted); border-bottom: 1px solid var(--border); }
.funding-range-table td { padding: 10px 14px; font-size: 13px; border-bottom: 1px solid rgba(255,255,255,0.03); }
.funding-range-table tr:last-child td { border-bottom: none; }
.rate-badge { display: inline-block; padding: 2px 10px; border-radius: 100px; font-family: 'JetBrains Mono', monospace; font-size: 12px; font-weight: 600; }
.rate-badge.neutral { background: rgba(161,161,170,0.1); color: var(--text-secondary); }
.rate-badge.moderate { background: rgba(251,191,36,0.1); color: var(--yellow); }
.rate-badge.high { background: rgba(34,197,94,0.1); color: var(--green); }
.rate-badge.extreme { background: rgba(239,68,68,0.1); color: var(--red); }

/* STRATEGIES */
.strategy-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 32px; transition: all 0.3s; }
.strategy-card:hover { background: var(--bg-card-hover); border-color: var(--border-hover); transform: translateY(-3px); }
.strategy-number { font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: 600; color: var(--purple); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 14px; }
.strategy-card h3 { font-size: 1.05rem; font-weight: 650; margin-bottom: 12px; }
.strategy-card p { color: var(--text-secondary); font-size: 0.875rem; line-height: 1.65; margin-bottom: 16px; }
.strategy-card ul { color: var(--text-secondary); font-size: 0.875rem; line-height: 1.7; padding-left: 20px; }
.strategy-card li { margin-bottom: 4px; }
.strategy-signal { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 16px; }
.signal-tag { padding: 3px 10px; border-radius: 100px; font-size: 11px; font-weight: 500; }
.signal-tag.entry { background: rgba(34,197,94,0.1); color: var(--green); border: 1px solid rgba(34,197,94,0.2); }
.signal-tag.exit { background: rgba(239,68,68,0.1); color: var(--red); border: 1px solid rgba(239,68,68,0.2); }
.signal-tag.neutral { background: rgba(168,85,247,0.1); color: var(--purple); border: 1px solid rgba(168,85,247,0.2); }

/* RISK SECTION */
.risk-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
@media (max-width: 640px) { .risk-grid { grid-template-columns: 1fr; } }
.risk-card { border-radius: var(--radius); padding: 28px; }
.risk-card.danger { background: rgba(239,68,68,0.05); border: 1px solid rgba(239,68,68,0.18); }
.risk-card.caution { background: rgba(251,191,36,0.05); border: 1px solid rgba(251,191,36,0.18); }
.risk-card h3 { font-size: 1rem; font-weight: 650; margin-bottom: 12px; }
.risk-card.danger h3 { color: #EF4444; }
.risk-card.caution h3 { color: var(--yellow); }
.risk-card p { color: var(--text-secondary); font-size: 0.875rem; line-height: 1.65; }

/* GET STARTED */
.steps { display: flex; flex-direction: column; gap: 0; }
.step { display: flex; gap: 24px; padding: 28px 0; border-bottom: 1px solid var(--border); }
.step:last-child { border-bottom: none; }
.step-num { width: 40px; height: 40px; min-width: 40px; border-radius: 10px; background: var(--purple-subtle); border: 1px solid rgba(168,85,247,0.2); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; color: var(--purple); }
.step-content h3 { font-size: 1rem; font-weight: 640; margin-bottom: 6px; }
.step-content p { color: var(--text-secondary); font-size: 0.875rem; line-height: 1.65; }
.step-content a { color: var(--purple); text-decoration: none; }
.step-content a:hover { text-decoration: underline; }
.step-content code { font-family: 'JetBrains Mono', monospace; font-size: 0.85em; background: rgba(168,85,247,0.1); color: var(--purple); padding: 2px 7px; border-radius: 4px; }

/* CTA */
.cta-section { padding: 96px 0; text-align: center; }
.cta-box { background: linear-gradient(135deg, rgba(168,85,247,0.08) 0%, rgba(124,58,237,0.05) 100%); border: 1px solid rgba(168,85,247,0.2); border-radius: 24px; padding: 80px 40px; position: relative; overflow: hidden; }
.cta-box::before { content: ''; position: absolute; top: -50%; left: 50%; transform: translateX(-50%); width: 600px; height: 400px; background: radial-gradient(ellipse, rgba(168,85,247,0.1) 0%, transparent 70%); filter: blur(40px); pointer-events: none; }
.cta-box h2 { font-size: clamp(1.8rem, 4vw, 2.8rem); font-weight: 800; letter-spacing: -0.02em; margin-bottom: 16px; position: relative; }
.cta-box p { color: var(--text-secondary); font-size: 1.05rem; margin-bottom: 36px; position: relative; }

/* RELATED */
.related-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
@media (max-width: 768px) { .related-grid { grid-template-columns: 1fr; } }
.related-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 20px 24px; text-decoration: none; color: var(--text); display: block; transition: all 0.2s; }
.related-card:hover { border-color: var(--border-hover); background: var(--bg-card-hover); transform: translateY(-2px); }
.related-card .label { font-size: 11px; color: var(--purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px; }
.related-card .title { font-size: 14px; font-weight: 600; }
.related-card .desc { font-size: 13px; color: var(--text-muted); margin-top: 4px; }

/* FOOTER */
footer { padding: 60px 0 40px; border-top: 1px solid var(--border); }
.footer-top { display: grid; grid-template-columns: 1fr 2fr; gap: 60px; margin-bottom: 60px; }
.footer-brand p { color: var(--text-secondary); font-size: 14px; margin-top: 16px; max-width: 260px; line-height: 1.6; }
.footer-columns { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; }
.footer-col h4 { font-size: 13px; font-weight: 600; margin-bottom: 16px; }
.footer-col ul { list-style: none; display: flex; flex-direction: column; gap: 10px; }
.footer-col a { color: var(--text-muted); text-decoration: none; font-size: 13px; transition: color 0.2s; }
.footer-col a:hover { color: var(--text); }
.footer-bottom { display: flex; align-items: center; justify-content: space-between; padding-top: 24px; border-top: 1px solid var(--border); }
.footer-bottom p { color: var(--text-muted); font-size: 13px; }
.footer-social { display: flex; gap: 24px; }
.footer-social a { color: var(--text-muted); text-decoration: none; font-size: 13px; transition: color 0.2s; }
.footer-social a:hover { color: var(--text); }
@media (max-width: 768px) { .footer-top { grid-template-columns: 1fr; gap: 40px; } .footer-columns { grid-template-columns: repeat(2, 1fr); } .footer-bottom { flex-direction: column; gap: 16px; text-align: center; } }
</style>
</head>
<body>

<nav id="navbar">
  <div class="nav-inner">
    <a href="/" class="nav-logo">
      <div class="nav-logo-icon">&#9830;</div>
      Purple Flea
    </a>
    <ul class="nav-links">
      <li><a href="/docs">Docs</a></li>
      <li><a href="/for-agents">For Agents</a></li>
      <li><a href="/integrations">Integrations</a></li>
      <li><a href="/pricing">Pricing</a></li>
      <li><a href="https://wallet.purpleflea.com" target="_blank" class="nav-cta">Get Started &rarr;</a></li>
    </ul>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg">
    <div class="hero-gradient-1"></div>
    <div class="hero-grid"></div>
  </div>
  <div class="hero-content">
    <div class="hero-badge">
      <div class="hero-badge-dot"></div>
      Complete Educational Guide
    </div>
    <h1>Perpetual Futures<br><span class="gradient">Explained</span></h1>
    <p class="hero-desc">
      Everything AI agent developers need to know about perpetual futures contracts â€” from first principles through funding rate arbitrage. Built for builders, not traders.
    </p>
    <div class="hero-actions">
      <a href="#what-are-perps" class="btn-primary">Start Reading &darr;</a>
      <a href="https://trading.purpleflea.com" target="_blank" class="btn-secondary">Trading API &rarr;</a>
    </div>
  </div>
</section>

<!-- TOC BAR -->
<div class="toc-bar" id="tocBar">
  <div class="toc-inner">
    <a href="#what-are-perps" class="toc-link" data-section="what-are-perps">What Are Perps</a>
    <a href="#key-concepts" class="toc-link" data-section="key-concepts">Key Concepts</a>
    <a href="#funding-mechanics" class="toc-link" data-section="funding-mechanics">Funding Mechanics</a>
    <a href="#leverage-math" class="toc-link" data-section="leverage-math">Leverage Math</a>
    <a href="#liquidation" class="toc-link" data-section="liquidation">Liquidation</a>
    <a href="#markets" class="toc-link" data-section="markets">275+ Markets</a>
    <a href="#funding-history" class="toc-link" data-section="funding-history">Funding History</a>
    <a href="#strategies" class="toc-link" data-section="strategies">Strategies</a>
    <a href="#risk-warnings" class="toc-link" data-section="risk-warnings">Risk Warnings</a>
    <a href="#getting-started" class="toc-link" data-section="getting-started">Get Started</a>
  </div>
</div>

<hr class="section-divider">

<!-- WHAT ARE PERPS -->
<section id="what-are-perps">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Foundation</div>
      <h2 class="section-title">What are perpetual futures?</h2>
      <p class="section-desc">Derivatives that let you speculate on any asset â€” with leverage, no expiry date, and a built-in mechanism that keeps the price anchored to spot.</p>
    </div>
    <div class="prose reveal reveal-delay-1">
      <p>
        A perpetual futures contract â€” or <strong>perp</strong> â€” is a derivative that lets you bet on an asset's price without owning it. You can go long (profit when price rises) or short (profit when price falls), with leverage up to 50x. Unlike traditional futures contracts on CME or CBOE, perps have <strong>no expiry date</strong>. There is no settlement day, no roll-over cost, no delivery. A position opened today can be held until you decide to close it â€” whether that is five seconds or five years.
      </p>
      <p>
        Perpetuals were invented by BitMEX in 2016 and are now the most liquid derivative instrument in crypto. Daily trading volume in perp markets routinely exceeds the spot market by 5-10x. Hyperliquid alone clears billions of dollars in perp volume daily, and Purple Flea's Trading API exposes all <strong>275+ of its markets</strong> through a single clean REST interface.
      </p>
      <p>
        The core problem with a futures contract that never expires: what stops it from drifting endlessly away from the spot price? The answer is the <strong>funding rate</strong> â€” a periodic payment that flows between longs and shorts to align the perp price with the underlying index. When the perp trades above spot, longs pay shorts (discouraging buying). When it trades below, shorts pay longs (discouraging selling). This continuous incentive keeps the perp tethered to reality.
      </p>
      <div class="info-box">
        <p><strong>Why this matters for AI agents:</strong> The funding rate is a programmable, predictable cash flow. Unlike discretionary traders who must react to price moves, an agent can systematically harvest funding income with no directional exposure â€” collecting yield while the market moves in any direction.</p>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- KEY CONCEPTS -->
<section id="key-concepts">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Core Mechanics</div>
      <h2 class="section-title">Key concepts.</h2>
      <p class="section-desc">Six building blocks every perp trader â€” human or agent â€” must understand before opening a position.</p>
    </div>
    <div class="grid-3 reveal reveal-delay-1">

      <!-- Mark vs Index -->
      <div class="concept-card">
        <div class="card-icon purple">&#128200;</div>
        <h3>Mark Price vs Index Price</h3>
        <p>Three prices exist in any perp market. <strong>Last Price</strong> is the most recent trade â€” volatile and easily manipulated. <strong>Index Price</strong> is a weighted average of spot prices across major exchanges, representing true fair value. <strong>Mark Price</strong> is the index plus a decaying funding basis â€” the official price used for all P&amp;L and liquidation calculations.</p>
        <div class="example">
          <span class="label">Example: BTC-PERP</span>
          Index Price: <span class="example-val">$65,000.00</span><br>
          Last Price: <span class="example-val">$65,320.00</span><br>
          Mark Price: <span class="example-val">$65,048.00</span><br>
          <span style="color:var(--text-muted)">Liq. uses mark, not last</span>
        </div>
      </div>

      <!-- Funding Rate -->
      <div class="concept-card">
        <div class="card-icon blue">&#128178;</div>
        <h3>Funding Rate</h3>
        <p>Every 8 hours, a payment settles between all open longs and all open shorts based on how far the perp price has deviated from the index. <strong>Positive rate</strong>: longs pay shorts (perp above spot). <strong>Negative rate</strong>: shorts pay longs (perp below spot). Payments happen automatically â€” no action required from traders.</p>
        <div class="example">
          <span class="label">At 0.01% rate / 8h</span>
          $10,000 long position<br>
          Pays: <span class="example-neg">$1.00 per interval</span><br>
          Daily cost: <span class="example-neg">$3.00</span><br>
          Annualized: <span class="example-neg">~10.95% APY drag</span>
        </div>
      </div>

      <!-- Leverage -->
      <div class="concept-card">
        <div class="card-icon orange">&#9650;</div>
        <h3>Leverage</h3>
        <p>Leverage multiplies both your gains and your losses. At <strong>10x leverage</strong>, a $1,000 margin deposit controls a $10,000 position. A 1% favorable price move earns $100 (10% on margin). A 1% adverse move loses $100 (10% on margin). At 10x, a 10% adverse move wipes the full margin. Purple Flea supports 2x through 50x.</p>
        <div class="example">
          <span class="label">10x Leverage Math</span>
          Capital: <span class="example-val">$1,000</span><br>
          Position size: <span class="example-val">$10,000</span><br>
          +1% price move: <span class="example-pos">+$100 (+10%)</span><br>
          -1% price move: <span class="example-neg">-$100 (-10%)</span>
        </div>
      </div>

      <!-- Margin -->
      <div class="concept-card">
        <div class="card-icon red">&#128274;</div>
        <h3>Margin</h3>
        <p><strong>Initial margin</strong> is the collateral required to open a position (e.g., 10% for 10x leverage). <strong>Maintenance margin</strong> is the minimum to keep it open (typically 0.5â€“1%). When your margin ratio falls below maintenance level, the exchange liquidates your position automatically. <strong>Isolated margin</strong> caps loss at your deposited amount; <strong>cross margin</strong> uses your entire account balance.</p>
        <div class="example">
          <span class="label">Margin Types</span>
          Initial: <span class="example-val">10% of position</span><br>
          Maintenance: <span class="example-val">0.5% of position</span><br>
          Isolated: <span class="example-pos">safe â€” capped loss</span><br>
          Cross: <span class="example-neg">risky â€” full account</span>
        </div>
      </div>

      <!-- Open Interest -->
      <div class="concept-card">
        <div class="card-icon teal">&#128202;</div>
        <h3>Open Interest</h3>
        <p>Open interest (OI) is the total USD value of all outstanding open positions in a market. It measures how much speculative capital is deployed. Rising OI alongside rising price suggests genuine demand. Rising OI alongside falling price signals short pressure. <strong>Extremely high OI relative to market cap</strong> is a warning sign: one large forced liquidation can cascade into a market-wide deleveraging.</p>
        <div class="example">
          <span class="label">OI Interpretation</span>
          Price &#8593; + OI &#8593;: <span class="example-pos">Bullish confirmation</span><br>
          Price &#8595; + OI &#8593;: <span class="example-neg">Bearish confirmation</span><br>
          Price &#8593; + OI &#8595;: <span style="color:var(--yellow)">Short squeeze</span><br>
          Price &#8595; + OI &#8595;: <span style="color:var(--yellow)">Long liquidation</span>
        </div>
      </div>

      <!-- Long vs Short -->
      <div class="concept-card">
        <div class="card-icon green">&#8597;</div>
        <h3>Long vs Short</h3>
        <p><strong>Long:</strong> you profit when price rises. You are synthetically buying the asset with borrowed capital, paying funding when rates are positive. <strong>Short:</strong> you profit when price falls. You collect funding when rates are positive (the bull market yield). <strong>Delta-neutral:</strong> long and short in equal size â€” you earn or pay only the funding rate, with no directional exposure.</p>
        <div class="example">
          <span class="label">Position Types</span>
          Long: <span class="example-pos">profit when price rises</span><br>
          Short: <span class="example-pos">profit when price falls</span><br>
          Delta-neutral: <span class="example-val">collect funding only</span><br>
          <span style="color:var(--text-muted)">No prediction required</span>
        </div>
      </div>

    </div><!-- /grid-3 -->
  </div>
</section>

<hr class="section-divider">

<!-- FUNDING MECHANICS -->
<section id="funding-mechanics">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Funding Rate</div>
      <h2 class="section-title">How funding works.</h2>
      <p class="section-desc">A payment mechanism that fires every 8 hours, flowing automatically between longs and shorts. The heartbeat of every perpetual market.</p>
    </div>
    <div class="reveal reveal-delay-1" style="max-width: 860px;">
      <div class="funding-timeline">
        <h4>24-Hour Funding Cycle &mdash; 3 intervals per day</h4>
        <div style="position:relative; margin-bottom:36px;">
          <div style="height:3px; background: linear-gradient(90deg, var(--purple-dim), var(--purple), var(--purple-dim)); border-radius:2px; margin: 28px 0 0;"></div>
          <div style="display:flex; justify-content:space-between; margin-top:-22px;">
            <div style="display:flex; flex-direction:column; align-items:center; gap:6px;">
              <div style="width:14px;height:14px;border-radius:50%;background:var(--purple);box-shadow:0 0 10px var(--purple-glow);"></div>
              <span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-muted);">00:00 UTC</span>
              <span style="font-size:11px;color:var(--text-secondary);text-align:center;max-width:70px;">Funding settles</span>
            </div>
            <div style="display:flex; flex-direction:column; align-items:center; gap:6px;">
              <div style="width:12px;height:12px;border-radius:50%;background:var(--bg);border:2px solid var(--purple);margin-top:1px;"></div>
              <span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-muted);">04:00 UTC</span>
              <span style="font-size:11px;color:var(--text-secondary);text-align:center;max-width:70px;">Rate accrues</span>
            </div>
            <div style="display:flex; flex-direction:column; align-items:center; gap:6px;">
              <div style="width:14px;height:14px;border-radius:50%;background:var(--purple);box-shadow:0 0 10px var(--purple-glow);"></div>
              <span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-muted);">08:00 UTC</span>
              <span style="font-size:11px;color:var(--text-secondary);text-align:center;max-width:70px;">Funding settles</span>
            </div>
            <div style="display:flex; flex-direction:column; align-items:center; gap:6px;">
              <div style="width:12px;height:12px;border-radius:50%;background:var(--bg);border:2px solid var(--purple);margin-top:1px;"></div>
              <span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-muted);">12:00 UTC</span>
              <span style="font-size:11px;color:var(--text-secondary);text-align:center;max-width:70px;">Rate accrues</span>
            </div>
            <div style="display:flex; flex-direction:column; align-items:center; gap:6px;">
              <div style="width:14px;height:14px;border-radius:50%;background:var(--purple);box-shadow:0 0 10px var(--purple-glow);"></div>
              <span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-muted);">16:00 UTC</span>
              <span style="font-size:11px;color:var(--text-secondary);text-align:center;max-width:70px;">Funding settles</span>
            </div>
            <div style="display:flex; flex-direction:column; align-items:center; gap:6px;">
              <div style="width:12px;height:12px;border-radius:50%;background:var(--bg);border:2px solid var(--purple);margin-top:1px;"></div>
              <span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-muted);">20:00 UTC</span>
              <span style="font-size:11px;color:var(--text-secondary);text-align:center;max-width:70px;">Rate accrues</span>
            </div>
            <div style="display:flex; flex-direction:column; align-items:center; gap:6px;">
              <div style="width:14px;height:14px;border-radius:50%;background:var(--purple);box-shadow:0 0 10px var(--purple-glow);"></div>
              <span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-muted);">24:00 UTC</span>
              <span style="font-size:11px;color:var(--text-secondary);text-align:center;max-width:70px;">Funding settles</span>
            </div>
          </div>
        </div>

        <div class="funding-row pos">
          <span class="funding-arrow">&#8594;</span>
          <div>
            <div style="font-weight:600;font-size:13.5px;">Positive funding rate &mdash; perp above spot</div>
            <div style="font-size:12px;color:var(--text-muted);margin-top:3px;">Longs pay shorts &middot; Bears earn &middot; Bulls pay premium for leverage</div>
          </div>
          <span class="funding-rate-val">+0.01% / 8h</span>
        </div>
        <div class="funding-row neg">
          <span class="funding-arrow">&#8592;</span>
          <div>
            <div style="font-weight:600;font-size:13.5px;">Negative funding rate &mdash; perp below spot</div>
            <div style="font-size:12px;color:var(--text-muted);margin-top:3px;">Shorts pay longs &middot; Bulls earn &middot; Bears pay premium for leverage</div>
          </div>
          <span class="funding-rate-val">-0.005% / 8h</span>
        </div>
      </div>

      <div class="prose">
        <h3>The Funding Rate Formula</h3>
        <p>Hyperliquid (and most major perp exchanges) computes the funding rate continuously from the premium index â€” how far the perp mark price deviates from the spot index:</p>
      </div>
      <div class="formula-block">
premium_index    = (mark_price - index_price) / index_price<br>
funding_rate     = clamp(premium_index, -0.075%, +0.075%)<br>
<br>
<span class="f-comment"># Payment calculation at each 8h interval:</span><br>
payment          = position_size * funding_rate<br>
<br>
<span class="f-comment"># Example: $50,000 long at +0.01% funding rate</span><br>
payment_per_8h   = 50,000 * 0.0001 = <span class="f-result">$5.00 (longs pay)</span><br>
payment_per_day  = $5.00 * 3       = <span class="f-result">$15.00</span><br>
annualized       = $15.00 * 365    = <span class="f-result">$5,475 (~10.95% of $50k)</span>
      </div>
      <div class="prose">
        <p>The clamped maximum of Â±0.075% per interval (Â±82.1% annualized) prevents funding rates from becoming so extreme that positions are uneconomical. In practice, BTC rates rarely exceed 0.05% per interval except during peak market euphoria.</p>
        <p>
          <strong>Funding payment = position size &times; funding rate.</strong> Leverage does not change the rate â€” it only affects how large a position your margin controls. A $10,000 position at 10x leverage pays the same funding as a $10,000 position at 2x leverage.
        </p>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- LEVERAGE MATH -->
<section id="leverage-math">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Leverage</div>
      <h2 class="section-title">Leverage math.</h2>
      <p class="section-desc">$1,000 of capital. 10x leverage. A 1% price move. Here is exactly what happens in both directions.</p>
    </div>
    <div class="reveal reveal-delay-1" style="max-width: 860px;">
      <div class="leverage-vis">
        <h4 style="font-size:0.875rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.08em;margin-bottom:4px;">Scenario: $1,000 Capital &mdash; 10x Leverage &mdash; BTC-PERP</h4>
        <div class="lev-math">
capital          = $1,000<br>
leverage         = 10x<br>
position_size    = capital * leverage = <span style="color:var(--purple);font-weight:600;">$10,000</span><br>
entry_price      = $65,000<br>
btc_exposure     = 10,000 / 65,000 = <span style="color:var(--purple);font-weight:600;">0.1538 BTC</span>
        </div>
        <div class="lev-scenario">
          <div class="lev-card win">
            <h4>+1% Price Move &rarr; BTC hits $65,650</h4>
            <div class="lev-row"><span>Price increase</span><span>+$650</span></div>
            <div class="lev-row win-val"><span>Your P&amp;L (0.1538 BTC)</span><span>+$100</span></div>
            <div class="lev-row"><span>Return on capital</span><span>+10%</span></div>
            <div class="lev-row total"><span>Effective margin</span><span>$1,100</span></div>
          </div>
          <div class="lev-card lose">
            <h4>-1% Price Move &rarr; BTC hits $64,350</h4>
            <div class="lev-row"><span>Price decrease</span><span>-$650</span></div>
            <div class="lev-row lose-val"><span>Your P&amp;L (0.1538 BTC)</span><span>-$100</span></div>
            <div class="lev-row"><span>Return on capital</span><span>-10%</span></div>
            <div class="lev-row total"><span>Effective margin</span><span>$900</span></div>
          </div>
        </div>
      </div>

      <div class="prose">
        <h3>Leverage Multiplier vs. Risk Table</h3>
        <p>Higher leverage amplifies returns but compresses the price move required to wipe your position. The relationship is linear â€” 5x leverage requires a 20% adverse move for liquidation, while 50x requires only 2%.</p>
      </div>
      <div class="leverage-vis">
        <table class="liq-table">
          <thead>
            <tr>
              <th>Leverage</th>
              <th>$1k margin controls</th>
              <th>1% move = return</th>
              <th>Adverse move to liq.</th>
            </tr>
          </thead>
          <tbody>
            <tr><td class="lev-col">2x</td><td class="price-col">$2,000</td><td style="color:var(--text-secondary);">2%</td><td class="drop-col safe">~50%</td></tr>
            <tr><td class="lev-col">3x</td><td class="price-col">$3,000</td><td style="color:var(--text-secondary);">3%</td><td class="drop-col safe">~33%</td></tr>
            <tr><td class="lev-col">5x</td><td class="price-col">$5,000</td><td style="color:var(--text-secondary);">5%</td><td class="drop-col safe">~20%</td></tr>
            <tr><td class="lev-col">10x</td><td class="price-col">$10,000</td><td style="color:var(--text-secondary);">10%</td><td class="drop-col warn">~10%</td></tr>
            <tr><td class="lev-col">20x</td><td class="price-col">$20,000</td><td style="color:var(--text-secondary);">20%</td><td class="drop-col danger">~5%</td></tr>
            <tr><td class="lev-col">50x</td><td class="price-col">$50,000</td><td style="color:var(--text-secondary);">50%</td><td class="drop-col danger">~2%</td></tr>
          </tbody>
        </table>
      </div>
      <div class="tip-box">
        <p><strong>Agent recommendation:</strong> For systematic strategies, 2xâ€“5x leverage provides meaningful capital efficiency while keeping liquidation distances far enough to absorb normal volatility. Most of BTC's intraday moves are under 5% â€” a 5x long only gets liquidated on a ~20% drop, which gives an agent ample time to reduce or hedge.</p>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- LIQUIDATION -->
<section id="liquidation">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Risk Management</div>
      <h2 class="section-title">Liquidation mechanics.</h2>
      <p class="section-desc">Understand exactly when and how positions get forcibly closed â€” and how to engineer agents that never get there.</p>
    </div>
    <div class="reveal reveal-delay-1" style="max-width: 860px;">
      <div class="prose">
        <h3>Liquidation Price Formula</h3>
        <p>Liquidation occurs when your margin ratio drops to the maintenance margin level. For a <strong>long</strong> position:</p>
      </div>
      <div class="formula-block">
<span class="f-comment"># Long position liquidation price:</span><br>
liq_price = entry_price * (1 - (1 / leverage) + maintenance_margin_rate)<br>
<br>
<span class="f-comment"># Example: entry=$65,000, 10x leverage, maint_margin=0.5%</span><br>
liq_price = 65,000 * (1 - 0.10 + 0.005)<br>
liq_price = 65,000 * 0.905 = <span class="f-result">$58,825</span><br>
<br>
<span class="f-comment"># Short position liquidation price:</span><br>
liq_price = entry_price * (1 + (1 / leverage) - maintenance_margin_rate)<br>
liq_price = 65,000 * (1 + 0.10 - 0.005) = <span class="f-result">$71,175</span>
      </div>

      <div class="liq-calc">
        <h4 style="font-size:0.875rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.08em;">Liquidation Prices â€” BTC Long from $65,000 Entry</h4>
        <table class="liq-table">
          <thead>
            <tr>
              <th>Leverage</th>
              <th>Entry Price</th>
              <th>Liquidation Price</th>
              <th>Required Drop</th>
              <th>Risk Level</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="lev-col">2x</td>
              <td class="price-col">$65,000</td>
              <td class="price-col">$32,825</td>
              <td class="drop-col safe">-49.5%</td>
              <td><span class="rate-badge high">Low</span></td>
            </tr>
            <tr>
              <td class="lev-col">5x</td>
              <td class="price-col">$65,000</td>
              <td class="price-col">$52,325</td>
              <td class="drop-col safe">-19.5%</td>
              <td><span class="rate-badge neutral">Moderate</span></td>
            </tr>
            <tr>
              <td class="lev-col">10x</td>
              <td class="price-col">$65,000</td>
              <td class="price-col">$58,825</td>
              <td class="drop-col warn">-9.5%</td>
              <td><span class="rate-badge moderate">Elevated</span></td>
            </tr>
            <tr>
              <td class="lev-col">20x</td>
              <td class="price-col">$65,000</td>
              <td class="price-col">$61,913</td>
              <td class="drop-col danger">-4.7%</td>
              <td><span class="rate-badge extreme">High</span></td>
            </tr>
            <tr>
              <td class="lev-col">50x</td>
              <td class="price-col">$65,000</td>
              <td class="price-col">$63,765</td>
              <td class="drop-col danger">-1.9%</td>
              <td><span class="rate-badge extreme">Very High</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="prose">
        <h3>Isolated vs Cross Margin</h3>
        <p><strong>Isolated margin</strong> dedicates a fixed collateral amount to one position. If that position is liquidated, only that margin is lost â€” the rest of your account is untouched. This is the recommended mode for AI agents running multiple parallel positions. Each position is fully scoped and its worst-case loss is bounded.</p>
        <p><strong>Cross margin</strong> uses your entire account balance to back all positions. Individual positions are harder to liquidate (more collateral behind each), but a single catastrophic trade can cascade across your entire portfolio. Avoid cross margin for autonomous agents unless you have explicit account-level circuit breakers in place.</p>

        <h3>Auto-Deleveraging (ADL)</h3>
        <p>When a liquidated position cannot be fully absorbed by the exchange's insurance fund â€” rare, but possible during violent market dislocations â€” the exchange triggers ADL. It forcibly closes the most profitable open positions on the opposite side, ranked by profitability and leverage, until the deficit is covered. Profitable longs get partially closed without consent when shorts are mass-liquidated. Agents should monitor the ADL queue indicator exposed in the Purple Flea API and consider reducing highly profitable positions during extreme market stress.</p>

        <h3>Programmatic Liquidation Prevention</h3>
        <p>An AI agent has one major advantage over a human: it never sleeps and can react in milliseconds. Use these patterns:</p>
        <ul>
          <li>Poll <code>GET /trading/positions</code> every 10â€“30 seconds to monitor margin ratio</li>
          <li>Trigger <code>POST /trading/add-margin</code> automatically when margin ratio falls below a safety threshold (e.g., 30%)</li>
          <li>Programmatic stop-loss: close the position via <code>POST /trading/order</code> before liquidation triggers</li>
          <li>Never size a single position at more than 10â€“20% of total capital (Kelly criterion)</li>
          <li>Use lower leverage on volatile assets (SOL, smaller alts) versus BTC/ETH</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- MARKETS -->
<section id="markets">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Purple Flea Trading API</div>
      <h2 class="section-title">275+ perpetual markets.</h2>
      <p class="section-desc">Every major crypto asset plus 272 altcoins â€” all accessible through a single REST API backed by Hyperliquid's on-chain order book.</p>
    </div>
    <div class="reveal reveal-delay-1">
      <div class="markets-grid">
        <div class="market-chip">
          <div class="market-icon" style="background:rgba(247,147,26,0.12);">&#8383;</div>
          <div><div class="market-name">BTC-PERP</div><div class="market-sub">Bitcoin</div></div>
        </div>
        <div class="market-chip">
          <div class="market-icon" style="background:rgba(98,126,234,0.12);">&#9830;</div>
          <div><div class="market-name">ETH-PERP</div><div class="market-sub">Ethereum</div></div>
        </div>
        <div class="market-chip">
          <div class="market-icon" style="background:rgba(155,131,234,0.12);">&#9670;</div>
          <div><div class="market-name">SOL-PERP</div><div class="market-sub">Solana</div></div>
        </div>
        <div class="market-chip">
          <div class="market-icon" style="background:rgba(22,199,132,0.12);">&#9636;</div>
          <div><div class="market-name">BNB-PERP</div><div class="market-sub">BNB Chain</div></div>
        </div>
        <div class="market-chip">
          <div class="market-icon" style="background:rgba(0,208,255,0.12);">&#8857;</div>
          <div><div class="market-name">AVAX-PERP</div><div class="market-sub">Avalanche</div></div>
        </div>
        <div class="market-chip">
          <div class="market-icon" style="background:rgba(86,90,105,0.2);">&#9670;</div>
          <div><div class="market-name">ARB-PERP</div><div class="market-sub">Arbitrum</div></div>
        </div>
        <div class="market-chip">
          <div class="market-icon" style="background:rgba(255,4,32,0.1);">&#9632;</div>
          <div><div class="market-name">OP-PERP</div><div class="market-sub">Optimism</div></div>
        </div>
        <div class="market-chip">
          <div class="market-icon" style="background:rgba(168,85,247,0.12);">&#9830;</div>
          <div><div class="market-name">DOGE-PERP</div><div class="market-sub">Dogecoin</div></div>
        </div>
      </div>
      <div class="markets-more">
        <p>+ <strong>267 more</strong> perpetual markets: SUI, TIA, JUP, WIF, PEPE, INJ, SEI, STX, NEAR, FTM, ATOM, DOT, LINK, UNI, AAVE, and hundreds more altcoins. All markets at <a href="https://trading.purpleflea.com" target="_blank" style="color:var(--purple);">trading.purpleflea.com</a>.</p>
      </div>
    </div>

    <div class="reveal reveal-delay-2" style="max-width: 860px; margin-top: 48px;">
      <div class="code-block">
        <div class="code-header">
          <div class="code-dot red"></div>
          <div class="code-dot yellow"></div>
          <div class="code-dot green"></div>
          <span class="code-filename">list_markets.py</span>
        </div>
<span class="kw">import</span> requests

API_KEY = <span class="st">"pf_sk_..."</span>
BASE    = <span class="st">"https://api.purpleflea.com"</span>
HEADERS = {<span class="st">"Authorization"</span>: <span class="st">f"Bearer {API_KEY}"</span>}

<span class="cm"># Fetch all 275+ available perp markets</span>
markets = requests.<span class="fn">get</span>(<span class="st">f"{BASE}/trading/markets"</span>, headers=HEADERS).json()

<span class="kw">for</span> m <span class="kw">in</span> markets[<span class="st">"markets"</span>][:5]:
    print(<span class="st">f"{m['symbol']:15} mark={m['mark_price']:>12,.2f}  "
          f"funding={m['funding_rate']*100:+.4f}%  OI=${m['open_interest']:>12,.0f}"</span>)

<span class="cm"># Output:</span>
<span class="cm"># BTC-PERP        mark=    65,048.20  funding=+0.0100%  OI= 2,847,392,000</span>
<span class="cm"># ETH-PERP        mark=     3,412.55  funding=+0.0082%  OI=   934,218,000</span>
<span class="cm"># SOL-PERP        mark=       178.34  funding=+0.0143%  OI=   287,441,000</span>
<span class="cm"># BNB-PERP        mark=       603.20  funding=+0.0071%  OI=   102,875,000</span>
<span class="cm"># AVAX-PERP       mark=        39.87  funding=-0.0023%  OI=    51,220,000</span>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- FUNDING HISTORY -->
<section id="funding-history">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Historical Context</div>
      <h2 class="section-title">Funding rate history &amp; ranges.</h2>
      <p class="section-desc">Funding rates follow market sentiment cycles. Understanding the typical range tells you when an opportunity is normal, elevated, or extreme.</p>
    </div>
    <div class="reveal reveal-delay-1" style="max-width: 860px;">
      <div class="liq-calc">
        <h4 style="font-size:0.875rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.08em;margin-bottom:20px;">Illustrative Funding Rate Bars &mdash; BTC-PERP (30-day sample)</h4>
        <div class="funding-bars">
          <div class="f-bar pos" style="height:30%;" title="+0.003%"></div>
          <div class="f-bar pos" style="height:45%;" title="+0.007%"></div>
          <div class="f-bar pos" style="height:55%;" title="+0.009%"></div>
          <div class="f-bar pos" style="height:60%;" title="+0.010%"></div>
          <div class="f-bar pos" style="height:72%;" title="+0.012%"></div>
          <div class="f-bar pos" style="height:85%;" title="+0.014%"></div>
          <div class="f-bar pos" style="height:100%;" title="+0.017%"></div>
          <div class="f-bar pos" style="height:90%;" title="+0.015%"></div>
          <div class="f-bar pos" style="height:70%;" title="+0.012%"></div>
          <div class="f-bar pos" style="height:50%;" title="+0.008%"></div>
          <div class="f-bar pos" style="height:35%;" title="+0.006%"></div>
          <div class="f-bar pos" style="height:20%;" title="+0.003%"></div>
          <div class="f-bar neg" style="height:15%;" title="-0.002%"></div>
          <div class="f-bar neg" style="height:25%;" title="-0.004%"></div>
          <div class="f-bar neg" style="height:20%;" title="-0.003%"></div>
          <div class="f-bar pos" style="height:10%;" title="+0.001%"></div>
          <div class="f-bar pos" style="height:30%;" title="+0.005%"></div>
          <div class="f-bar pos" style="height:40%;" title="+0.007%"></div>
          <div class="f-bar pos" style="height:55%;" title="+0.009%"></div>
          <div class="f-bar pos" style="height:65%;" title="+0.011%"></div>
          <div class="f-bar pos" style="height:78%;" title="+0.013%"></div>
          <div class="f-bar pos" style="height:88%;" title="+0.015%"></div>
          <div class="f-bar pos" style="height:95%;" title="+0.016%"></div>
          <div class="f-bar pos" style="height:82%;" title="+0.014%"></div>
          <div class="f-bar pos" style="height:68%;" title="+0.011%"></div>
          <div class="f-bar pos" style="height:52%;" title="+0.009%"></div>
          <div class="f-bar pos" style="height:42%;" title="+0.007%"></div>
          <div class="f-bar pos" style="height:30%;" title="+0.005%"></div>
          <div class="f-bar neg" style="height:10%;" title="-0.002%"></div>
          <div class="f-bar pos" style="height:18%;" title="+0.003%"></div>
        </div>
        <div class="funding-bar-labels">
          <span>Day 1</span><span>Day 8</span><span>Day 15</span><span>Day 22</span><span>Day 30</span>
        </div>
      </div>

      <table class="funding-range-table" style="background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);">
        <thead>
          <tr>
            <th>Condition</th>
            <th>Rate / 8h</th>
            <th>Annualized</th>
            <th>What it signals</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Neutral market</td>
            <td><span class="rate-badge neutral">0.005% â€“ 0.01%</span></td>
            <td style="font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--text-secondary);">5.5% â€“ 11%</td>
            <td style="color:var(--text-secondary);font-size:13px;">Normal longs premium â€” balanced sentiment</td>
          </tr>
          <tr>
            <td>Moderate bull</td>
            <td><span class="rate-badge moderate">0.01% â€“ 0.03%</span></td>
            <td style="font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--text-secondary);">11% â€“ 33%</td>
            <td style="color:var(--text-secondary);font-size:13px;">Elevated but sustainable â€” decent funding harvest</td>
          </tr>
          <tr>
            <td>Strong bull run</td>
            <td><span class="rate-badge high">0.03% â€“ 0.075%</span></td>
            <td style="font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--text-secondary);">33% â€“ 82%</td>
            <td style="color:var(--text-secondary);font-size:13px;">Crowded longs â€” excellent funding harvest, high cascade risk</td>
          </tr>
          <tr>
            <td>Negative (bear)</td>
            <td><span class="rate-badge extreme">-0.075% â€“ -0.01%</span></td>
            <td style="font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--text-secondary);">-82% â€“ -11%</td>
            <td style="color:var(--text-secondary);font-size:13px;">Crowded shorts â€” longs collect funding, capitulation risk</td>
          </tr>
        </tbody>
      </table>

      <div class="prose" style="margin-top:24px;">
        <p>Historically, BTC-PERP has averaged approximately <strong>+0.01% per interval</strong> over long periods â€” reflecting the inherent demand for leveraged long exposure in a generally appreciating asset. Extreme rates above 0.05% per interval are a contrarian warning signal: markets are extremely crowded, and a sudden reversal will trigger cascading liquidations.</p>
        <p>Altcoin funding rates are more volatile and can swing between +0.075% and -0.075% within a single day during narrative-driven rallies. AI agents monitoring funding rate extremes across 275 markets have an informational advantage: a sudden spike to +0.075% in a mid-cap alt suggests imminent mean reversion.</p>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- STRATEGIES -->
<section id="strategies">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Agent Strategies</div>
      <h2 class="section-title">Strategies for AI agents.</h2>
      <p class="section-desc">Three systematic approaches well-suited to always-on agents trading perpetual futures. No intuition required â€” just signals, rules, and execution.</p>
    </div>
    <div class="grid-3 reveal reveal-delay-1">

      <div class="strategy-card">
        <div class="strategy-number">Strategy 01</div>
        <h3>Trend Following</h3>
        <p>Go long in uptrends, short in downtrends. Perps are ideal for trend strategies because there are no borrowing costs or expiry constraints â€” you hold the position as long as the trend persists.</p>
        <ul>
          <li>Use EMA crossovers (e.g., 20/50) or momentum signals as entry triggers</li>
          <li>Size position proportionally to trend strength (ATR-based sizing)</li>
          <li>Exit on trend reversal or when funding becomes excessively negative to your direction</li>
          <li>Apply 3xâ€“5x leverage for meaningful returns with survivable drawdowns</li>
        </ul>
        <div class="strategy-signal">
          <span class="signal-tag entry">Entry: EMA crossover up</span>
          <span class="signal-tag exit">Exit: EMA crossover down</span>
          <span class="signal-tag neutral">Filter: OI confirmation</span>
        </div>
      </div>

      <div class="strategy-card">
        <div class="strategy-number">Strategy 02</div>
        <h3>Mean Reversion</h3>
        <p>When an asset deviates far from its mean â€” measured by funding rate extremes, OI spikes, or Bollinger Band excursions â€” bet on reversion. Perps allow both directions with equal ease.</p>
        <ul>
          <li>Monitor funding rate extremes (&gt;0.05% / interval) as a reversal signal</li>
          <li>Enter a contrarian position when the rate hits max cap (0.075%)</li>
          <li>Use tight stop-losses â€” mean reversion can be a falling knife</li>
          <li>Combine with RSI overbought/oversold (e.g., RSI &gt; 80 / &lt; 20 on 4h)</li>
        </ul>
        <div class="strategy-signal">
          <span class="signal-tag entry">Entry: Funding extreme</span>
          <span class="signal-tag entry">Entry: RSI divergence</span>
          <span class="signal-tag exit">Exit: Rate normalizes</span>
        </div>
      </div>

      <div class="strategy-card">
        <div class="strategy-number">Strategy 03</div>
        <h3>Funding Rate Harvesting</h3>
        <p>The most agent-friendly strategy: earn the funding rate with zero directional exposure. Hold equal notional long (spot or spot-equivalent) and short (perp) positions. Collect the rate every 8 hours. No price prediction required.</p>
        <ul>
          <li>Identify markets with persistently positive funding (&gt;0.01%/interval)</li>
          <li>Open a delta-neutral position: long spot + short equal notional perp</li>
          <li>Rebalance periodically to maintain delta neutrality as prices move</li>
          <li>Unwind when funding drops below your break-even cost</li>
        </ul>
        <div class="strategy-signal">
          <span class="signal-tag entry">Entry: Rate &gt; 0.015%</span>
          <span class="signal-tag exit">Exit: Rate &lt; 0.005%</span>
          <span class="signal-tag neutral">Direction: None needed</span>
        </div>
      </div>

    </div>

    <div class="reveal reveal-delay-2" style="max-width: 860px; margin-top: 48px;">
      <div class="code-block">
        <div class="code-header">
          <div class="code-dot red"></div>
          <div class="code-dot yellow"></div>
          <div class="code-dot green"></div>
          <span class="code-filename">funding_harvester.py</span>
        </div>
<span class="kw">import</span> requests, time

API_KEY = <span class="st">"pf_sk_..."</span>
BASE    = <span class="st">"https://api.purpleflea.com"</span>
HEADERS = {<span class="st">"Authorization"</span>: <span class="st">f"Bearer {API_KEY}"</span>}

ENTRY_THRESHOLD = <span class="num">0.00015</span>   <span class="cm"># enter if funding_rate >= 0.015% per 8h</span>
EXIT_THRESHOLD  = <span class="num">0.00005</span>   <span class="cm"># exit if funding_rate <= 0.005% per 8h</span>
SIZE_USD        = <span class="num">10000</span>     <span class="cm"># $10k notional per leg</span>

<span class="kw">def</span> <span class="fn">get_funding</span>(symbol):
    r = requests.<span class="fn">get</span>(<span class="st">f"{BASE}/trading/price"</span>,
                    params={<span class="st">"market"</span>: symbol}, headers=HEADERS)
    <span class="kw">return</span> r.json()[<span class="st">"funding_rate"</span>]

<span class="kw">def</span> <span class="fn">open_delta_neutral_short</span>(symbol):
    <span class="cm"># Open short perp (collect funding when positive)</span>
    <span class="kw">return</span> requests.<span class="fn">post</span>(<span class="st">f"{BASE}/trading/order"</span>, json={
        <span class="st">"market"</span>: symbol,
        <span class="st">"side"</span>: <span class="st">"short"</span>,
        <span class="st">"size_usd"</span>: SIZE_USD,
        <span class="st">"leverage"</span>: <span class="num">1</span>,               <span class="cm"># 1x â€” no amplification needed</span>
        <span class="st">"margin_mode"</span>: <span class="st">"isolated"</span>
    }, headers=HEADERS).json()

<span class="cm"># Scan all markets every hour for opportunities</span>
<span class="kw">while</span> <span class="kw">True</span>:
    markets = requests.<span class="fn">get</span>(<span class="st">f"{BASE}/trading/markets"</span>, headers=HEADERS).json()
    <span class="kw">for</span> m <span class="kw">in</span> markets[<span class="st">"markets"</span>]:
        rate = m[<span class="st">"funding_rate"</span>]
        <span class="kw">if</span> rate >= ENTRY_THRESHOLD:
            print(<span class="st">f"Harvesting {m['symbol']} at {rate*100:.4f}% / 8h"</span>)
            <span class="fn">open_delta_neutral_short</span>(m[<span class="st">"symbol"</span>])
    time.<span class="fn">sleep</span>(<span class="num">3600</span>)
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- RISK WARNINGS -->
<section id="risk-warnings">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Risk</div>
      <h2 class="section-title">Risk warnings.</h2>
      <p class="section-desc">Perpetual futures with leverage are among the most efficient instruments for destroying capital. Read this section before building any agent that opens real positions.</p>
    </div>
    <div class="risk-grid reveal reveal-delay-1">
      <div class="risk-card danger">
        <h3>Leverage Amplifies Losses Symmetrically</h3>
        <p>The same multiplier that turns a 1% gain into a 10% return also turns a 1% loss into a 10% drawdown. At 10x leverage, a 10% adverse move wipes your entire margin. Crypto assets routinely move 5â€“15% in a single day. High leverage on volatile assets is not risk management â€” it is a countdown timer.</p>
      </div>
      <div class="risk-card danger">
        <h3>Liquidation is Irreversible</h3>
        <p>Once your margin ratio hits the maintenance threshold, the exchange liquidates your position without asking. There is no "wait and see." The position is gone, and the margin is consumed. An agent that does not actively monitor its margin ratio will eventually be liquidated â€” not if, but when.</p>
      </div>
      <div class="risk-card caution">
        <h3>Funding Drains Positions Silently</h3>
        <p>A position held for weeks in a persistent positive-funding environment pays funding every 8 hours. At 0.03% per interval (moderate bull), a $50,000 long pays $15 per interval â€” $45/day, $16,425/year. The position can be losing money even when the asset price is flat. Always account for funding cost in any strategy's expected return.</p>
      </div>
      <div class="risk-card caution">
        <h3>Cascading Liquidations &amp; Slippage</h3>
        <p>During extreme volatility, many leveraged positions get liquidated simultaneously. The exchange sells them all at market, driving price further down, triggering more liquidations. This cascade can move price 10â€“20% in minutes. Agents that rely on stop-losses during a cascade may get filled far from their target price. Size conservatively and maintain a cash buffer.</p>
      </div>
      <div class="risk-card danger">
        <h3>Infinite Loss Potential on Shorts</h3>
        <p>A long position can lose at most 100% of margin â€” the asset cannot go below zero. A short position, in theory, has unlimited loss: if an asset 10x's from your entry, a 10x short with 10x leverage would owe 100x your margin (though liquidation triggers long before that). Short squeezes in small-cap alts can be violent and swift.</p>
      </div>
      <div class="risk-card caution">
        <h3>Agent Bugs Have Real Consequences</h3>
        <p>A trading agent with a logic bug â€” an off-by-one in position size, a missed edge case in the funding rate comparison, a crash that leaves a position open â€” can lose real money in seconds. Always start with paper trading or tiny real positions. Build explicit circuit breakers: maximum position size, maximum daily loss, automated kill switch.</p>
      </div>
    </div>
    <div class="warn-box reveal reveal-delay-2" style="max-width:860px;margin-top:32px;">
      <p><strong>Regulatory notice:</strong> Perpetual futures trading may be restricted or illegal in your jurisdiction. Purple Flea does not provide financial advice. This guide is educational only. Never risk capital you cannot afford to lose entirely.</p>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- GETTING STARTED -->
<section id="getting-started">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Getting Started</div>
      <h2 class="section-title">Register for the Trading API.</h2>
      <p class="section-desc">Your agent can be trading 275 perp markets in under 10 minutes. No KYC. No withdrawal limits. Instant on-chain settlement via Hyperliquid.</p>
    </div>
    <div class="reveal reveal-delay-1" style="max-width: 700px;">
      <div class="steps">
        <div class="step">
          <div class="step-num">1</div>
          <div class="step-content">
            <h3>Create a wallet</h3>
            <p>Register at <a href="https://wallet.purpleflea.com" target="_blank">wallet.purpleflea.com</a> to create your agent's on-chain wallet. Funds are self-custodied â€” Purple Flea never holds your assets. Deposit USDC on Arbitrum to fund your trading account.</p>
          </div>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <div class="step-content">
            <h3>Generate a Trading API key</h3>
            <p>From your wallet dashboard, navigate to API Keys and create a new Trading API key. The key format is <code>pf_sk_...</code>. Scope it to trading only â€” no withdrawal permissions needed for most agent use cases.</p>
          </div>
        </div>
        <div class="step">
          <div class="step-num">3</div>
          <div class="step-content">
            <h3>Read the API documentation</h3>
            <p>Full endpoint reference at <a href="/trading-api/">purpleflea.com/trading-api</a>. Key endpoints: <code>GET /trading/markets</code> (list all 275+ perps), <code>GET /trading/price</code> (mark price + funding rate), <code>POST /trading/order</code> (open/close positions), <code>GET /trading/positions</code> (current open positions + margin ratios).</p>
          </div>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <div class="step-content">
            <h3>Start small and iterate</h3>
            <p>Begin with 1xâ€“2x leverage and small position sizes (under 5% of capital per trade). Test your strategy logic with live data but minimal capital. Add automated circuit breakers before increasing size. Only scale up after confirming your agent handles edge cases: failed orders, network timeouts, unexpected funding rate changes.</p>
          </div>
        </div>
        <div class="step">
          <div class="step-num">5</div>
          <div class="step-content">
            <h3>Deploy and monitor</h3>
            <p>Run your agent on a cloud server or serverless function with an uptime monitor. Log all trades, funding payments, and margin ratio snapshots. Set up alerting on drawdown thresholds. The agent that survives long enough to compound is the agent that wins.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- RELATED -->
<section>
  <div class="container">
    <div class="reveal">
      <div class="section-label">Keep Learning</div>
      <h2 class="section-title">Related guides.</h2>
    </div>
    <div class="related-grid reveal reveal-delay-1">
      <a href="/trading-api/" class="related-card">
        <div class="label">API Reference</div>
        <div class="title">Trading API Docs</div>
        <div class="desc">Full endpoint reference for all 275 perp markets</div>
      </a>
      <a href="/funding-rate-arbitrage/" class="related-card">
        <div class="label">Strategy</div>
        <div class="title">Funding Rate Arbitrage</div>
        <div class="desc">Earn yield with delta-neutral perp strategies</div>
      </a>
      <a href="/ai-trading-bot/" class="related-card">
        <div class="label">Tutorial</div>
        <div class="title">Build an AI Trading Bot</div>
        <div class="desc">End-to-end guide: agent setup, strategy, deployment</div>
      </a>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta-section">
  <div class="container">
    <div class="cta-box reveal">
      <h2>Ready to trade perps<br>with your <span style="color:var(--purple);">AI agent?</span></h2>
      <p>275+ markets. No KYC. Instant on-chain settlement. Free to start.</p>
      <div class="hero-actions">
        <a href="https://wallet.purpleflea.com" class="btn-primary" target="_blank">Register your agent &rarr;</a>
        <a href="/trading-api/" class="btn-secondary">Read the API docs</a>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<footer>
  <div class="container">
    <div class="footer-top">
      <div class="footer-brand">
        <a href="/" class="nav-logo">
          <div class="nav-logo-icon">&#9830;</div>
          Purple Flea
        </a>
        <p>AI-first infrastructure for autonomous agents. Built for machines, verified by math.</p>
      </div>
      <div class="footer-columns">
        <div class="footer-col">
          <h4>Products</h4>
          <ul>
            <li><a href="https://casino.purpleflea.com" target="_blank">Casino</a></li>
            <li><a href="https://trading.purpleflea.com" target="_blank">Trading</a></li>
            <li><a href="https://wallet.purpleflea.com" target="_blank">Wallet</a></li>
            <li><a href="https://domains.purpleflea.com" target="_blank">Domains</a></li>
            <li><a href="/crypto-wallet-api/">Wallet API Docs</a></li>
            <li><a href="/trading-api/">Trading API Docs</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Developers</h4>
          <ul>
            <li><a href="/docs">Docs</a></li>
            <li><a href="/for-agents">For Agents</a></li>
            <li><a href="/for-langchain/">LangChain</a></li>
            <li><a href="/for-crewai/">CrewAI</a></li>
            <li><a href="/for-claude/">Claude / MCP</a></li>
            <li><a href="/quick-start">Quick Start</a></li>
            <li><a href="/openapi">OpenAPI</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Company</h4>
          <ul>
            <li><a href="/pricing">Pricing</a></li>
            <li><a href="/stats">Stats</a></li>
            <li><a href="/changelog">Changelog</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li><a href="mailto:hello@purpleflea.com">Contact</a></li>
            <li><a href="https://github.com/Purple-flea" target="_blank">GitHub</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2026 Purple Flea. All rights reserved.</p>
      <div class="footer-social">
        <a href="https://github.com/Purple-flea" target="_blank">GitHub</a>
        <a href="https://x.com/purpleflea" target="_blank">X / Twitter</a>
      </div>
    </div>
  </div>
</footer>

<script>
// Nav scroll effect
const navbar = document.getElementById('navbar');
window.addEventListener('scroll', () => {
  navbar.classList.toggle('scrolled', window.scrollY > 50);
});

// Reveal on scroll
const revealEls = document.querySelectorAll('.reveal');
const revealObs = new IntersectionObserver((entries) => {
  entries.forEach(e => {
    if (e.isIntersecting) { e.target.classList.add('visible'); revealObs.unobserve(e.target); }
  });
}, { threshold: 0.08, rootMargin: '0px 0px -40px 0px' });
revealEls.forEach(el => revealObs.observe(el));

// TOC active state
const tocLinks = document.querySelectorAll('.toc-link');
const sections = document.querySelectorAll('section[id]');
const tocObs = new IntersectionObserver((entries) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      tocLinks.forEach(l => l.classList.remove('active'));
      const active = document.querySelector(`.toc-link[data-section="${e.target.id}"]`);
      if (active) {
        active.classList.add('active');
        active.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
      }
    }
  });
}, { rootMargin: '-20% 0px -70% 0px' });
sections.forEach(s => tocObs.observe(s));
</script>
</body>
</html>
