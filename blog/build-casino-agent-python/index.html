<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Build a Casino Agent in Python in 10 Minutes | Purple Flea</title>
  <meta name="description" content="A complete walkthrough: register, fund, play, and withdraw — all via the Purple Flea Casino API in Python." />
  <meta name="author" content="Purple Flea Team" />
  <meta property="og:title" content="Build a Casino Agent in Python in 10 Minutes" />
  <meta property="og:description" content="A complete walkthrough: register, fund, play, and withdraw — all via API." />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://purpleflea.com/blog/build-casino-agent-python" />
  <meta property="article:published_time" content="2026-02-27T00:00:00Z" />
  <meta property="article:author" content="Purple Flea Team" />
  <link rel="canonical" href="https://purpleflea.com/blog/build-casino-agent-python" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Build a Casino Agent in Python in 10 Minutes",
    "description": "A complete walkthrough: register, fund, play, and withdraw — all via the Purple Flea Casino API in Python.",
    "author": {
      "@type": "Organization",
      "name": "Purple Flea Team",
      "url": "https://purpleflea.com"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Purple Flea",
      "url": "https://purpleflea.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://purpleflea.com/logo.png"
      }
    },
    "datePublished": "2026-02-27T00:00:00Z",
    "dateModified": "2026-02-27T00:00:00Z",
    "url": "https://purpleflea.com/blog/build-casino-agent-python",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://purpleflea.com/blog/build-casino-agent-python"
    },
    "articleSection": "Tutorial",
    "keywords": ["Python", "casino agent", "API", "crypto", "Kelly criterion", "autonomous agent", "betting bot"]
  }
  </script>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --purple: #A855F7;
      --purple-dim: #7C3AED;
      --bg: #09090B;
      --text: #FAFAFA;
      --text-secondary: #A1A1AA;
      --text-muted: #71717A;
      --border: rgba(255,255,255,0.06);
      --bg-card: rgba(255,255,255,0.03);
      --radius: 16px;
      --radius-sm: 10px;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.7;
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* ─── NAV ─────────────────────────────────────────────── */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      height: 60px;
      display: flex;
      align-items: center;
      padding: 0 24px;
      background: rgba(9,9,11,0.85);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border-bottom: 1px solid var(--border);
    }

    .nav-inner {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .nav-logo {
      font-size: 18px;
      font-weight: 700;
      color: var(--text);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-logo-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--purple);
      box-shadow: 0 0 8px var(--purple);
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 28px;
      list-style: none;
    }

    .nav-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      transition: color 0.2s;
    }

    .nav-links a:hover { color: var(--text); }

    .nav-cta {
      background: var(--purple);
      color: #fff !important;
      padding: 7px 16px;
      border-radius: 8px;
      font-weight: 600 !important;
      transition: background 0.2s !important;
    }

    .nav-cta:hover { background: var(--purple-dim) !important; }

    /* ─── ARTICLE HEADER ─────────────────────────────────── */
    .article-header {
      padding: 120px 24px 60px;
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(168,85,247,0.12);
      border: 1px solid rgba(168,85,247,0.3);
      color: var(--purple);
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.1em;
      padding: 4px 12px;
      border-radius: 100px;
      margin-bottom: 24px;
    }

    .badge::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--purple);
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(0.85); }
    }

    h1 {
      font-size: clamp(28px, 5vw, 48px);
      font-weight: 700;
      line-height: 1.18;
      letter-spacing: -0.03em;
      margin-bottom: 18px;
      background: linear-gradient(135deg, #fff 0%, #c4b5fd 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .article-subtitle {
      font-size: 18px;
      color: var(--text-secondary);
      max-width: 600px;
      margin: 0 auto 28px;
      line-height: 1.6;
    }

    .article-meta {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      font-size: 13px;
      color: var(--text-muted);
      flex-wrap: wrap;
    }

    .meta-sep { opacity: 0.4; }

    .meta-author {
      color: var(--purple);
      font-weight: 600;
    }

    .header-divider {
      width: 60px;
      height: 3px;
      background: linear-gradient(90deg, var(--purple), transparent);
      border-radius: 2px;
      margin: 40px auto 0;
    }

    /* ─── LAYOUT ─────────────────────────────────────────── */
    .page-layout {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px 80px;
      display: grid;
      grid-template-columns: 1fr 260px;
      gap: 56px;
      align-items: start;
    }

    /* ─── SIDEBAR / TOC ──────────────────────────────────── */
    .toc-sidebar {
      position: sticky;
      top: 80px;
      padding: 24px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
    }

    .toc-title {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      text-transform: uppercase;
      margin-bottom: 16px;
    }

    .toc-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .toc-list a {
      display: block;
      font-size: 13px;
      color: var(--text-secondary);
      text-decoration: none;
      padding: 5px 10px;
      border-radius: 6px;
      border-left: 2px solid transparent;
      transition: all 0.2s;
      line-height: 1.4;
    }

    .toc-list a:hover {
      color: var(--text);
      background: rgba(168,85,247,0.08);
      border-left-color: var(--purple);
    }

    .toc-list a.active {
      color: var(--purple);
      background: rgba(168,85,247,0.08);
      border-left-color: var(--purple);
    }

    /* ─── ARTICLE BODY ───────────────────────────────────── */
    .article-body {
      min-width: 0;
    }

    .article-body section {
      margin-bottom: 56px;
    }

    .article-body h2 {
      font-size: 26px;
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 16px;
      padding-top: 8px;
      color: var(--text);
    }

    .article-body h3 {
      font-size: 18px;
      font-weight: 600;
      margin: 28px 0 12px;
      color: var(--text);
    }

    .article-body p {
      color: var(--text-secondary);
      margin-bottom: 16px;
      line-height: 1.75;
    }

    .article-body p:last-child { margin-bottom: 0; }

    .article-body ul,
    .article-body ol {
      padding-left: 20px;
      margin-bottom: 16px;
      color: var(--text-secondary);
    }

    .article-body li {
      margin-bottom: 8px;
      line-height: 1.65;
    }

    .article-body strong {
      color: var(--text);
      font-weight: 600;
    }

    .article-body a {
      color: var(--purple);
      text-decoration: none;
      border-bottom: 1px solid rgba(168,85,247,0.3);
      transition: border-color 0.2s;
    }

    .article-body a:hover {
      border-bottom-color: var(--purple);
    }

    /* ─── CODE BLOCKS ────────────────────────────────────── */
    .code-block {
      margin: 24px 0;
      border-radius: var(--radius-sm);
      overflow: hidden;
      border: 1px solid var(--border);
      background: #0d0d0f;
    }

    .code-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 16px;
      background: rgba(255,255,255,0.03);
      border-bottom: 1px solid var(--border);
    }

    .code-lang {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      font-weight: 600;
      color: var(--purple);
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .copy-btn {
      background: none;
      border: 1px solid var(--border);
      color: var(--text-muted);
      font-size: 11px;
      font-family: 'Inter', sans-serif;
      font-weight: 500;
      padding: 3px 10px;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .copy-btn:hover {
      color: var(--text);
      border-color: rgba(255,255,255,0.15);
    }

    .copy-btn.copied {
      color: #4ade80;
      border-color: rgba(74,222,128,0.3);
    }

    pre {
      padding: 20px 20px;
      overflow-x: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13.5px;
      line-height: 1.7;
      color: #e2e8f0;
    }

    code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
    }

    p code, li code {
      background: rgba(168,85,247,0.1);
      border: 1px solid rgba(168,85,247,0.2);
      color: #c4b5fd;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 12.5px;
    }

    /* Syntax highlighting tokens */
    .t-kw  { color: #c084fc; }   /* keyword */
    .t-fn  { color: #60a5fa; }   /* function */
    .t-str { color: #86efac; }   /* string */
    .t-num { color: #fb923c; }   /* number */
    .t-cm  { color: #6b7280; font-style: italic; }  /* comment */
    .t-op  { color: #f472b6; }   /* operator/punc */
    .t-var { color: #e2e8f0; }   /* variable */
    .t-cls { color: #fde047; }   /* class name */
    .t-dec { color: #34d399; }   /* decorator */

    /* ─── CALLOUT / INFO BOX ─────────────────────────────── */
    .callout {
      display: flex;
      gap: 14px;
      padding: 16px 18px;
      border-radius: var(--radius-sm);
      margin: 20px 0;
      border: 1px solid;
    }

    .callout-info {
      background: rgba(59,130,246,0.07);
      border-color: rgba(59,130,246,0.2);
    }

    .callout-warning {
      background: rgba(251,191,36,0.07);
      border-color: rgba(251,191,36,0.2);
    }

    .callout-tip {
      background: rgba(168,85,247,0.07);
      border-color: rgba(168,85,247,0.2);
    }

    .callout-icon {
      font-size: 16px;
      flex-shrink: 0;
      margin-top: 1px;
    }

    .callout-body {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .callout-body strong {
      display: block;
      margin-bottom: 4px;
      color: var(--text);
    }

    /* ─── STEP HEADER ────────────────────────────────────── */
    .step-header {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 20px;
    }

    .step-num {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: rgba(168,85,247,0.15);
      border: 1px solid rgba(168,85,247,0.35);
      color: var(--purple);
      font-size: 14px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .step-header h2 {
      margin: 0;
      padding: 0;
    }

    /* ─── PREREQ TABLE ───────────────────────────────────── */
    .prereq-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 14px;
      margin: 20px 0;
    }

    .prereq-card {
      padding: 16px 18px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
    }

    .prereq-card-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 4px;
    }

    .prereq-card-desc {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* ─── API REFERENCE PILL ─────────────────────────────── */
    .api-endpoint {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 16px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      margin: 16px 0;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      overflow-x: auto;
    }

    .method {
      font-size: 11px;
      font-weight: 700;
      padding: 3px 8px;
      border-radius: 5px;
      flex-shrink: 0;
    }

    .method-post {
      background: rgba(168,85,247,0.15);
      color: #c084fc;
    }

    .method-get {
      background: rgba(52,211,153,0.15);
      color: #34d399;
    }

    .endpoint-url {
      color: var(--text-secondary);
      word-break: break-all;
    }

    /* ─── FORMULA BOX ────────────────────────────────────── */
    .formula-box {
      text-align: center;
      padding: 24px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      margin: 20px 0;
    }

    .formula {
      font-family: 'JetBrains Mono', monospace;
      font-size: 20px;
      color: var(--purple);
      margin-bottom: 10px;
    }

    .formula-caption {
      font-size: 13px;
      color: var(--text-muted);
    }

    /* ─── FINAL CODE SECTION ─────────────────────────────── */
    .final-code-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      background: linear-gradient(135deg, rgba(168,85,247,0.12), rgba(124,58,237,0.06));
      border-bottom: 1px solid rgba(168,85,247,0.2);
    }

    .final-code-badge {
      background: var(--purple);
      color: #fff;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 0.08em;
      padding: 3px 9px;
      border-radius: 4px;
    }

    .final-code-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
    }

    .final-code-lines {
      font-size: 12px;
      color: var(--text-muted);
      margin-left: auto;
    }

    /* ─── WHATS NEXT ─────────────────────────────────────── */
    .next-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 14px;
      margin-top: 20px;
    }

    .next-card {
      padding: 20px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      transition: border-color 0.2s, background 0.2s;
      text-decoration: none;
      display: block;
    }

    .next-card:hover {
      border-color: rgba(168,85,247,0.3);
      background: rgba(168,85,247,0.05);
    }

    .next-card-icon {
      font-size: 22px;
      margin-bottom: 10px;
    }

    .next-card-title {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 6px;
    }

    .next-card-desc {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    /* ─── RELATED ARTICLES ───────────────────────────────── */
    .related-section {
      border-top: 1px solid var(--border);
      padding-top: 48px;
      margin-top: 64px;
    }

    .related-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 24px;
      color: var(--text);
    }

    .related-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
    }

    .related-card {
      padding: 22px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      text-decoration: none;
      display: block;
      transition: border-color 0.2s, transform 0.2s;
    }

    .related-card:hover {
      border-color: rgba(168,85,247,0.3);
      transform: translateY(-2px);
    }

    .related-card-tag {
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 0.1em;
      color: var(--purple);
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    .related-card-title {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
      line-height: 1.4;
      margin-bottom: 8px;
    }

    .related-card-desc {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .related-card-meta {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 12px;
    }

    /* ─── FOOTER ─────────────────────────────────────────── */
    footer {
      border-top: 1px solid var(--border);
      padding: 32px 24px;
      text-align: center;
      font-size: 13px;
      color: var(--text-muted);
    }

    footer a {
      color: var(--text-muted);
      text-decoration: none;
      transition: color 0.2s;
    }

    footer a:hover { color: var(--text); }

    /* ─── RESPONSIVE ─────────────────────────────────────── */
    @media (max-width: 900px) {
      .page-layout {
        grid-template-columns: 1fr;
      }
      .toc-sidebar {
        display: none;
      }
    }

    @media (max-width: 600px) {
      nav { padding: 0 16px; }
      .nav-links { display: none; }
      .article-header { padding: 90px 16px 48px; }
      .page-layout { padding: 0 16px 60px; }
      pre { font-size: 12px; padding: 16px; }
    }
  </style>
</head>
<body>

<!-- ─── NAV ──────────────────────────────────────────────── -->
<nav>
  <div class="nav-inner">
    <a href="https://purpleflea.com" class="nav-logo">
      <span class="nav-logo-dot"></span>
      Purple Flea
    </a>
    <ul class="nav-links">
      <li><a href="https://purpleflea.com/blog">Blog</a></li>
      <li><a href="https://purpleflea.com/docs">Docs</a></li>
      <li><a href="https://casino.purpleflea.com" class="nav-cta">Play Now</a></li>
    </ul>
  </div>
</nav>

<!-- ─── ARTICLE HEADER ────────────────────────────────────── -->
<header class="article-header">
  <div class="badge">TUTORIAL</div>
  <h1>Build a Casino Agent in Python in 10 Minutes</h1>
  <p class="article-subtitle">A complete walkthrough: register, fund, play, and withdraw &mdash; all via API</p>
  <div class="article-meta">
    <span class="meta-author">Purple Flea Team</span>
    <span class="meta-sep">&middot;</span>
    <span>Feb 27, 2026</span>
    <span class="meta-sep">&middot;</span>
    <span>8 min read</span>
  </div>
  <div class="header-divider"></div>
</header>

<!-- ─── BODY ──────────────────────────────────────────────── -->
<div class="page-layout">

  <!-- ─── ARTICLE CONTENT ─────────────────────────────────── -->
  <article class="article-body">

    <!-- INTRODUCTION -->
    <section id="intro">
      <h2>Why Build a Casino Agent?</h2>
      <p>
        Autonomous agents that control their own money are one of the most compelling demonstrations of
        programmable finance. A casino agent is the simplest possible proof of concept: it has a goal
        (maximize balance), a strategy (Kelly Criterion sizing), a feedback loop (win/loss results), and
        real skin in the game (actual USDC on the line).
      </p>
      <p>
        Beyond the entertainment angle, building this agent teaches you patterns you will reuse everywhere:
        API key authentication, retry logic, state management, and stop-loss guards. The same skeleton
        powers trading bots, arbitrage scrapers, and LangChain tool-use agents.
      </p>
      <p>
        Purple Flea's Casino API is purpose-built for agents. Every response is structured JSON, errors
        return consistent status codes, and the rate limits are generous enough that a simple polling loop
        works without backoff from the start. Let's build it.
      </p>

      <div class="callout callout-warning">
        <span class="callout-icon">&#9888;&#65039;</span>
        <div class="callout-body">
          <strong>Responsible gambling notice</strong>
          This tutorial is for educational and development purposes. Only fund your agent with money you
          are fully prepared to lose. Set stop-loss limits before running any game loop.
        </div>
      </div>
    </section>

    <!-- PREREQUISITES -->
    <section id="prereqs">
      <h2>Prerequisites</h2>
      <p>You need very little to get started. Here is the complete list:</p>

      <div class="prereq-grid">
        <div class="prereq-card">
          <div class="prereq-card-title">Python 3.8+</div>
          <div class="prereq-card-desc">Any modern Python version works. Check with <code>python --version</code>.</div>
        </div>
        <div class="prereq-card">
          <div class="prereq-card-title">requests library</div>
          <div class="prereq-card-desc">Install with <code>pip install requests</code>. No other deps required.</div>
        </div>
        <div class="prereq-card">
          <div class="prereq-card-title">~$5 USDC</div>
          <div class="prereq-card-desc">Enough to run several hundred bets at minimum stake and observe the bot in action.</div>
        </div>
        <div class="prereq-card">
          <div class="prereq-card-title">A text editor</div>
          <div class="prereq-card-desc">VS Code, Vim, whatever you like. We will write one Python file.</div>
        </div>
      </div>

      <div class="callout callout-info">
        <span class="callout-icon">&#8505;&#65039;</span>
        <div class="callout-body">
          <strong>No account needed upfront</strong>
          The registration endpoint creates your account programmatically and returns an API key in the
          response. There is no web form to fill in first.
        </div>
      </div>
    </section>

    <!-- STEP 1 -->
    <section id="step-1">
      <div class="step-header">
        <div class="step-num">1</div>
        <h2>Register Your Agent</h2>
      </div>

      <p>
        The first call creates a new agent account and returns your permanent <code>api_key</code> and
        <code>agent_id</code>. Store both values safely &mdash; the API key is shown only once.
      </p>

      <div class="api-endpoint">
        <span class="method method-post">POST</span>
        <span class="endpoint-url">https://casino.purpleflea.com/api/v1/auth/register</span>
      </div>

      <p>Let's test it with curl first to confirm the endpoint is reachable:</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">bash</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code><span class="t-cm"># Register a new agent account</span>
curl -s -X POST https://casino.purpleflea.com/api/v1/auth/register \
  -H <span class="t-str">"Content-Type: application/json"</span> \
  -d <span class="t-str">'{"username": "my_agent_01", "email": "agent@example.com"}'</span> | python -m json.tool</code></pre>
      </div>

      <p>A successful response looks like this:</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">json</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code>{
  <span class="t-str">"api_key"</span>: <span class="t-str">"pf_live_sk_a3f9b2c1d4e5..."</span>,
  <span class="t-str">"agent_id"</span>: <span class="t-str">"agt_7x9k2m"</span>,
  <span class="t-str">"username"</span>: <span class="t-str">"my_agent_01"</span>,
  <span class="t-str">"balance"</span>: <span class="t-num">0.0</span>,
  <span class="t-str">"created_at"</span>: <span class="t-str">"2026-02-27T10:00:00Z"</span>
}</code></pre>
      </div>

      <p>Now replicate this in Python with a reusable helper class:</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code><span class="t-cm"># casino_agent.py</span>
<span class="t-kw">import</span> requests
<span class="t-kw">import</span> json
<span class="t-kw">import</span> os

BASE_URL <span class="t-op">=</span> <span class="t-str">"https://casino.purpleflea.com/api/v1"</span>

<span class="t-kw">class</span> <span class="t-cls">CasinoAgent</span>:
    <span class="t-kw">def</span> <span class="t-fn">__init__</span>(self, api_key<span class="t-op">=</span><span class="t-kw">None</span>):
        self.api_key <span class="t-op">=</span> api_key
        self.session <span class="t-op">=</span> requests.<span class="t-fn">Session</span>()
        <span class="t-kw">if</span> api_key:
            self.session.headers[<span class="t-str">"Authorization"</span>] <span class="t-op">=</span> <span class="t-str">f"Bearer </span>{api_key}<span class="t-str">"</span>

    <span class="t-kw">def</span> <span class="t-fn">register</span>(self, username, email):
        <span class="t-str">"""Create a new agent account. Returns api_key and agent_id."""</span>
        resp <span class="t-op">=</span> self.session.<span class="t-fn">post</span>(
            <span class="t-str">f"</span>{BASE_URL}<span class="t-str">/auth/register"</span>,
            json<span class="t-op">=</span>{<span class="t-str">"username"</span>: username, <span class="t-str">"email"</span>: email},
        )
        resp.<span class="t-fn">raise_for_status</span>()
        data <span class="t-op">=</span> resp.<span class="t-fn">json</span>()
        <span class="t-cm"># Persist the key for future sessions</span>
        self.api_key <span class="t-op">=</span> data[<span class="t-str">"api_key"</span>]
        self.session.headers[<span class="t-str">"Authorization"</span>] <span class="t-op">=</span> <span class="t-str">f"Bearer </span>{self.api_key}<span class="t-str">"</span>
        <span class="t-kw">return</span> data

<span class="t-cm"># --- Run once to get your credentials ---</span>
<span class="t-kw">if</span> __name__ <span class="t-op">==</span> <span class="t-str">"__main__"</span>:
    agent <span class="t-op">=</span> <span class="t-cls">CasinoAgent</span>()
    creds <span class="t-op">=</span> agent.<span class="t-fn">register</span>(<span class="t-str">"my_agent_01"</span>, <span class="t-str">"agent@example.com"</span>)
    <span class="t-fn">print</span>(<span class="t-str">"API Key:"</span>, creds[<span class="t-str">"api_key"</span>])
    <span class="t-fn">print</span>(<span class="t-str">"Agent ID:"</span>, creds[<span class="t-str">"agent_id"</span>])</code></pre>
      </div>

      <div class="callout callout-tip">
        <span class="callout-icon">&#128161;</span>
        <div class="callout-body">
          <strong>Save your key in an environment variable</strong>
          Never hardcode your API key. Add <code>export PF_API_KEY="pf_live_sk_..."</code> to your
          <code>.bashrc</code> or <code>.zshrc</code>, then load it with <code>os.environ["PF_API_KEY"]</code>.
        </div>
      </div>
    </section>

    <!-- STEP 2 -->
    <section id="step-2">
      <div class="step-header">
        <div class="step-num">2</div>
        <h2>Fund Your Agent</h2>
      </div>

      <p>
        After registering, your balance starts at zero. You need to deposit USDC before you can place
        any bets. The deposit flow works like this:
      </p>

      <ol>
        <li>Log in to <a href="https://casino.purpleflea.com">casino.purpleflea.com</a> with your new username.</li>
        <li>Navigate to <strong>Wallet &rarr; Deposit</strong>.</li>
        <li>Copy your personal USDC deposit address (Polygon network, no bridging required).</li>
        <li>Send your desired amount from any wallet or exchange. Minimum deposit is <strong>1 USDC</strong>.</li>
        <li>Funds appear within 2 block confirmations (~8 seconds on Polygon).</li>
      </ol>

      <p>
        You can also verify your balance programmatically. Add this method to your <code>CasinoAgent</code> class:
      </p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code>    <span class="t-kw">def</span> <span class="t-fn">get_stats</span>(self):
        <span class="t-str">"""Fetch account stats including current balance."""</span>
        resp <span class="t-op">=</span> self.session.<span class="t-fn">get</span>(<span class="t-str">f"</span>{BASE_URL}<span class="t-str">/stats/me"</span>)
        resp.<span class="t-fn">raise_for_status</span>()
        <span class="t-kw">return</span> resp.<span class="t-fn">json</span>()

<span class="t-cm"># Usage:</span>
agent <span class="t-op">=</span> <span class="t-cls">CasinoAgent</span>(api_key<span class="t-op">=</span>os.environ[<span class="t-str">"PF_API_KEY"</span>])
stats <span class="t-op">=</span> agent.<span class="t-fn">get_stats</span>()
<span class="t-fn">print</span>(<span class="t-str">f"Current balance: $</span>{stats[<span class="t-str">'balance'</span>]:<span class="t-op">.</span><span class="t-num">2</span>f}<span class="t-str"> USDC"</span>)</code></pre>
      </div>

      <p>
        The stats endpoint returns a clean JSON object you will use repeatedly throughout the bot to
        verify your running balance without needing to track it manually:
      </p>

      <div class="api-endpoint">
        <span class="method method-get">GET</span>
        <span class="endpoint-url">https://casino.purpleflea.com/api/v1/stats/me</span>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">json</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code>{
  <span class="t-str">"balance"</span>: <span class="t-num">5.00</span>,
  <span class="t-str">"total_bets"</span>: <span class="t-num">0</span>,
  <span class="t-str">"total_wagered"</span>: <span class="t-num">0.00</span>,
  <span class="t-str">"total_won"</span>: <span class="t-num">0.00</span>,
  <span class="t-str">"net_pnl"</span>: <span class="t-num">0.00</span>,
  <span class="t-str">"win_rate"</span>: <span class="t-kw">null</span>
}</code></pre>
      </div>
    </section>

    <!-- STEP 3 -->
    <section id="step-3">
      <div class="step-header">
        <div class="step-num">3</div>
        <h2>Your First Bet</h2>
      </div>

      <p>
        The <strong>coin flip</strong> is the cleanest game to start with: 50/50 probability, instant
        resolution, and a payout of 1.96x the stake (a small house edge of 2%). Pick <code>"heads"</code>
        or <code>"tails"</code>, specify your stake amount, and the API resolves it immediately.
      </p>

      <div class="api-endpoint">
        <span class="method method-post">POST</span>
        <span class="endpoint-url">https://casino.purpleflea.com/api/v1/bets/place</span>
      </div>

      <p>Request body:</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">json</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code>{
  <span class="t-str">"game"</span>: <span class="t-str">"coin_flip"</span>,
  <span class="t-str">"amount"</span>: <span class="t-num">1.0</span>,
  <span class="t-str">"side"</span>: <span class="t-str">"heads"</span>
}</code></pre>
      </div>

      <p>Response:</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">json</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code>{
  <span class="t-str">"bet_id"</span>: <span class="t-str">"bet_4j8mq2"</span>,
  <span class="t-str">"game"</span>: <span class="t-str">"coin_flip"</span>,
  <span class="t-str">"side"</span>: <span class="t-str">"heads"</span>,
  <span class="t-str">"result"</span>: <span class="t-str">"tails"</span>,
  <span class="t-str">"won"</span>: <span class="t-kw">false</span>,
  <span class="t-str">"amount_bet"</span>: <span class="t-num">1.0</span>,
  <span class="t-str">"amount_won"</span>: <span class="t-num">0.0</span>,
  <span class="t-str">"new_balance"</span>: <span class="t-num">4.0</span>
}</code></pre>
      </div>

      <p>Add the <code>place_bet</code> method to your class:</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code>    <span class="t-kw">def</span> <span class="t-fn">place_bet</span>(self, game, amount, <span class="t-op">**</span>kwargs):
        <span class="t-str">"""Place a bet. Extra kwargs are forwarded as JSON fields."""</span>
        payload <span class="t-op">=</span> {<span class="t-str">"game"</span>: game, <span class="t-str">"amount"</span>: <span class="t-fn">round</span>(amount, <span class="t-num">2</span>), <span class="t-op">**</span>kwargs}
        resp <span class="t-op">=</span> self.session.<span class="t-fn">post</span>(<span class="t-str">f"</span>{BASE_URL}<span class="t-str">/bets/place"</span>, json<span class="t-op">=</span>payload)
        resp.<span class="t-fn">raise_for_status</span>()
        <span class="t-kw">return</span> resp.<span class="t-fn">json</span>()

<span class="t-cm"># Test with a single flip:</span>
result <span class="t-op">=</span> agent.<span class="t-fn">place_bet</span>(<span class="t-str">"coin_flip"</span>, <span class="t-num">1.0</span>, side<span class="t-op">=</span><span class="t-str">"heads"</span>)
outcome <span class="t-op">=</span> <span class="t-str">"WON"</span> <span class="t-kw">if</span> result[<span class="t-str">"won"</span>] <span class="t-kw">else</span> <span class="t-str">"LOST"</span>
<span class="t-fn">print</span>(<span class="t-str">f"</span>{outcome}<span class="t-str"> — result was </span>{result[<span class="t-str">'result'</span>]}<span class="t-str">, new balance: $</span>{result[<span class="t-str">'new_balance'</span>]}<span class="t-str">"</span>)</code></pre>
      </div>

      <div class="callout callout-info">
        <span class="callout-icon">&#8505;&#65039;</span>
        <div class="callout-body">
          <strong>Always bet heads</strong>
          It does not matter whether you always bet heads or tails &mdash; the house edge is symmetric.
          Picking a fixed side lets you remove one source of randomness from your code and keeps logs easy
          to read.
        </div>
      </div>
    </section>

    <!-- STEP 4 -->
    <section id="step-4">
      <div class="step-header">
        <div class="step-num">4</div>
        <h2>Add Kelly Criterion Sizing</h2>
      </div>

      <p>
        Flat-betting $1 every time is boring and suboptimal. The <strong>Kelly Criterion</strong> is a
        mathematically proven formula for maximizing the long-run growth rate of a bankroll by sizing
        each bet proportionally to your edge and bankroll.
      </p>

      <div class="formula-box">
        <div class="formula">f* = (bp &minus; q) / b</div>
        <div class="formula-caption">
          <strong>f*</strong> = fraction of bankroll to bet &nbsp;&bull;&nbsp;
          <strong>b</strong> = net odds (payout minus 1) &nbsp;&bull;&nbsp;
          <strong>p</strong> = probability of winning &nbsp;&bull;&nbsp;
          <strong>q</strong> = 1 &minus; p
        </div>
      </div>

      <p>
        For a coin flip paying 1.96x (net odds <strong>b = 0.96</strong>) with win probability
        <strong>p = 0.5</strong>:
      </p>

      <div class="formula-box">
        <div class="formula">f* = (0.96 &times; 0.5 &minus; 0.5) / 0.96 &asymp; &minus;0.0208</div>
        <div class="formula-caption">
          Negative Kelly means the house has an edge &mdash; the correct bet size is technically zero.
          We use <strong>fractional Kelly</strong> (e.g., quarter-Kelly) to stay in the game while
          accepting the expected negative drift.
        </div>
      </div>

      <p>
        For games with a genuine player edge (e.g., a promotional bonus that shifts EV positive), Kelly
        gives you the growth-optimal fraction. Here is the full implementation:
      </p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code><span class="t-kw">def</span> <span class="t-fn">kelly_fraction</span>(p_win, net_odds, fraction<span class="t-op">=</span><span class="t-num">0.25</span>):
    <span class="t-str">"""
    Compute the Kelly bet fraction.

    Args:
        p_win    : probability of winning (0..1)
        net_odds : net payout per unit staked (e.g. 0.96 for a 1.96x payout)
        fraction : Kelly multiplier; 0.25 = quarter-Kelly (conservative)

    Returns:
        Fraction of bankroll to wager, floored at 0.
    """</span>
    p_lose <span class="t-op">=</span> <span class="t-num">1.0</span> <span class="t-op">-</span> p_win
    kelly <span class="t-op">=</span> (net_odds <span class="t-op">*</span> p_win <span class="t-op">-</span> p_lose) <span class="t-op">/</span> net_odds
    <span class="t-kw">return</span> <span class="t-fn">max</span>(kelly <span class="t-op">*</span> fraction, <span class="t-num">0.0</span>)


<span class="t-kw">def</span> <span class="t-fn">kelly_bet_amount</span>(balance, p_win, net_odds, min_bet<span class="t-op">=</span><span class="t-num">0.10</span>,
                       max_bet<span class="t-op">=</span><span class="t-num">10.0</span>, fraction<span class="t-op">=</span><span class="t-num">0.25</span>):
    <span class="t-str">"""
    Translate the Kelly fraction into a dollar amount,
    clamped between min_bet and max_bet.
    """</span>
    f <span class="t-op">=</span> <span class="t-fn">kelly_fraction</span>(p_win, net_odds, fraction)
    amount <span class="t-op">=</span> balance <span class="t-op">*</span> f
    <span class="t-cm"># Clamp to the table limits</span>
    amount <span class="t-op">=</span> <span class="t-fn">max</span>(amount, min_bet)
    amount <span class="t-op">=</span> <span class="t-fn">min</span>(amount, max_bet)
    <span class="t-kw">return</span> <span class="t-fn">round</span>(amount, <span class="t-num">2</span>)


<span class="t-cm"># Coin flip parameters</span>
COIN_FLIP_P_WIN  <span class="t-op">=</span> <span class="t-num">0.50</span>   <span class="t-cm"># 50% win probability</span>
COIN_FLIP_PAYOUT <span class="t-op">=</span> <span class="t-num">1.96</span>   <span class="t-cm"># 1.96x payout multiplier</span>
COIN_FLIP_NET    <span class="t-op">=</span> COIN_FLIP_PAYOUT <span class="t-op">-</span> <span class="t-num">1.0</span>  <span class="t-cm"># = 0.96</span>

<span class="t-cm"># Example: $5 balance, quarter-Kelly</span>
amount <span class="t-op">=</span> <span class="t-fn">kelly_bet_amount</span>(<span class="t-num">5.0</span>, COIN_FLIP_P_WIN, COIN_FLIP_NET)
<span class="t-fn">print</span>(<span class="t-str">f"Quarter-Kelly bet on $5 bankroll: $</span>{amount}<span class="t-str">"</span>)
<span class="t-cm"># Prints: Quarter-Kelly bet on $5 bankroll: $0.10  (floored at min)</span></code></pre>
      </div>

      <p>
        Because coin flips are negative EV for the player, the raw Kelly fraction is negative. The
        <code>max(..., 0.0)</code> clamp means we always fall back to the minimum bet. This is intentional:
        it keeps the bot running for demonstration purposes. If you wire in a positive-EV signal (such as
        a reload bonus that changes effective p_win), Kelly will size up automatically.
      </p>
    </section>

    <!-- STEP 5 -->
    <section id="step-5">
      <div class="step-header">
        <div class="step-num">5</div>
        <h2>Game Loop with Stop-Loss</h2>
      </div>

      <p>
        Now we combine everything into a full game loop. The loop runs until one of three exit conditions
        is met: the target profit is hit, the stop-loss floor is breached, or the maximum number of bets
        is reached.
      </p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code><span class="t-kw">import</span> time
<span class="t-kw">import</span> random

<span class="t-kw">def</span> <span class="t-fn">run_game_loop</span>(
    agent,
    starting_balance,
    stop_loss_pct    <span class="t-op">=</span> <span class="t-num">0.30</span>,   <span class="t-cm"># Quit if balance drops 30% below start</span>
    take_profit_pct  <span class="t-op">=</span> <span class="t-num">0.50</span>,   <span class="t-cm"># Quit if balance rises 50% above start</span>
    max_bets         <span class="t-op">=</span> <span class="t-num">100</span>,
    delay_secs       <span class="t-op">=</span> <span class="t-num">0.5</span>,    <span class="t-cm"># Pause between bets (be polite to the API)</span>
    min_bet          <span class="t-op">=</span> <span class="t-num">0.10</span>,
    max_bet          <span class="t-op">=</span> <span class="t-num">5.0</span>,
):
    stop_loss_floor  <span class="t-op">=</span> starting_balance <span class="t-op">*</span> (<span class="t-num">1</span> <span class="t-op">-</span> stop_loss_pct)
    take_profit_ceil <span class="t-op">=</span> starting_balance <span class="t-op">*</span> (<span class="t-num">1</span> <span class="t-op">+</span> take_profit_pct)

    balance   <span class="t-op">=</span> starting_balance
    bets_made <span class="t-op">=</span> <span class="t-num">0</span>
    wins      <span class="t-op">=</span> <span class="t-num">0</span>
    losses    <span class="t-op">=</span> <span class="t-num">0</span>

    <span class="t-fn">print</span>(<span class="t-str">f"Starting loop | balance=${balance:.2f} | "
          f"floor=${stop_loss_floor:.2f} | ceil=${take_profit_ceil:.2f}"</span>)

    <span class="t-kw">while</span> bets_made <span class="t-op">&lt;</span> max_bets:
        <span class="t-cm"># ── Exit conditions ──────────────────────────────────</span>
        <span class="t-kw">if</span> balance <span class="t-op">&lt;=</span> stop_loss_floor:
            <span class="t-fn">print</span>(<span class="t-str">f"[STOP-LOSS] Balance ${balance:.2f} hit floor. Exiting."</span>)
            <span class="t-kw">break</span>
        <span class="t-kw">if</span> balance <span class="t-op">&gt;=</span> take_profit_ceil:
            <span class="t-fn">print</span>(<span class="t-str">f"[TAKE-PROFIT] Balance ${balance:.2f} hit ceiling. Exiting."</span>)
            <span class="t-kw">break</span>
        <span class="t-kw">if</span> balance <span class="t-op">&lt;</span> min_bet:
            <span class="t-fn">print</span>(<span class="t-str">f"[BUST] Balance ${balance:.2f} below min bet. Exiting."</span>)
            <span class="t-kw">break</span>

        <span class="t-cm"># ── Size the bet ─────────────────────────────────────</span>
        amount <span class="t-op">=</span> <span class="t-fn">kelly_bet_amount</span>(
            balance, COIN_FLIP_P_WIN, COIN_FLIP_NET,
            min_bet<span class="t-op">=</span>min_bet, max_bet<span class="t-op">=</span>max_bet,
        )

        <span class="t-cm"># ── Place the bet ────────────────────────────────────</span>
        <span class="t-kw">try</span>:
            result <span class="t-op">=</span> agent.<span class="t-fn">place_bet</span>(<span class="t-str">"coin_flip"</span>, amount, side<span class="t-op">=</span><span class="t-str">"heads"</span>)
        <span class="t-kw">except</span> requests.HTTPError <span class="t-kw">as</span> exc:
            <span class="t-fn">print</span>(<span class="t-str">f"[ERROR] HTTP {exc.response.status_code}: {exc.response.text}"</span>)
            <span class="t-kw">break</span>

        <span class="t-cm"># ── Update state ─────────────────────────────────────</span>
        balance <span class="t-op">=</span> result[<span class="t-str">"new_balance"</span>]
        bets_made <span class="t-op">+=</span> <span class="t-num">1</span>
        <span class="t-kw">if</span> result[<span class="t-str">"won"</span>]:
            wins <span class="t-op">+=</span> <span class="t-num">1</span>
        <span class="t-kw">else</span>:
            losses <span class="t-op">+=</span> <span class="t-num">1</span>

        win_rate <span class="t-op">=</span> wins <span class="t-op">/</span> bets_made <span class="t-op">*</span> <span class="t-num">100</span>
        icon     <span class="t-op">=</span> <span class="t-str">"+"</span> <span class="t-kw">if</span> result[<span class="t-str">"won"</span>] <span class="t-kw">else</span> <span class="t-str">"-"</span>
        <span class="t-fn">print</span>(
            <span class="t-str">f"Bet #{bets_made:03d} [{icon}] "</span>
            <span class="t-str">f"${amount:.2f} wagered | "</span>
            <span class="t-str">f"result={result['result']:5s} | "</span>
            <span class="t-str">f"balance=${balance:.2f} | "</span>
            <span class="t-str">f"W/L={wins}/{losses} ({win_rate:.1f}%)"</span>
        )

        <span class="t-fn">time.sleep</span>(delay_secs)

    net_pnl <span class="t-op">=</span> balance <span class="t-op">-</span> starting_balance
    <span class="t-fn">print</span>(<span class="t-str">f"\nSession complete: {bets_made} bets | "</span>
          <span class="t-str">f"W/L {wins}/{losses} | "</span>
          <span class="t-str">f"PnL ${net_pnl:+.2f}"</span>)
    <span class="t-kw">return</span> balance</code></pre>
      </div>

      <p>Sample output for a 20-bet session:</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">text</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code>Starting loop | balance=$5.00 | floor=$3.50 | ceil=$7.50
Bet #001 [+] $0.10 wagered | result=heads | balance=$5.10 | W/L=1/0 (100.0%)
Bet #002 [-] $0.10 wagered | result=tails | balance=$5.00 | W/L=1/1 (50.0%)
Bet #003 [+] $0.10 wagered | result=heads | balance=$5.10 | W/L=2/1 (66.7%)
Bet #004 [-] $0.10 wagered | result=tails | balance=$5.00 | W/L=2/2 (50.0%)
...
Session complete: 20 bets | W/L 9/11 | PnL $-0.20</code></pre>
      </div>
    </section>

    <!-- STEP 6 -->
    <section id="step-6">
      <div class="step-header">
        <div class="step-num">6</div>
        <h2>Check Your Stats</h2>
      </div>

      <p>
        After running a session, pull your full stats to review performance. The <code>/stats/me</code>
        endpoint aggregates lifetime totals and is useful for building dashboards or logging to a
        database.
      </p>

      <div class="api-endpoint">
        <span class="method method-get">GET</span>
        <span class="endpoint-url">https://casino.purpleflea.com/api/v1/stats/me</span>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code><span class="t-kw">def</span> <span class="t-fn">print_stats</span>(agent):
    stats <span class="t-op">=</span> agent.<span class="t-fn">get_stats</span>()
    <span class="t-fn">print</span>(<span class="t-str">"\n── Account Stats ────────────────────────"</span>)
    <span class="t-fn">print</span>(<span class="t-str">f"  Balance:       ${stats['balance']:.4f} USDC"</span>)
    <span class="t-fn">print</span>(<span class="t-str">f"  Total bets:    {stats['total_bets']}"</span>)
    <span class="t-fn">print</span>(<span class="t-str">f"  Total wagered: ${stats['total_wagered']:.4f}"</span>)
    <span class="t-fn">print</span>(<span class="t-str">f"  Total won:     ${stats['total_won']:.4f}"</span>)
    <span class="t-fn">print</span>(<span class="t-str">f"  Net PnL:       ${stats['net_pnl']:+.4f}"</span>)
    win_rate <span class="t-op">=</span> stats.get(<span class="t-str">"win_rate"</span>)
    <span class="t-kw">if</span> win_rate <span class="t-kw">is not None</span>:
        <span class="t-fn">print</span>(<span class="t-str">f"  Win rate:      {win_rate:.1f}%"</span>)
    <span class="t-fn">print</span>(<span class="t-str">"──────────────────────────────────────────"</span>)

<span class="t-fn">print_stats</span>(agent)</code></pre>
      </div>

      <p>You can also retrieve your recent bet history:</p>

      <div class="api-endpoint">
        <span class="method method-get">GET</span>
        <span class="endpoint-url">https://casino.purpleflea.com/api/v1/bets</span>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code>    <span class="t-kw">def</span> <span class="t-fn">get_recent_bets</span>(self, limit<span class="t-op">=</span><span class="t-num">20</span>):
        <span class="t-str">"""Fetch recent bet history."""</span>
        resp <span class="t-op">=</span> self.session.<span class="t-fn">get</span>(
            <span class="t-str">f"</span>{BASE_URL}<span class="t-str">/bets"</span>,
            params<span class="t-op">=</span>{<span class="t-str">"limit"</span>: limit},
        )
        resp.<span class="t-fn">raise_for_status</span>()
        <span class="t-kw">return</span> resp.<span class="t-fn">json</span>()

<span class="t-cm"># Print last 5 bets</span>
bets <span class="t-op">=</span> agent.<span class="t-fn">get_recent_bets</span>(limit<span class="t-op">=</span><span class="t-num">5</span>)
<span class="t-kw">for</span> bet <span class="t-kw">in</span> bets:
    icon <span class="t-op">=</span> <span class="t-str">"W"</span> <span class="t-kw">if</span> bet[<span class="t-str">"won"</span>] <span class="t-kw">else</span> <span class="t-str">"L"</span>
    <span class="t-fn">print</span>(<span class="t-str">f"[{icon}] {bet['game']:12s} ${bet['amount_bet']:.2f} wagered"</span>)</code></pre>
      </div>
    </section>

    <!-- STEP 7 -->
    <section id="step-7">
      <div class="step-header">
        <div class="step-num">7</div>
        <h2>Set Up Referrals for Passive Income</h2>
      </div>

      <p>
        Purple Flea's referral program pays you a <strong>5% revenue share</strong> on the house edge
        generated by anyone who signs up using your referral code. If you are building a multi-agent
        system or writing a tutorial that sends other developers to the platform, referrals can offset
        your own losses.
      </p>

      <p>Your referral code is derived from your <code>agent_id</code>:</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code>    <span class="t-kw">def</span> <span class="t-fn">get_referral_info</span>(self):
        <span class="t-str">"""Returns referral code, link, and earnings so far."""</span>
        resp <span class="t-op">=</span> self.session.<span class="t-fn">get</span>(<span class="t-str">f"</span>{BASE_URL}<span class="t-str">/referrals/me"</span>)
        resp.<span class="t-fn">raise_for_status</span>()
        <span class="t-kw">return</span> resp.<span class="t-fn">json</span>()

ref <span class="t-op">=</span> agent.<span class="t-fn">get_referral_info</span>()
<span class="t-fn">print</span>(<span class="t-str">f"Your referral link: https://casino.purpleflea.com?ref={ref['code']}"</span>)
<span class="t-fn">print</span>(<span class="t-str">f"Total referred users: {ref['total_referrals']}"</span>)
<span class="t-fn">print</span>(<span class="t-str">f"Earnings from referrals: ${ref['total_earned']:.4f} USDC"</span>)</code></pre>
      </div>

      <p>
        When registering new agents programmatically, pass the <code>referral_code</code> field during
        registration to attribute them to your account automatically:
      </p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code><span class="t-cm"># Register a sub-agent under your referral code</span>
new_agent <span class="t-op">=</span> <span class="t-cls">CasinoAgent</span>()
creds <span class="t-op">=</span> new_agent.<span class="t-fn">register</span>(
    username<span class="t-op">=</span><span class="t-str">"sub_agent_02"</span>,
    email<span class="t-op">=</span><span class="t-str">"sub@example.com"</span>,
    referral_code<span class="t-op">=</span><span class="t-str">"AGT7X9K2M"</span>,  <span class="t-cm"># your code</span>
)</code></pre>
      </div>

      <div class="callout callout-tip">
        <span class="callout-icon">&#128161;</span>
        <div class="callout-body">
          <strong>Automate a referral fleet</strong>
          If you are running multiple agents across different strategies, register each one through your
          referral link. You earn 5% of the house edge on every bet they place, accumulating passively
          as they run.
        </div>
      </div>
    </section>

    <!-- COMPLETE CODE -->
    <section id="complete-code">
      <h2>Complete Final Code</h2>
      <p>
        Everything above combined into a single, fully runnable file. Copy it, set your
        <code>PF_API_KEY</code> environment variable, and run it directly with
        <code>python casino_agent.py</code>.
      </p>

      <div class="code-block">
        <div class="final-code-header">
          <span class="final-code-badge">COMPLETE</span>
          <span class="final-code-title">casino_agent.py</span>
          <span class="final-code-lines">~95 lines</span>
        </div>
        <div class="code-header" style="border-top: none;">
          <span class="code-lang">python</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code><span class="t-cm">#!/usr/bin/env python3</span>
<span class="t-cm">"""
casino_agent.py — Purple Flea Casino Bot
A complete autonomous betting agent with Kelly Criterion sizing,
stop-loss protection, and session stats reporting.

Usage:
    export PF_API_KEY="pf_live_sk_..."
    python casino_agent.py

To register a new account (run once):
    python casino_agent.py --register
"""</span>

<span class="t-kw">import</span> argparse
<span class="t-kw">import</span> os
<span class="t-kw">import</span> sys
<span class="t-kw">import</span> time

<span class="t-kw">import</span> requests

<span class="t-cm"># ── Constants ─────────────────────────────────────────────────────</span>
BASE_URL         <span class="t-op">=</span> <span class="t-str">"https://casino.purpleflea.com/api/v1"</span>
COIN_FLIP_P_WIN  <span class="t-op">=</span> <span class="t-num">0.50</span>
COIN_FLIP_PAYOUT <span class="t-op">=</span> <span class="t-num">1.96</span>
COIN_FLIP_NET    <span class="t-op">=</span> COIN_FLIP_PAYOUT <span class="t-op">-</span> <span class="t-num">1.0</span>


<span class="t-cm"># ── Kelly Criterion ────────────────────────────────────────────────</span>
<span class="t-kw">def</span> <span class="t-fn">kelly_fraction</span>(p_win, net_odds, fraction<span class="t-op">=</span><span class="t-num">0.25</span>):
    p_lose <span class="t-op">=</span> <span class="t-num">1.0</span> <span class="t-op">-</span> p_win
    kelly  <span class="t-op">=</span> (net_odds <span class="t-op">*</span> p_win <span class="t-op">-</span> p_lose) <span class="t-op">/</span> net_odds
    <span class="t-kw">return</span> <span class="t-fn">max</span>(kelly <span class="t-op">*</span> fraction, <span class="t-num">0.0</span>)


<span class="t-kw">def</span> <span class="t-fn">kelly_bet_amount</span>(balance, p_win, net_odds,
                       min_bet<span class="t-op">=</span><span class="t-num">0.10</span>, max_bet<span class="t-op">=</span><span class="t-num">5.0</span>, fraction<span class="t-op">=</span><span class="t-num">0.25</span>):
    f      <span class="t-op">=</span> <span class="t-fn">kelly_fraction</span>(p_win, net_odds, fraction)
    amount <span class="t-op">=</span> balance <span class="t-op">*</span> f
    amount <span class="t-op">=</span> <span class="t-fn">max</span>(amount, min_bet)
    amount <span class="t-op">=</span> <span class="t-fn">min</span>(amount, max_bet)
    <span class="t-kw">return</span> <span class="t-fn">round</span>(amount, <span class="t-num">2</span>)


<span class="t-cm"># ── Casino Agent class ─────────────────────────────────────────────</span>
<span class="t-kw">class</span> <span class="t-cls">CasinoAgent</span>:
    <span class="t-kw">def</span> <span class="t-fn">__init__</span>(self, api_key<span class="t-op">=</span><span class="t-kw">None</span>):
        self.api_key <span class="t-op">=</span> api_key
        self.session <span class="t-op">=</span> requests.<span class="t-fn">Session</span>()
        self.session.headers.update({<span class="t-str">"Content-Type"</span>: <span class="t-str">"application/json"</span>})
        <span class="t-kw">if</span> api_key:
            self.session.headers[<span class="t-str">"Authorization"</span>] <span class="t-op">=</span> <span class="t-str">f"Bearer </span>{api_key}<span class="t-str">"</span>

    <span class="t-kw">def</span> <span class="t-fn">register</span>(self, username, email, referral_code<span class="t-op">=</span><span class="t-kw">None</span>):
        payload <span class="t-op">=</span> {<span class="t-str">"username"</span>: username, <span class="t-str">"email"</span>: email}
        <span class="t-kw">if</span> referral_code:
            payload[<span class="t-str">"referral_code"</span>] <span class="t-op">=</span> referral_code
        resp <span class="t-op">=</span> self.session.<span class="t-fn">post</span>(<span class="t-str">f"</span>{BASE_URL}<span class="t-str">/auth/register"</span>, json<span class="t-op">=</span>payload)
        resp.<span class="t-fn">raise_for_status</span>()
        data            <span class="t-op">=</span> resp.<span class="t-fn">json</span>()
        self.api_key    <span class="t-op">=</span> data[<span class="t-str">"api_key"</span>]
        self.session.headers[<span class="t-str">"Authorization"</span>] <span class="t-op">=</span> <span class="t-str">f"Bearer </span>{self.api_key}<span class="t-str">"</span>
        <span class="t-kw">return</span> data

    <span class="t-kw">def</span> <span class="t-fn">place_bet</span>(self, game, amount, <span class="t-op">**</span>kwargs):
        payload <span class="t-op">=</span> {<span class="t-str">"game"</span>: game, <span class="t-str">"amount"</span>: <span class="t-fn">round</span>(amount, <span class="t-num">2</span>), <span class="t-op">**</span>kwargs}
        resp    <span class="t-op">=</span> self.session.<span class="t-fn">post</span>(<span class="t-str">f"</span>{BASE_URL}<span class="t-str">/bets/place"</span>, json<span class="t-op">=</span>payload)
        resp.<span class="t-fn">raise_for_status</span>()
        <span class="t-kw">return</span> resp.<span class="t-fn">json</span>()

    <span class="t-kw">def</span> <span class="t-fn">get_stats</span>(self):
        resp <span class="t-op">=</span> self.session.<span class="t-fn">get</span>(<span class="t-str">f"</span>{BASE_URL}<span class="t-str">/stats/me"</span>)
        resp.<span class="t-fn">raise_for_status</span>()
        <span class="t-kw">return</span> resp.<span class="t-fn">json</span>()

    <span class="t-kw">def</span> <span class="t-fn">get_recent_bets</span>(self, limit<span class="t-op">=</span><span class="t-num">20</span>):
        resp <span class="t-op">=</span> self.session.<span class="t-fn">get</span>(<span class="t-str">f"</span>{BASE_URL}<span class="t-str">/bets"</span>, params<span class="t-op">=</span>{<span class="t-str">"limit"</span>: limit})
        resp.<span class="t-fn">raise_for_status</span>()
        <span class="t-kw">return</span> resp.<span class="t-fn">json</span>()

    <span class="t-kw">def</span> <span class="t-fn">get_referral_info</span>(self):
        resp <span class="t-op">=</span> self.session.<span class="t-fn">get</span>(<span class="t-str">f"</span>{BASE_URL}<span class="t-str">/referrals/me"</span>)
        resp.<span class="t-fn">raise_for_status</span>()
        <span class="t-kw">return</span> resp.<span class="t-fn">json</span>()


<span class="t-cm"># ── Game loop ──────────────────────────────────────────────────────</span>
<span class="t-kw">def</span> <span class="t-fn">run_game_loop</span>(agent, starting_balance, stop_loss_pct<span class="t-op">=</span><span class="t-num">0.30</span>,
                    take_profit_pct<span class="t-op">=</span><span class="t-num">0.50</span>, max_bets<span class="t-op">=</span><span class="t-num">100</span>,
                    delay_secs<span class="t-op">=</span><span class="t-num">0.5</span>, min_bet<span class="t-op">=</span><span class="t-num">0.10</span>, max_bet<span class="t-op">=</span><span class="t-num">5.0</span>):

    floor  <span class="t-op">=</span> starting_balance <span class="t-op">*</span> (<span class="t-num">1</span> <span class="t-op">-</span> stop_loss_pct)
    ceil   <span class="t-op">=</span> starting_balance <span class="t-op">*</span> (<span class="t-num">1</span> <span class="t-op">+</span> take_profit_pct)
    balance<span class="t-op">=</span> starting_balance
    bets   <span class="t-op">=</span> wins <span class="t-op">=</span> losses <span class="t-op">=</span> <span class="t-num">0</span>

    <span class="t-fn">print</span>(<span class="t-str">f"Loop start: ${balance:.2f} | floor=${floor:.2f} | ceil=${ceil:.2f}"</span>)

    <span class="t-kw">while</span> bets <span class="t-op">&lt;</span> max_bets:
        <span class="t-kw">if</span> balance <span class="t-op">&lt;=</span> floor:
            <span class="t-fn">print</span>(<span class="t-str">f"[STOP-LOSS] ${balance:.2f} &lt;= ${floor:.2f}"</span>); <span class="t-kw">break</span>
        <span class="t-kw">if</span> balance <span class="t-op">&gt;=</span> ceil:
            <span class="t-fn">print</span>(<span class="t-str">f"[TAKE-PROFIT] ${balance:.2f} &gt;= ${ceil:.2f}"</span>); <span class="t-kw">break</span>
        <span class="t-kw">if</span> balance <span class="t-op">&lt;</span> min_bet:
            <span class="t-fn">print</span>(<span class="t-str">f"[BUST] ${balance:.2f}"</span>); <span class="t-kw">break</span>

        amount <span class="t-op">=</span> <span class="t-fn">kelly_bet_amount</span>(
            balance, COIN_FLIP_P_WIN, COIN_FLIP_NET,
            min_bet<span class="t-op">=</span>min_bet, max_bet<span class="t-op">=</span>max_bet,
        )

        <span class="t-kw">try</span>:
            r <span class="t-op">=</span> agent.<span class="t-fn">place_bet</span>(<span class="t-str">"coin_flip"</span>, amount, side<span class="t-op">=</span><span class="t-str">"heads"</span>)
        <span class="t-kw">except</span> requests.HTTPError <span class="t-kw">as</span> e:
            <span class="t-fn">print</span>(<span class="t-str">f"HTTP error: {e}"</span>); <span class="t-kw">break</span>

        balance <span class="t-op">=</span> r[<span class="t-str">"new_balance"</span>]
        bets   <span class="t-op">+=</span> <span class="t-num">1</span>
        <span class="t-kw">if</span> r[<span class="t-str">"won"</span>]: wins   <span class="t-op">+=</span> <span class="t-num">1</span>
        <span class="t-kw">else</span>:       losses <span class="t-op">+=</span> <span class="t-num">1</span>

        icon <span class="t-op">=</span> <span class="t-str">"+"</span> <span class="t-kw">if</span> r[<span class="t-str">"won"</span>] <span class="t-kw">else</span> <span class="t-str">"-"</span>
        <span class="t-fn">print</span>(<span class="t-str">f"#{bets:03d}[{icon}] ${amount:.2f} | {r['result']:5s} | balance=${balance:.2f}"</span>)
        <span class="t-fn">time.sleep</span>(delay_secs)

    pnl <span class="t-op">=</span> balance <span class="t-op">-</span> starting_balance
    <span class="t-fn">print</span>(<span class="t-str">f"\nDone: {bets} bets, W/L {wins}/{losses}, PnL ${pnl:+.2f}"</span>)
    <span class="t-kw">return</span> balance


<span class="t-cm"># ── Stats printer ──────────────────────────────────────────────────</span>
<span class="t-kw">def</span> <span class="t-fn">print_stats</span>(agent):
    s <span class="t-op">=</span> agent.<span class="t-fn">get_stats</span>()
    <span class="t-fn">print</span>(<span class="t-str">"\n── Account Stats ──────────────────────────"</span>)
    <span class="t-fn">print</span>(<span class="t-str">f"  Balance:       ${s['balance']:.4f} USDC"</span>)
    <span class="t-fn">print</span>(<span class="t-str">f"  Total bets:    {s['total_bets']}"</span>)
    <span class="t-fn">print</span>(<span class="t-str">f"  Total wagered: ${s['total_wagered']:.4f}"</span>)
    <span class="t-fn">print</span>(<span class="t-str">f"  Net PnL:       ${s['net_pnl']:+.4f}"</span>)
    <span class="t-kw">if</span> s.get(<span class="t-str">"win_rate"</span>):
        <span class="t-fn">print</span>(<span class="t-str">f"  Win rate:      {s['win_rate']:.1f}%"</span>)
    <span class="t-fn">print</span>(<span class="t-str">"────────────────────────────────────────────\n"</span>)


<span class="t-cm"># ── Entry point ────────────────────────────────────────────────────</span>
<span class="t-kw">if</span> __name__ <span class="t-op">==</span> <span class="t-str">"__main__"</span>:
    parser <span class="t-op">=</span> argparse.<span class="t-fn">ArgumentParser</span>(description<span class="t-op">=</span><span class="t-str">"Purple Flea Casino Agent"</span>)
    parser.<span class="t-fn">add_argument</span>(<span class="t-str">"--register"</span>, action<span class="t-op">=</span><span class="t-str">"store_true"</span>)
    parser.<span class="t-fn">add_argument</span>(<span class="t-str">"--username"</span>, default<span class="t-op">=</span><span class="t-str">"my_agent_01"</span>)
    parser.<span class="t-fn">add_argument</span>(<span class="t-str">"--email"</span>,    default<span class="t-op">=</span><span class="t-str">"agent@example.com"</span>)
    parser.<span class="t-fn">add_argument</span>(<span class="t-str">"--bets"</span>,     type<span class="t-op">=</span><span class="t-fn">int</span>,   default<span class="t-op">=</span><span class="t-num">50</span>)
    parser.<span class="t-fn">add_argument</span>(<span class="t-str">"--stop-loss"</span>, type<span class="t-op">=</span><span class="t-fn">float</span>, default<span class="t-op">=</span><span class="t-num">0.30</span>)
    args <span class="t-op">=</span> parser.<span class="t-fn">parse_args</span>()

    <span class="t-kw">if</span> args.register:
        agent <span class="t-op">=</span> <span class="t-cls">CasinoAgent</span>()
        creds <span class="t-op">=</span> agent.<span class="t-fn">register</span>(args.username, args.email)
        <span class="t-fn">print</span>(<span class="t-str">"Registered successfully!"</span>)
        <span class="t-fn">print</span>(<span class="t-str">f"API Key  : {creds['api_key']}"</span>)
        <span class="t-fn">print</span>(<span class="t-str">f"Agent ID : {creds['agent_id']}"</span>)
        <span class="t-fn">print</span>(<span class="t-str">"\nAdd to your shell:"</span>)
        <span class="t-fn">print</span>(<span class="t-str">f"  export PF_API_KEY=\"{creds['api_key']}\""</span>)
        sys.<span class="t-fn">exit</span>(<span class="t-num">0</span>)

    api_key <span class="t-op">=</span> os.environ.<span class="t-fn">get</span>(<span class="t-str">"PF_API_KEY"</span>)
    <span class="t-kw">if not</span> api_key:
        <span class="t-fn">print</span>(<span class="t-str">"Error: PF_API_KEY environment variable not set."</span>)
        <span class="t-fn">print</span>(<span class="t-str">"Run with --register first, then export PF_API_KEY=..."</span>)
        sys.<span class="t-fn">exit</span>(<span class="t-num">1</span>)

    agent <span class="t-op">=</span> <span class="t-cls">CasinoAgent</span>(api_key<span class="t-op">=</span>api_key)

    <span class="t-cm"># Print starting stats</span>
    <span class="t-fn">print_stats</span>(agent)
    stats <span class="t-op">=</span> agent.<span class="t-fn">get_stats</span>()
    start_balance <span class="t-op">=</span> stats[<span class="t-str">"balance"</span>]

    <span class="t-kw">if</span> start_balance <span class="t-op">&lt;</span> <span class="t-num">0.10</span>:
        <span class="t-fn">print</span>(<span class="t-str">"Balance too low. Please deposit USDC first."</span>)
        sys.<span class="t-fn">exit</span>(<span class="t-num">1</span>)

    <span class="t-cm"># Run the game loop</span>
    <span class="t-fn">run_game_loop</span>(
        agent,
        starting_balance <span class="t-op">=</span> start_balance,
        stop_loss_pct    <span class="t-op">=</span> args.stop_loss,
        take_profit_pct  <span class="t-op">=</span> <span class="t-num">0.50</span>,
        max_bets         <span class="t-op">=</span> args.bets,
        delay_secs       <span class="t-op">=</span> <span class="t-num">0.5</span>,
        min_bet          <span class="t-op">=</span> <span class="t-num">0.10</span>,
        max_bet          <span class="t-op">=</span> <span class="t-num">5.0</span>,
    )

    <span class="t-cm"># Print final stats</span>
    <span class="t-fn">print_stats</span>(agent)</code></pre>
      </div>
    </section>

    <!-- WHAT'S NEXT -->
    <section id="whats-next">
      <h2>What's Next</h2>
      <p>
        You now have a working autonomous casino agent. Here are three high-value directions to extend it:
      </p>

      <div class="next-grid">
        <a href="https://purpleflea.com/blog/connect-langchain-casino" class="next-card">
          <div class="next-card-icon">&#129302;</div>
          <div class="next-card-title">Connect to LangChain</div>
          <div class="next-card-desc">Wrap <code>place_bet</code> as a LangChain tool and give an LLM autonomous control over when and how much to bet.</div>
        </a>
        <a href="https://purpleflea.com/blog/add-trading-signals" class="next-card">
          <div class="next-card-icon">&#128200;</div>
          <div class="next-card-title">Add Trading Signals</div>
          <div class="next-card-desc">Feed on-chain data or price feeds into your Kelly formula to shift p_win above 0.5 and make the bot EV-positive.</div>
        </a>
        <a href="https://purpleflea.com/blog/deploy-pm2-vps" class="next-card">
          <div class="next-card-icon">&#128640;</div>
          <div class="next-card-title">Deploy with pm2</div>
          <div class="next-card-desc">Run your agent 24/7 on a VPS using pm2 process management with auto-restart and log rotation.</div>
        </a>
      </div>

      <div class="callout callout-tip" style="margin-top: 28px;">
        <span class="callout-icon">&#128172;</span>
        <div class="callout-body">
          <strong>Join the community</strong>
          Share your agent builds in the <a href="https://discord.gg/purpleflea">Purple Flea Discord</a>.
          The community regularly shares strategy improvements, API tips, and referral partnerships.
        </div>
      </div>
    </section>

    <!-- RELATED ARTICLES -->
    <div class="related-section" id="related">
      <div class="related-title">Related Articles</div>
      <div class="related-grid">
        <a href="https://purpleflea.com/blog/casino-api-overview" class="related-card">
          <div class="related-card-tag">Docs</div>
          <div class="related-card-title">Purple Flea Casino API Overview</div>
          <div class="related-card-desc">Full endpoint reference: authentication, games, withdrawals, and webhooks.</div>
          <div class="related-card-meta">5 min read &middot; Feb 20, 2026</div>
        </a>
        <a href="https://purpleflea.com/blog/kelly-criterion-deep-dive" class="related-card">
          <div class="related-card-tag">Math</div>
          <div class="related-card-title">Kelly Criterion Deep Dive</div>
          <div class="related-card-desc">The full mathematical derivation, fractional Kelly variants, and why full Kelly is too aggressive in practice.</div>
          <div class="related-card-meta">12 min read &middot; Feb 15, 2026</div>
        </a>
        <a href="https://purpleflea.com/blog/deploy-pm2-vps" class="related-card">
          <div class="related-card-tag">DevOps</div>
          <div class="related-card-title">Deploy a Bot with pm2 on a VPS</div>
          <div class="related-card-desc">Configure pm2 ecosystem files, environment variables, and log rotation for a Python bot running continuously.</div>
          <div class="related-card-meta">6 min read &middot; Jan 30, 2026</div>
        </a>
        <a href="https://purpleflea.com/blog/langchain-casino-tool" class="related-card">
          <div class="related-card-tag">AI Agents</div>
          <div class="related-card-title">LangChain Casino Tool Integration</div>
          <div class="related-card-desc">Expose casino endpoints as LangChain tools and build a GPT-4 powered betting strategist from scratch.</div>
          <div class="related-card-meta">10 min read &middot; Feb 10, 2026</div>
        </a>
      </div>
    </div>

  </article>

  <!-- ─── TOC SIDEBAR ──────────────────────────────────────────── -->
  <aside class="toc-sidebar">
    <div class="toc-title">On this page</div>
    <ul class="toc-list">
      <li><a href="#intro">Why Build a Casino Agent?</a></li>
      <li><a href="#prereqs">Prerequisites</a></li>
      <li><a href="#step-1">Step 1 &mdash; Register</a></li>
      <li><a href="#step-2">Step 2 &mdash; Fund Your Agent</a></li>
      <li><a href="#step-3">Step 3 &mdash; Your First Bet</a></li>
      <li><a href="#step-4">Step 4 &mdash; Kelly Criterion</a></li>
      <li><a href="#step-5">Step 5 &mdash; Game Loop</a></li>
      <li><a href="#step-6">Step 6 &mdash; Check Stats</a></li>
      <li><a href="#step-7">Step 7 &mdash; Set Up Referrals</a></li>
      <li><a href="#complete-code">Complete Final Code</a></li>
      <li><a href="#whats-next">What's Next</a></li>
      <li><a href="#related">Related Articles</a></li>
    </ul>
  </aside>

</div>

<!-- ─── FOOTER ─────────────────────────────────────────────────── -->
<footer>
  <p>
    &copy; 2026 Purple Flea &mdash;
    <a href="https://purpleflea.com/blog">Blog</a> &middot;
    <a href="https://purpleflea.com/docs">Docs</a> &middot;
    <a href="https://purpleflea.com/terms">Terms</a> &middot;
    <a href="https://purpleflea.com/privacy">Privacy</a>
  </p>
</footer>

<script>
  // ── Copy to clipboard ─────────────────────────────────────────────
  function copyCode(btn) {
    const pre = btn.closest('.code-block').querySelector('pre');
    const text = pre.innerText;
    navigator.clipboard.writeText(text).then(() => {
      btn.textContent = 'Copied!';
      btn.classList.add('copied');
      setTimeout(() => {
        btn.textContent = 'Copy';
        btn.classList.remove('copied');
      }, 2000);
    });
  }

  // ── Active TOC on scroll ──────────────────────────────────────────
  (function () {
    const sections = document.querySelectorAll('section[id], div[id="related"]');
    const links    = document.querySelectorAll('.toc-list a');

    if (!links.length) return;

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            links.forEach((l) => l.classList.remove('active'));
            const active = document.querySelector(
              `.toc-list a[href="#${entry.target.id}"]`
            );
            if (active) active.classList.add('active');
          }
        });
      },
      { rootMargin: '-60px 0px -70% 0px', threshold: 0 }
    );

    sections.forEach((s) => observer.observe(s));
  })();
</script>

</body>
</html>
