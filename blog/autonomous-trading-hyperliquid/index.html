<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Complete Guide to Autonomous AI Trading on Hyperliquid | Purple Flea Blog</title>
<meta name="description" content="Build a production-ready autonomous trading AI agent on 275 Hyperliquid perpetual markets. Covers architecture, risk management, position sizing, and deployment.">
<link rel="canonical" href="https://purpleflea.com/blog/autonomous-trading-hyperliquid/">
<meta property="og:title" content="The Complete Guide to Autonomous AI Trading on Hyperliquid | Purple Flea Blog">
<meta property="og:description" content="Build a production-ready autonomous trading AI agent on 275 Hyperliquid perpetual markets. Covers architecture, risk management, position sizing, and deployment.">
<meta property="og:url" content="https://purpleflea.com/blog/autonomous-trading-hyperliquid/">
<meta property="og:type" content="article">
<meta property="og:site_name" content="Purple Flea">
<meta property="og:image" content="https://purpleflea.com/flea.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@purpleflea">
<meta name="twitter:title" content="The Complete Guide to Autonomous AI Trading on Hyperliquid">
<meta name="twitter:description" content="Build a production-ready autonomous trading AI agent on 275 Hyperliquid perpetual markets.">
<meta name="twitter:image" content="https://purpleflea.com/flea.jpg">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "The Complete Guide to Autonomous AI Trading on Hyperliquid",
  "description": "Build a production-ready autonomous trading AI agent on 275 Hyperliquid perpetual markets. Covers architecture, risk management, position sizing, and deployment.",
  "datePublished": "2026-02-24",
  "publisher": { "@type": "Organization", "name": "Purple Flea", "url": "https://purpleflea.com" },
  "url": "https://purpleflea.com/blog/autonomous-trading-hyperliquid/"
}
</script>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŸ£</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --purple: #A855F7;
  --purple-dim: #7C3AED;
  --purple-glow: rgba(168, 85, 247, 0.3);
  --purple-subtle: rgba(168, 85, 247, 0.08);
  --bg: #09090B;
  --bg-card: rgba(255, 255, 255, 0.03);
  --bg-card-hover: rgba(255, 255, 255, 0.06);
  --border: rgba(255, 255, 255, 0.06);
  --border-hover: rgba(168, 85, 247, 0.3);
  --text: #FAFAFA;
  --text-secondary: #A1A1AA;
  --text-muted: #71717A;
  --radius: 16px;
  --radius-sm: 10px;
}
html { scroll-behavior: smooth; }
body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
body::before { content: ''; position: fixed; inset: 0; z-index: 9999; pointer-events: none; opacity: 0.025; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"); background-repeat: repeat; background-size: 180px; }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(168, 85, 247, 0.3); border-radius: 3px; }
::selection { background: rgba(168, 85, 247, 0.4); color: white; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }

/* NAV */
nav { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; padding: 16px 0; transition: all 0.3s ease; }
nav.scrolled { background: rgba(9, 9, 11, 0.8); backdrop-filter: blur(20px) saturate(1.5); border-bottom: 1px solid var(--border); }
.nav-inner { display: flex; align-items: center; justify-content: space-between; max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.nav-logo { display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 18px; text-decoration: none; color: var(--text); }
.nav-logo-icon { width: 32px; height: 32px; background: linear-gradient(135deg, var(--purple), var(--purple-dim)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 16px; }
.nav-links { display: flex; align-items: center; gap: 32px; list-style: none; }
.nav-links a { color: var(--text-secondary); text-decoration: none; font-size: 14px; font-weight: 450; transition: color 0.2s; }
.nav-links a:hover { color: var(--text); }
.nav-cta { display: inline-flex; align-items: center; gap: 6px; padding: 8px 18px; background: var(--purple); color: white !important; border-radius: 8px; font-weight: 500; font-size: 14px; text-decoration: none; transition: all 0.2s; }
.nav-cta:hover { background: var(--purple-dim); transform: translateY(-1px); }
@media (max-width: 768px) { .nav-links { display: none; } }

/* ARTICLE LAYOUT */
.article-wrapper { max-width: 720px; margin: 0 auto; padding: 120px 24px 80px; }

/* BREADCRUMB */
.breadcrumb { display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-muted); margin-bottom: 32px; }
.breadcrumb a { color: var(--text-muted); text-decoration: none; transition: color 0.2s; }
.breadcrumb a:hover { color: var(--purple); }
.breadcrumb-sep { color: var(--border-hover); }

/* ARTICLE META */
.article-meta { display: flex; align-items: center; gap: 16px; margin-bottom: 28px; flex-wrap: wrap; }
.tag-chip { display: inline-block; padding: 4px 12px; border-radius: 100px; font-size: 11px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; }
.tag-wallets { background: rgba(96,165,250,0.12); color: #60A5FA; border: 1px solid rgba(96,165,250,0.2); }
.tag-trading { background: rgba(34,197,94,0.12); color: #22C55E; border: 1px solid rgba(34,197,94,0.2); }
.tag-casino { background: rgba(168,85,247,0.12); color: var(--purple); border: 1px solid rgba(168,85,247,0.2); }
.article-date { font-size: 13px; color: var(--text-muted); }
.meta-dot { width: 3px; height: 3px; background: var(--text-muted); border-radius: 50%; }

/* ARTICLE TYPOGRAPHY */
.article-title { font-size: clamp(1.9rem, 4vw, 2.8rem); font-weight: 800; letter-spacing: -0.03em; line-height: 1.1; margin-bottom: 40px; }
.article-body { font-size: 1.05rem; line-height: 1.8; color: var(--text-secondary); }
.article-body p { margin-bottom: 1.4em; }
.article-body h2 { font-size: 1.5rem; font-weight: 700; color: var(--text); letter-spacing: -0.02em; margin: 2.4em 0 0.8em; line-height: 1.25; }
.article-body h3 { font-size: 1.15rem; font-weight: 600; color: var(--text); letter-spacing: -0.01em; margin: 1.8em 0 0.6em; }
.article-body a { color: var(--purple); text-decoration: none; border-bottom: 1px solid rgba(168,85,247,0.3); transition: border-color 0.2s; }
.article-body a:hover { border-color: var(--purple); }
.article-body ul, .article-body ol { padding-left: 1.4em; margin-bottom: 1.4em; }
.article-body li { margin-bottom: 0.5em; }
.article-body strong { color: var(--text); font-weight: 600; }
.article-body code { font-family: 'JetBrains Mono', monospace; font-size: 0.85em; background: rgba(168,85,247,0.1); color: var(--purple); padding: 2px 7px; border-radius: 4px; }

/* CODE BLOCK */
.code-block { background: rgba(0,0,0,0.4); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; font-family: 'JetBrains Mono', monospace; font-size: 13px; line-height: 1.7; overflow-x: auto; position: relative; margin: 1.8em 0; }
.code-block .code-header { display: flex; align-items: center; gap: 8px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
.code-dot { width: 12px; height: 12px; border-radius: 50%; }
.code-dot.red { background: #EF4444; }
.code-dot.yellow { background: #FBBF24; }
.code-dot.green { background: #22C55E; }
.code-filename { margin-left: 8px; font-size: 12px; color: var(--text-muted); }
.kw { color: #C084FC; }
.fn { color: #93C5FD; }
.st { color: #86EFAC; }
.cm { color: var(--text-muted); font-style: italic; }
.num { color: #FDE68A; }
.cls { color: #F9A8D4; }
.at { color: #A855F7; }

/* CALLOUT */
.callout { background: var(--purple-subtle); border: 1px solid rgba(168,85,247,0.2); border-left: 3px solid var(--purple); border-radius: var(--radius-sm); padding: 20px 24px; margin: 1.8em 0; }
.callout p { margin: 0; color: var(--text-secondary); font-size: 0.95rem; }
.callout strong { color: var(--purple); }
.callout-warning { background: rgba(251,146,60,0.06); border-color: rgba(251,146,60,0.4); border-left-color: #FB923C; }
.callout-warning p { color: var(--text-secondary); }
.callout-warning strong { color: #FB923C; }

/* ASCII DIAGRAM */
.ascii-diagram { background: rgba(0,0,0,0.4); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; font-family: 'JetBrains Mono', monospace; font-size: 12px; line-height: 1.6; overflow-x: auto; margin: 1.8em 0; color: var(--text-secondary); }

/* ARTICLE DIVIDER */
.article-divider { border: none; height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent); margin: 2.5em 0; }

/* RELATED */
.related-section { margin-top: 3em; padding-top: 2.5em; border-top: 1px solid var(--border); }
.related-section h3 { font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 20px; }
.related-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
@media (max-width: 600px) { .related-grid { grid-template-columns: 1fr; } }
.related-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 20px 24px; text-decoration: none; color: var(--text); display: block; transition: all 0.2s; }
.related-card:hover { border-color: var(--border-hover); background: var(--bg-card-hover); transform: translateY(-2px); }
.related-card .label { font-size: 11px; color: var(--purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px; }
.related-card .title { font-size: 14px; font-weight: 600; line-height: 1.35; }
.related-card .desc { font-size: 13px; color: var(--text-muted); margin-top: 4px; }

/* FOOTER */
footer { padding: 60px 0 40px; border-top: 1px solid var(--border); }
.footer-top { display: grid; grid-template-columns: 1fr 2fr; gap: 60px; margin-bottom: 60px; }
.footer-brand p { color: var(--text-secondary); font-size: 14px; margin-top: 16px; max-width: 260px; line-height: 1.6; }
.footer-columns { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; }
.footer-col h4 { font-size: 13px; font-weight: 600; margin-bottom: 16px; }
.footer-col ul { list-style: none; display: flex; flex-direction: column; gap: 10px; }
.footer-col a { color: var(--text-muted); text-decoration: none; font-size: 13px; transition: color 0.2s; }
.footer-col a:hover { color: var(--text); }
.footer-bottom { display: flex; align-items: center; justify-content: space-between; padding-top: 24px; border-top: 1px solid var(--border); }
.footer-bottom p { color: var(--text-muted); font-size: 13px; }
.footer-social { display: flex; gap: 24px; }
.footer-social a { color: var(--text-muted); text-decoration: none; font-size: 13px; transition: color 0.2s; }
.footer-social a:hover { color: var(--text); }
@media (max-width: 768px) { .footer-top { grid-template-columns: 1fr; gap: 40px; } .footer-columns { grid-template-columns: repeat(2, 1fr); } .footer-bottom { flex-direction: column; gap: 16px; text-align: center; } }
</style>
</head>
<body>

<nav id="navbar">
  <div class="nav-inner">
    <a href="/" class="nav-logo">
      <div class="nav-logo-icon">&#9830;</div>
      Purple Flea
    </a>
    <ul class="nav-links">
      <li><a href="/docs">Docs</a></li>
      <li><a href="/for-agents">For Agents</a></li>
      <li><a href="/integrations">Integrations</a></li>
      <li><a href="/pricing">Pricing</a></li>
      <li><a href="https://wallet.purpleflea.com" target="_blank" class="nav-cta">Get Started &rarr;</a></li>
    </ul>
  </div>
</nav>

<div class="article-wrapper">

  <!-- BREADCRUMB -->
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <a href="/blog/">Blog</a>
    <span class="breadcrumb-sep">/</span>
    <span>Trading</span>
  </nav>

  <!-- META -->
  <div class="article-meta">
    <span class="tag-chip tag-trading">Trading</span>
    <div class="meta-dot"></div>
    <span class="article-date">Feb 24, 2026</span>
    <div class="meta-dot"></div>
    <span class="article-date">8 min read</span>
  </div>

  <!-- TITLE -->
  <h1 class="article-title">The Complete Guide to Autonomous AI Trading</h1>

  <!-- BODY -->
  <div class="article-body">

    <p>Crypto markets run 24 hours a day, 365 days a year. Human traders sleep, get emotional, and miss opportunities. AI agents do none of those things. The combination of always-on execution, consistent rule application, and sub-second reaction times makes autonomous trading agents a genuinely superior tool for executing systematic strategies â€” if they're built correctly.</p>

    <p>This guide walks you through building a production-grade trading agent from scratch: architecture, strategy implementation, risk management, and deployment. We'll use <strong>Hyperliquid</strong> as the execution venue and the <strong>Purple Flea Trading API</strong> as the interface layer between your agent and the order book.</p>

    <h2>Why Hyperliquid for AI Agents</h2>

    <p>Hyperliquid is the dominant on-chain perpetuals exchange as of 2026. For AI agents specifically, it has several properties that no other venue matches:</p>

    <ul>
      <li><strong>On-chain order book.</strong> Every order and fill is recorded on-chain. Your agent has a fully auditable, trustless trade history â€” no reconciliation required.</li>
      <li><strong>No KYC.</strong> Agents don't have passports. Hyperliquid doesn't ask for them. Connect a wallet, deposit funds, trade immediately.</li>
      <li><strong>275 markets.</strong> From BTC-PERP to long-tail altcoins. Your agent can express views across the entire crypto asset class without switching venues.</li>
      <li><strong>Low latency API.</strong> REST and WebSocket endpoints with sub-100ms typical response times. Suitable for momentum and mean-reversion strategies without HFT-level infrastructure.</li>
      <li><strong>Funding rate opportunities.</strong> Perpetual funding rates create systematic arbitrage opportunities that rule-based agents can exploit mechanically.</li>
    </ul>

    <h2>Architecture of a Trading Agent</h2>

    <p>A well-structured trading agent follows a four-stage loop. Each stage has a clear input, output, and failure mode. Keep them as separate functions â€” it makes testing and debugging dramatically easier.</p>

    <div class="ascii-diagram">
  +------------------+     +------------------+     +------------------+     +------------------+
  |   PERCEPTION     | --> |    REASONING     | --> |     ACTION       | --> |     MEMORY       |
  |                  |     |                  |     |                  |     |                  |
  |  - Price feeds   |     |  - Strategy      |     |  - Place orders  |     |  - Trade log     |
  |  - Order book    |     |  - Risk checks   |     |  - Cancel orders |     |  - PnL tracking  |
  |  - Funding rates |     |  - Position size |     |  - Set stops     |     |  - Performance   |
  |  - Portfolio     |     |  - Signal gen.   |     |  - Adjust size   |     |  - Audit trail   |
  +------------------+     +------------------+     +------------------+     +------------------+
            ^                                                                          |
            |________________________ feedback loop __________________________________|
    </div>

    <p>The loop runs on a schedule â€” every minute for momentum strategies, every hour for funding rate plays. The memory stage feeds back into perception on the next tick, so the agent builds up a persistent view of its own performance over time.</p>

    <h2>Getting Started with the Purple Flea Trading API</h2>

    <p>Authentication uses the same API key you got when registering your agent. Every trading call includes your key in the <code>Authorization</code> header.</p>

    <div class="code-block">
      <div class="code-header">
        <div class="code-dot red"></div>
        <div class="code-dot yellow"></div>
        <div class="code-dot green"></div>
        <span class="code-filename">trading_client.py</span>
      </div>
<span class="kw">import</span> os, requests

BASE = <span class="st">"https://api.purpleflea.com"</span>
HEADERS = {<span class="st">"Authorization"</span>: <span class="st">f"Bearer {os.environ['PURPLEFLEA_API_KEY']}"</span>}

<span class="kw">def</span> <span class="fn">get_price</span>(market: <span class="cls">str</span>) -> <span class="cls">float</span>:
    r = requests.get(<span class="st">f"{BASE}/trading/price/{market}"</span>, headers=HEADERS)
    <span class="kw">return</span> <span class="cls">float</span>(r.json()[<span class="st">"mark_price"</span>])

<span class="kw">def</span> <span class="fn">get_funding_rate</span>(market: <span class="cls">str</span>) -> <span class="cls">float</span>:
    r = requests.get(<span class="st">f"{BASE}/trading/funding/{market}"</span>, headers=HEADERS)
    <span class="kw">return</span> <span class="cls">float</span>(r.json()[<span class="st">"rate_8h"</span>])

<span class="cm"># Test the connection</span>
btc_price = get_price(<span class="st">"BTC-PERP"</span>)
<span class="fn">print</span>(<span class="st">f"BTC-PERP mark price: ${btc_price:,.2f}"</span>)
    </div>

    <h2>Your First Trading Strategy: Momentum</h2>

    <p>Momentum is the most intuitive strategy for an AI agent: buy assets that are going up, sell assets that are going down. We'll implement a simple 20-period exponential moving average (EMA) crossover. When price crosses above the EMA, go long. When it crosses below, close the position.</p>

    <div class="code-block">
      <div class="code-header">
        <div class="code-dot red"></div>
        <div class="code-dot yellow"></div>
        <div class="code-dot green"></div>
        <span class="code-filename">momentum_strategy.py</span>
      </div>
<span class="kw">import</span> requests, os
<span class="kw">from</span> collections <span class="kw">import</span> deque

BASE    = <span class="st">"https://api.purpleflea.com"</span>
HEADERS = {<span class="st">"Authorization"</span>: <span class="st">f"Bearer {os.environ['PURPLEFLEA_API_KEY']}"</span>}

prices  = deque(maxlen=<span class="num">20</span>)   <span class="cm"># rolling 20-period window</span>
in_long = <span class="kw">False</span>

<span class="kw">def</span> <span class="fn">compute_ema</span>(data: <span class="cls">list</span>, period: <span class="cls">int</span>) -> <span class="cls">float</span>:
    <span class="kw">if</span> len(data) < period:
        <span class="kw">return</span> sum(data) / len(data)
    k = <span class="num">2</span> / (period + <span class="num">1</span>)
    ema = data[<span class="num">0</span>]
    <span class="kw">for</span> price <span class="kw">in</span> data[<span class="num">1</span>:]:
        ema = price * k + ema * (<span class="num">1</span> - k)
    <span class="kw">return</span> ema

<span class="kw">def</span> <span class="fn">run_tick</span>(market=<span class="st">"BTC-PERP"</span>, size_usd=<span class="num">100</span>):
    <span class="kw">global</span> in_long

    <span class="cm"># 1. Perception: fetch current price</span>
    r = requests.get(<span class="st">f"{BASE}/trading/price/{market}"</span>, headers=HEADERS)
    price = <span class="cls">float</span>(r.json()[<span class="st">"mark_price"</span>])
    prices.append(price)

    <span class="kw">if</span> len(prices) < <span class="num">5</span>:
        <span class="kw">return</span>  <span class="cm"># not enough data yet</span>

    <span class="cm"># 2. Reasoning: compute signal</span>
    ema = <span class="fn">compute_ema</span>(list(prices), <span class="num">20</span>)
    above_ema = price > ema

    <span class="cm"># 3. Action: open or close position</span>
    <span class="kw">if</span> above_ema <span class="kw">and not</span> in_long:
        requests.post(<span class="st">f"{BASE}/trading/order"</span>, headers=HEADERS, json={
            <span class="st">"market"</span>:    market,
            <span class="st">"side"</span>:      <span class="st">"buy"</span>,
            <span class="st">"type"</span>:      <span class="st">"market"</span>,
            <span class="st">"size_usd"</span>:  size_usd,
            <span class="st">"leverage"</span>:  <span class="num">5</span>,
        })
        in_long = <span class="kw">True</span>
        <span class="fn">print</span>(<span class="st">f"LONG {market} @ ${price:.2f} | EMA={ema:.2f}"</span>)

    <span class="kw">elif not</span> above_ema <span class="kw">and</span> in_long:
        requests.post(<span class="st">f"{BASE}/trading/close"</span>, headers=HEADERS,
                      json={<span class="st">"market"</span>: market})
        in_long = <span class="kw">False</span>
        <span class="fn">print</span>(<span class="st">f"CLOSED {market} @ ${price:.2f}"</span>)
    </div>

    <h2>Position Sizing and Risk Management</h2>

    <p>A strategy that opens profitable trades but sizes them incorrectly will still blow up. Position sizing is arguably more important than the signal itself. There are three approaches worth knowing:</p>

    <h3>Fixed Fractional (Recommended for Beginners)</h3>
    <p>Risk a fixed percentage of account equity per trade. The classic number is <strong>2% maximum</strong>. If your account has $10,000 and your stop loss is 5% away, your maximum position size is:</p>
    <p><code>size = (equity * 0.02) / stop_distance = ($10,000 * 0.02) / 0.05 = $4,000</code></p>

    <h3>Kelly Criterion (Optimal Growth)</h3>
    <p>The Kelly formula sizes positions to maximize long-run geometric growth. For a strategy with win rate <code>w</code> and win/loss ratio <code>r</code>:</p>
    <p><code>kelly_fraction = w - (1 - w) / r</code></p>
    <p>Most practitioners use <strong>half-Kelly</strong> to account for estimation error in <code>w</code> and <code>r</code>. Never bet full Kelly in live trading.</p>

    <div class="code-block">
      <div class="code-header">
        <div class="code-dot red"></div>
        <div class="code-dot yellow"></div>
        <div class="code-dot green"></div>
        <span class="code-filename">risk.py</span>
      </div>
<span class="kw">def</span> <span class="fn">fixed_fractional_size</span>(equity: <span class="cls">float</span>, risk_pct: <span class="cls">float</span>, stop_pct: <span class="cls">float</span>) -> <span class="cls">float</span>:
    <span class="st">"""Return USD position size. risk_pct=0.02 means risk 2% of equity."""</span>
    max_loss_usd = equity * risk_pct
    <span class="kw">return</span> max_loss_usd / stop_pct

<span class="kw">def</span> <span class="fn">half_kelly_size</span>(equity: <span class="cls">float</span>, win_rate: <span class="cls">float</span>, avg_win: <span class="cls">float</span>, avg_loss: <span class="cls">float</span>) -> <span class="cls">float</span>:
    <span class="st">"""Return USD position size using half-Kelly criterion."""</span>
    r = avg_win / avg_loss
    kelly = win_rate - (<span class="num">1</span> - win_rate) / r
    half_kelly = kelly / <span class="num">2</span>
    <span class="kw">return</span> equity * <span class="fn">max</span>(<span class="num">0</span>, half_kelly)  <span class="cm"># never short</span>
    </div>

    <div class="callout callout-warning">
      <p><strong>Hard rules:</strong> Never risk more than 2% of account equity on a single trade. Set a maximum drawdown stop at 20% â€” if the account falls by 20% from its peak, halt all trading and review the strategy. Leverage above 10x dramatically increases the chance of liquidation on normal market volatility.</p>
    </div>

    <h2>Funding Rate Arbitrage</h2>

    <p>Perpetual futures don't expire, so they stay anchored to spot price through a <strong>funding rate</strong> mechanism: longs pay shorts (or vice versa) every 8 hours. When funding is very positive, longs are paying shorts. A delta-neutral strategy can capture this payment by holding long spot and short perp simultaneously.</p>

    <div class="code-block">
      <div class="code-header">
        <div class="code-dot red"></div>
        <div class="code-dot yellow"></div>
        <div class="code-dot green"></div>
        <span class="code-filename">funding_arb.py</span>
      </div>
<span class="cm"># Only enter when 8h funding rate > 0.05% (annualizes to ~54%)</span>
FUNDING_THRESHOLD = <span class="num">0.0005</span>

<span class="kw">def</span> <span class="fn">check_funding_arb</span>(market: <span class="cls">str</span>):
    r = requests.get(<span class="st">f"{BASE}/trading/funding/{market}"</span>, headers=HEADERS)
    rate = <span class="cls">float</span>(r.json()[<span class="st">"rate_8h"</span>])

    <span class="kw">if</span> rate > FUNDING_THRESHOLD:
        size_usd = <span class="num">500</span>

        <span class="cm"># Short the perpetual (will receive funding payments)</span>
        requests.post(<span class="st">f"{BASE}/trading/order"</span>, headers=HEADERS, json={
            <span class="st">"market"</span>:   market,
            <span class="st">"side"</span>:     <span class="st">"sell"</span>,
            <span class="st">"type"</span>:     <span class="st">"market"</span>,
            <span class="st">"size_usd"</span>: size_usd,
            <span class="st">"leverage"</span>: <span class="num">1</span>,
        })

        <span class="cm"># Buy equivalent spot (hedge the delta)</span>
        spot = market.replace(<span class="st">"-PERP"</span>, <span class="st">""</span>)
        requests.post(<span class="st">f"{BASE}/wallet/swap"</span>, headers=HEADERS, json={
            <span class="st">"from_token"</span>:  <span class="st">"USDC"</span>,
            <span class="st">"to_token"</span>:    spot,
            <span class="st">"from_amount"</span>: <span class="cls">str</span>(size_usd),
        })
        <span class="fn">print</span>(<span class="st">f"Opened funding arb on {market} | rate={rate:.4%}"</span>)
    </div>

    <h2>Production Deployment</h2>

    <p>A trading agent running locally on your laptop will miss ticks when your computer sleeps. Production deployment requires a dedicated process with monitoring, alerting, and automatic restarts.</p>

    <p><strong>Process management with PM2:</strong> For Node/Python hybrid setups, PM2 handles restarts, log rotation, and uptime monitoring. For ESM Python projects, use a <code>.cjs</code> ecosystem config with <code>module.exports</code> and point PM2 at your built entrypoint. Set the PORT and API key via the <code>env</code> block â€” never in the source.</p>

    <p><strong>Webhook alerts:</strong> Subscribe to Purple Flea's <code>position.liquidation_warning</code> and <code>position.liquidated</code> webhook events. Route these to a Slack channel or PagerDuty so you're notified immediately if your agent is at risk.</p>

    <p><strong>Database logging:</strong> Write every order, fill, and funding payment to a database. SQLite is sufficient for a single agent; Postgres if you're running multiple. Log the raw API response alongside your computed signal so you can replay and debug any trade decision after the fact.</p>

    <p><strong>Real-time PnL monitoring:</strong> Call <code>GET /trading/positions</code> on every tick and emit the total unrealized PnL to a metrics system (Prometheus, Datadog, or even a simple CSV). Set alerts for drawdown thresholds before they become liquidation events.</p>

    <h2>Common Mistakes</h2>

    <p>These are the mistakes that blow up most first-generation trading agents, in roughly descending order of damage:</p>

    <ol>
      <li><strong>Over-leveraging.</strong> 50x leverage sounds like 50x profit. It also means a 2% adverse move liquidates you. Start with 1-5x. Add leverage only after a strategy is proven at low leverage over many trades.</li>
      <li><strong>Ignoring funding rates.</strong> A profitable momentum trade can be eaten alive by funding payments if you're on the wrong side. Always check the current funding rate before opening a position and factor it into your PnL expectation.</li>
      <li><strong>No stop losses.</strong> An agent without stop losses will hold a losing trade indefinitely. Every trade must have a stop loss specified at the time of order entry, not as a separate follow-up call.</li>
      <li><strong>Over-trading on low signal quality.</strong> The API has no transaction costs beyond taker fees, so it's tempting to trade constantly. But each trade has a bid-ask spread and a fee. A strategy that trades 100 times per hour needs a very strong edge per trade to be net positive.</li>
      <li><strong>Not accounting for latency.</strong> By the time your agent reads a price, computes a signal, and submits an order, the market has moved. Test your end-to-end latency and factor it into signal thresholds.</li>
    </ol>

    <hr class="article-divider">

    <p>A trading agent built on these foundations â€” clean architecture, disciplined position sizing, funding-aware execution, and robust production deployment â€” is genuinely capable of systematic alpha extraction in 24/7 crypto markets.</p>

    <p>The <a href="/trading-api/">Purple Flea Trading API reference</a> covers order types (limit, stop, TP/SL bracket orders), WebSocket price feeds for real-time data, position management endpoints, and fee schedules. Start with the <a href="/blog/crypto-wallet-for-ai-agents/">wallet integration guide</a> if you haven't set up your agent's wallet yet â€” your trading collateral needs to be in the agent's wallet before you can deposit to Hyperliquid.</p>

    <p>Ready to build? <a href="https://wallet.purpleflea.com" target="_blank">Register your agent</a> and get your API key â€” then come back here and run your first momentum tick.</p>

    <!-- RELATED ARTICLES -->
    <div class="related-section">
      <h3>Related Articles</h3>
      <div class="related-grid">
        <a href="/blog/crypto-wallet-for-ai-agents/" class="related-card">
          <div class="label">Wallets</div>
          <div class="title">How to Give Your AI Agent a Crypto Wallet in 60 Seconds</div>
          <div class="desc">BIP-39 HD wallet integration for LangChain and CrewAI agents.</div>
        </a>
        <a href="/blog/provably-fair-gambling-ai-agents/" class="related-card">
          <div class="label">Casino</div>
          <div class="title">Why AI Agents Need Cryptographic Randomness</div>
          <div class="desc">How provably fair algorithms protect gambling agents from cheating.</div>
        </a>
      </div>
    </div>

  </div>
</div>

<footer>
  <div class="container">
    <div class="footer-top">
      <div class="footer-brand">
        <a href="/" class="nav-logo">
          <div class="nav-logo-icon">&#9830;</div>
          Purple Flea
        </a>
        <p>AI-first infrastructure for autonomous agents. Built for machines, verified by math.</p>
      </div>
      <div class="footer-columns">
        <div class="footer-col">
          <h4>Products</h4>
          <ul>
            <li><a href="https://casino.purpleflea.com" target="_blank">Casino</a></li>
            <li><a href="https://trading.purpleflea.com" target="_blank">Trading</a></li>
            <li><a href="https://wallet.purpleflea.com" target="_blank">Wallet</a></li>
            <li><a href="https://domains.purpleflea.com" target="_blank">Domains</a></li>
            <li><a href="/crypto-wallet-api/">Wallet API Docs</a></li>
            <li><a href="/trading-api/">Trading API Docs</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Developers</h4>
          <ul>
            <li><a href="/docs">Docs</a></li>
            <li><a href="/for-agents">For Agents</a></li>
            <li><a href="/for-langchain/">LangChain</a></li>
            <li><a href="/for-crewai/">CrewAI</a></li>
            <li><a href="/for-claude/">Claude / MCP</a></li>
            <li><a href="/quick-start">Quick Start</a></li>
            <li><a href="/openapi">OpenAPI</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Company</h4>
          <ul>
            <li><a href="/pricing">Pricing</a></li>
            <li><a href="/stats">Stats</a></li>
            <li><a href="/changelog">Changelog</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li><a href="mailto:hello@purpleflea.com">Contact</a></li>
            <li><a href="https://github.com/Purple-flea" target="_blank">GitHub</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2026 Purple Flea. All rights reserved.</p>
      <div class="footer-social">
        <a href="https://github.com/Purple-flea" target="_blank">GitHub</a>
        <a href="https://x.com/purpleflea" target="_blank">X / Twitter</a>
      </div>
    </div>
  </div>
</footer>

<script>
const navbar = document.getElementById('navbar');
window.addEventListener('scroll', () => { navbar.classList.toggle('scrolled', window.scrollY > 50); });
</script>
</body>
</html>
