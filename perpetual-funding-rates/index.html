<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perpetual Funding Rates Explained | Purple Flea Trading API</title>
  <meta name="description" content="A technical guide to perpetual futures funding rates for AI agents. Learn how funding rates work, how to interpret them, and how to build funding arbitrage strategies using the Purple Flea Trading API on Hyperliquid." />
  <meta name="keywords" content="perpetual futures funding rates, hyperliquid funding rate, crypto perpetuals, funding arbitrage, AI trading agent, perpetual swap funding, trading API, crypto derivatives" />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="Purple Flea" />
  <link rel="canonical" href="https://purpleflea.com/perpetual-funding-rates" />

  <!-- Open Graph -->
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Perpetual Funding Rates Explained | Purple Flea Trading API" />
  <meta property="og:description" content="A technical guide to perpetual futures funding rates for AI agents. Learn how funding rates work on Hyperliquid and how to build funding arbitrage strategies." />
  <meta property="og:url" content="https://purpleflea.com/perpetual-funding-rates" />
  <meta property="og:site_name" content="Purple Flea" />
  <meta property="og:locale" content="en_US" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Perpetual Funding Rates Explained | Purple Flea Trading API" />
  <meta name="twitter:description" content="Technical guide to perpetual futures funding rates for AI trading agents. Strategies, formulas, and live code examples." />
  <meta name="twitter:site" content="@purpleflea" />

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "Perpetual Funding Rates Explained for AI Trading Agents",
    "description": "A technical guide to perpetual futures funding rates for AI agents. Learn how funding rates work, how to interpret them, and how to build funding arbitrage strategies using the Purple Flea Trading API on Hyperliquid.",
    "url": "https://purpleflea.com/perpetual-funding-rates",
    "datePublished": "2026-02-27",
    "dateModified": "2026-02-27",
    "author": {
      "@type": "Organization",
      "name": "Purple Flea",
      "url": "https://purpleflea.com"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Purple Flea",
      "url": "https://purpleflea.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://purpleflea.com/logo.png"
      }
    },
    "about": [
      { "@type": "Thing", "name": "Perpetual futures" },
      { "@type": "Thing", "name": "Funding rates" },
      { "@type": "Thing", "name": "Cryptocurrency derivatives" },
      { "@type": "Thing", "name": "Algorithmic trading" }
    ],
    "audience": {
      "@type": "Audience",
      "audienceType": "Developers, AI Agents, Algorithmic Traders"
    },
    "isPartOf": {
      "@type": "WebSite",
      "name": "Purple Flea",
      "url": "https://purpleflea.com"
    }
  }
  </script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />

  <style>
    /* â”€â”€ Design Tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :root {
      --purple: #A855F7;
      --purple-dim: #7C3AED;
      --purple-glow: rgba(168, 85, 247, 0.15);
      --purple-subtle: rgba(168, 85, 247, 0.08);
      --green: #22C55E;
      --green-subtle: rgba(34, 197, 94, 0.1);
      --red: #EF4444;
      --red-subtle: rgba(239, 68, 68, 0.1);
      --yellow: #EAB308;
      --yellow-subtle: rgba(234, 179, 8, 0.1);
      --bg: #09090B;
      --bg-elevated: #0F0F12;
      --text: #FAFAFA;
      --text-secondary: #A1A1AA;
      --text-muted: #71717A;
      --border: rgba(255, 255, 255, 0.06);
      --border-purple: rgba(168, 85, 247, 0.3);
      --bg-card: rgba(255, 255, 255, 0.03);
      --radius: 16px;
      --radius-sm: 10px;
      --radius-xs: 6px;
    }

    /* â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }
    a { color: var(--purple); text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* â”€â”€ Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      background: rgba(9, 9, 11, 0.85);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-bottom: 1px solid var(--border);
    }
    .nav-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 17px;
      color: var(--text);
      text-decoration: none;
    }
    .nav-logo:hover { text-decoration: none; }
    .nav-logo-icon {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, var(--purple-dim), var(--purple));
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }
    .nav-links {
      display: flex;
      align-items: center;
      gap: 8px;
      list-style: none;
    }
    .nav-links a {
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 500;
      padding: 6px 12px;
      border-radius: var(--radius-xs);
      transition: color 0.15s, background 0.15s;
      text-decoration: none;
    }
    .nav-links a:hover {
      color: var(--text);
      background: var(--bg-card);
      text-decoration: none;
    }
    .nav-cta {
      background: var(--purple) !important;
      color: #fff !important;
      padding: 8px 16px !important;
      border-radius: var(--radius-xs) !important;
      font-weight: 600 !important;
      transition: background 0.15s, opacity 0.15s !important;
    }
    .nav-cta:hover {
      background: var(--purple-dim) !important;
      text-decoration: none !important;
    }
    .nav-mobile-toggle {
      display: none;
      background: none;
      border: none;
      color: var(--text);
      font-size: 22px;
      cursor: pointer;
      padding: 4px;
    }

    /* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page-wrapper {
      max-width: 860px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .hero {
      padding: 120px 0 64px;
      text-align: center;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--purple-subtle);
      border: 1px solid var(--border-purple);
      color: var(--purple);
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      padding: 5px 12px;
      border-radius: 999px;
      margin-bottom: 24px;
    }
    .hero h1 {
      font-size: clamp(32px, 6vw, 52px);
      font-weight: 800;
      line-height: 1.15;
      letter-spacing: -0.03em;
      background: linear-gradient(135deg, var(--text) 40%, var(--purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 20px;
    }
    .hero-subtitle {
      font-size: 18px;
      color: var(--text-secondary);
      max-width: 600px;
      margin: 0 auto 40px;
      line-height: 1.7;
    }
    .hero-meta {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 24px;
      font-size: 13px;
      color: var(--text-muted);
      flex-wrap: wrap;
    }
    .hero-meta span {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .hero-meta .dot {
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: var(--text-muted);
      display: inline-block;
    }

    /* â”€â”€ TOC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .toc {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 28px 32px;
      margin-bottom: 48px;
    }
    .toc-title {
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 16px;
    }
    .toc ol {
      padding-left: 20px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px 32px;
    }
    .toc li {
      font-size: 14px;
      color: var(--text-secondary);
    }
    .toc li a {
      color: var(--text-secondary);
      transition: color 0.15s;
    }
    .toc li a:hover {
      color: var(--purple);
      text-decoration: none;
    }

    /* â”€â”€ Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .section {
      margin-bottom: 64px;
    }
    .section-anchor {
      display: block;
      height: 80px;
      margin-top: -80px;
      visibility: hidden;
      pointer-events: none;
    }
    .section h2 {
      font-size: clamp(22px, 4vw, 28px);
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 16px;
      color: var(--text);
    }
    .section h3 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--text);
    }
    .section p {
      color: var(--text-secondary);
      margin-bottom: 16px;
      line-height: 1.75;
      font-size: 15px;
    }
    .section p:last-child { margin-bottom: 0; }
    .divider {
      height: 1px;
      background: var(--border);
      margin: 64px 0;
    }

    /* â”€â”€ Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 28px;
      margin-bottom: 16px;
    }
    .card-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 24px;
    }
    .card-positive {
      border-color: rgba(34, 197, 94, 0.2);
      background: linear-gradient(135deg, var(--green-subtle), transparent);
    }
    .card-negative {
      border-color: rgba(239, 68, 68, 0.2);
      background: linear-gradient(135deg, var(--red-subtle), transparent);
    }
    .card-purple {
      border-color: var(--border-purple);
      background: linear-gradient(135deg, var(--purple-subtle), transparent);
    }
    .card-warning {
      border-color: rgba(234, 179, 8, 0.25);
      background: linear-gradient(135deg, var(--yellow-subtle), transparent);
    }
    .card-label {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: 10px;
    }
    .card-label.green { color: var(--green); }
    .card-label.red { color: var(--red); }
    .card-label.purple { color: var(--purple); }
    .card-label.yellow { color: var(--yellow); }
    .card h3 { margin-bottom: 8px; }
    .card p { font-size: 14px; margin-bottom: 0; }

    /* â”€â”€ Formula Box â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .formula-box {
      background: var(--bg-elevated);
      border: 1px solid var(--border-purple);
      border-radius: var(--radius);
      padding: 32px;
      margin: 28px 0;
      text-align: center;
    }
    .formula-box .formula-label {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--purple);
      margin-bottom: 20px;
    }
    .formula-main {
      font-family: 'JetBrains Mono', monospace;
      font-size: clamp(13px, 2.5vw, 16px);
      color: var(--text);
      background: rgba(0, 0, 0, 0.3);
      border-radius: var(--radius-sm);
      padding: 20px 24px;
      margin-bottom: 20px;
      line-height: 2;
      display: inline-block;
      min-width: 60%;
      text-align: left;
    }
    .formula-terms {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin-top: 16px;
      text-align: left;
    }
    .formula-term {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 12px 16px;
    }
    .formula-term .term-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      color: var(--purple);
      font-weight: 600;
      margin-bottom: 4px;
    }
    .formula-term .term-desc {
      font-size: 12px;
      color: var(--text-secondary);
    }

    /* â”€â”€ Code Blocks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .code-block {
      background: #0D0D10;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      margin: 24px 0;
    }
    .code-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.02);
      border-bottom: 1px solid var(--border);
    }
    .code-lang {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .code-lang::before {
      content: '';
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--purple);
    }
    .code-dots {
      display: flex;
      gap: 6px;
    }
    .code-dots span {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }
    .code-dots .dot-red { background: #FF5F57; }
    .code-dots .dot-yellow { background: #FEBC2E; }
    .code-dots .dot-green { background: #28C840; }
    .code-block pre {
      padding: 24px;
      overflow-x: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.75;
      color: #E4E4E7;
    }
    .code-block pre .c { color: #52525B; font-style: italic; } /* comment */
    .code-block pre .kw { color: #C084FC; }  /* keyword */
    .code-block pre .fn { color: #60A5FA; }  /* function */
    .code-block pre .st { color: #86EFAC; }  /* string */
    .code-block pre .nm { color: #FCA5A5; }  /* number */
    .code-block pre .op { color: #A1A1AA; }  /* operator */
    .code-block pre .hl { background: rgba(168, 85, 247, 0.12); display: block; margin: 0 -24px; padding: 0 24px; }

    /* â”€â”€ JSON Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .json-block {
      background: #0D0D10;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      margin: 16px 0;
    }
    .json-header {
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.02);
      border-bottom: 1px solid var(--border);
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .json-header .status-200 {
      background: var(--green-subtle);
      color: var(--green);
      border: 1px solid rgba(34, 197, 94, 0.2);
      border-radius: 4px;
      padding: 2px 7px;
      font-size: 10px;
    }
    .json-block pre {
      padding: 20px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.7;
      overflow-x: auto;
    }
    .json-key { color: #C084FC; }
    .json-str { color: #86EFAC; }
    .json-num { color: #FCA5A5; }
    .json-bool { color: #60A5FA; }
    .json-comment { color: #52525B; font-style: italic; }

    /* â”€â”€ Rate Indicator â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .rate-table {
      width: 100%;
      border-collapse: collapse;
      margin: 24px 0;
      font-size: 14px;
    }
    .rate-table th {
      text-align: left;
      padding: 12px 16px;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-muted);
      border-bottom: 1px solid var(--border);
    }
    .rate-table td {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      color: var(--text-secondary);
      vertical-align: middle;
    }
    .rate-table tr:last-child td { border-bottom: none; }
    .rate-table tr:hover td { background: var(--bg-card); }
    .rate-pill {
      display: inline-flex;
      align-items: center;
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      font-weight: 600;
      padding: 3px 10px;
      border-radius: 999px;
    }
    .rate-pill.positive { background: var(--green-subtle); color: var(--green); border: 1px solid rgba(34, 197, 94, 0.2); }
    .rate-pill.negative { background: var(--red-subtle); color: var(--red); border: 1px solid rgba(239, 68, 68, 0.2); }
    .rate-pill.neutral { background: rgba(161, 161, 170, 0.08); color: var(--text-muted); border: 1px solid var(--border); }

    /* â”€â”€ Callout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .callout {
      display: flex;
      gap: 14px;
      padding: 18px 20px;
      border-radius: var(--radius-sm);
      margin: 20px 0;
      font-size: 14px;
      line-height: 1.65;
    }
    .callout-icon { font-size: 18px; flex-shrink: 0; margin-top: 1px; }
    .callout-text { color: var(--text-secondary); }
    .callout-text strong { color: var(--text); }
    .callout.info { background: var(--purple-subtle); border: 1px solid var(--border-purple); }
    .callout.warning { background: var(--yellow-subtle); border: 1px solid rgba(234, 179, 8, 0.25); }
    .callout.danger { background: var(--red-subtle); border: 1px solid rgba(239, 68, 68, 0.2); }
    .callout.success { background: var(--green-subtle); border: 1px solid rgba(34, 197, 94, 0.2); }

    /* â”€â”€ Timeline / Steps â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .steps {
      position: relative;
      padding-left: 32px;
      margin: 24px 0;
    }
    .steps::before {
      content: '';
      position: absolute;
      left: 10px;
      top: 8px;
      bottom: 8px;
      width: 1px;
      background: var(--border);
    }
    .step {
      position: relative;
      margin-bottom: 28px;
    }
    .step:last-child { margin-bottom: 0; }
    .step-dot {
      position: absolute;
      left: -27px;
      top: 4px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--purple);
      border: 2px solid var(--bg);
      box-shadow: 0 0 0 1px var(--purple);
    }
    .step h4 {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 6px;
    }
    .step p {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 0;
    }

    /* â”€â”€ Risk List â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .risk-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin: 16px 0;
    }
    .risk-list li {
      display: flex;
      gap: 14px;
      padding: 16px 20px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
    }
    .risk-list li .risk-icon {
      font-size: 18px;
      flex-shrink: 0;
      margin-top: 1px;
    }
    .risk-list li strong { color: var(--text); display: block; margin-bottom: 3px; }

    /* â”€â”€ Endpoint â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .endpoint {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 14px 20px;
      margin: 16px 0;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      overflow-x: auto;
    }
    .method-badge {
      background: var(--green-subtle);
      color: var(--green);
      border: 1px solid rgba(34, 197, 94, 0.2);
      border-radius: 4px;
      padding: 2px 8px;
      font-size: 11px;
      font-weight: 700;
      flex-shrink: 0;
    }
    .endpoint-path { color: var(--text); }
    .endpoint-desc {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 8px;
      font-family: 'Inter', sans-serif;
    }

    /* â”€â”€ CTA Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .cta-section {
      text-align: center;
      padding: 72px 0 80px;
    }
    .cta-box {
      background: linear-gradient(135deg, rgba(124, 58, 237, 0.12), rgba(168, 85, 247, 0.06));
      border: 1px solid var(--border-purple);
      border-radius: var(--radius);
      padding: 56px 48px;
      position: relative;
      overflow: hidden;
    }
    .cta-box::before {
      content: '';
      position: absolute;
      top: -80px;
      left: 50%;
      transform: translateX(-50%);
      width: 320px;
      height: 320px;
      background: radial-gradient(circle, rgba(168, 85, 247, 0.12) 0%, transparent 70%);
      pointer-events: none;
    }
    .cta-box h2 {
      font-size: clamp(24px, 4vw, 34px);
      font-weight: 800;
      letter-spacing: -0.03em;
      margin-bottom: 16px;
    }
    .cta-box p {
      color: var(--text-secondary);
      font-size: 16px;
      margin-bottom: 32px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }
    .btn-primary {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--purple);
      color: #fff;
      font-weight: 700;
      font-size: 15px;
      padding: 14px 28px;
      border-radius: var(--radius-sm);
      border: none;
      cursor: pointer;
      transition: background 0.15s, transform 0.1s;
      text-decoration: none;
    }
    .btn-primary:hover {
      background: var(--purple-dim);
      transform: translateY(-1px);
      text-decoration: none;
      color: #fff;
    }
    .btn-secondary {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: transparent;
      color: var(--text-secondary);
      font-weight: 600;
      font-size: 15px;
      padding: 14px 28px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      cursor: pointer;
      transition: border-color 0.15s, color 0.15s;
      text-decoration: none;
      margin-left: 12px;
    }
    .btn-secondary:hover {
      border-color: var(--purple);
      color: var(--text);
      text-decoration: none;
    }

    /* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    footer {
      border-top: 1px solid var(--border);
      padding: 32px 24px;
      text-align: center;
      font-size: 13px;
      color: var(--text-muted);
    }
    footer a { color: var(--text-muted); }
    footer a:hover { color: var(--purple); }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 768px) {
      nav { padding: 0 16px; }
      .nav-links { display: none; }
      .nav-links.open {
        display: flex;
        flex-direction: column;
        position: fixed;
        top: 64px;
        left: 0;
        right: 0;
        background: rgba(9, 9, 11, 0.98);
        border-bottom: 1px solid var(--border);
        padding: 16px;
        gap: 4px;
        backdrop-filter: blur(16px);
      }
      .nav-links.open a { display: block; padding: 10px 14px; }
      .nav-mobile-toggle { display: block; }
      .page-wrapper { padding: 0 16px; }
      .hero { padding: 96px 0 48px; }
      .toc ol { grid-template-columns: 1fr; }
      .card-grid { grid-template-columns: 1fr; }
      .formula-main { font-size: 11px; padding: 14px 16px; }
      .cta-box { padding: 40px 24px; }
      .btn-secondary { margin-left: 0; margin-top: 12px; }
      .cta-box .btn-wrap { display: flex; flex-direction: column; align-items: center; gap: 12px; }
      .rate-table { font-size: 13px; }
      .rate-table th, .rate-table td { padding: 10px 12px; }
      .code-block pre { font-size: 11.5px; padding: 16px; }
    }
    @media (max-width: 480px) {
      .hero h1 { font-size: 28px; }
      .hero-subtitle { font-size: 15px; }
    }
  </style>
</head>
<body>

<!-- â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<nav>
  <a class="nav-logo" href="https://purpleflea.com">
    <div class="nav-logo-icon">ðŸŸ£</div>
    Purple Flea
  </a>
  <ul class="nav-links" id="navLinks">
    <li><a href="https://purpleflea.com/products">Products</a></li>
    <li><a href="https://purpleflea.com/docs">Docs</a></li>
    <li><a href="https://purpleflea.com/guides">Guides</a></li>
    <li><a href="https://purpleflea.com/pricing">Pricing</a></li>
    <li><a class="nav-cta" href="https://purpleflea.com/api-key">Get API Key</a></li>
  </ul>
  <button class="nav-mobile-toggle" id="mobileToggle" aria-label="Toggle navigation">&#9776;</button>
</nav>

<!-- â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<main>
<div class="page-wrapper">
  <section class="hero">
    <div class="badge">Trading Guide</div>
    <h1>Perpetual Funding Rates Explained</h1>
    <p class="hero-subtitle">
      Everything an AI agent needs to know about funding rates on perpetual futures markets â€” how they work, how to read them, and how to profit from them using the Purple Flea Trading API on Hyperliquid.
    </p>
    <div class="hero-meta">
      <span>Hyperliquid</span>
      <span class="dot"></span>
      <span>AI Agents</span>
      <span class="dot"></span>
      <span>Updated Feb 2026</span>
      <span class="dot"></span>
      <span>15 min read</span>
    </div>
  </section>

  <!-- â”€â”€ Table of Contents â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <nav class="toc" aria-label="Table of contents">
    <div class="toc-title">Table of Contents</div>
    <ol>
      <li><a href="#what-are-funding-rates">What Are Funding Rates?</a></li>
      <li><a href="#how-it-works">How the Mechanism Works</a></li>
      <li><a href="#formula">The Funding Rate Formula</a></li>
      <li><a href="#for-ai-agents">Signals for AI Agents</a></li>
      <li><a href="#hyperliquid">Hyperliquid &amp; Purple Flea API</a></li>
      <li><a href="#code-example">Python Agent Code Example</a></li>
      <li><a href="#historical-context">Historical Context</a></li>
      <li><a href="#risks">Risk Warnings</a></li>
    </ol>
  </nav>

  <!-- â”€â”€ Section 1: What Are Funding Rates â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="section" id="what-are-funding-rates-section">
    <span class="section-anchor" id="what-are-funding-rates"></span>
    <h2>What Are Funding Rates?</h2>
    <p>
      A <strong>perpetual futures contract</strong> is a derivative that lets traders take leveraged long or short positions on an asset without an expiry date. Unlike traditional futures, perpetuals never settle â€” they can be held indefinitely. This creates a problem: without an expiry date forcing convergence, the perpetual price can drift significantly from the underlying spot price.
    </p>
    <p>
      <strong>Funding rates</strong> are the mechanism that solves this. Periodically, traders on the winning side of a divergence pay traders on the losing side, creating a financial incentive for the market to self-correct. If the perpetual is trading above spot, longs pay shorts, making it more expensive to hold long positions and more attractive to hold short ones â€” which pushes the perpetual price back toward spot.
    </p>

    <div class="callout info">
      <div class="callout-icon">&#9432;</div>
      <div class="callout-text">
        <strong>Key principle:</strong> Funding rates are peer-to-peer transfers between traders â€” the exchange does not collect them. If you are on the receiving side of a funding payment, it is pure income on your open position.
      </div>
    </div>

    <p>
      On Hyperliquid (the exchange underlying the Purple Flea Trading API), funding is settled every <strong>8 hours</strong>, at 00:00, 08:00, and 16:00 UTC. At each settlement, the funding rate is applied to all open positions: traders holding positions in the direction that the market is leaning pay traders holding opposing positions.
    </p>

    <div class="card-grid">
      <div class="card card-positive">
        <div class="card-label green">Positive Rate</div>
        <h3>Longs Pay Shorts</h3>
        <p>The perpetual is trading above spot. The market is net bullish. Long holders pay a percentage of their position value to short holders every 8 hours.</p>
      </div>
      <div class="card card-negative">
        <div class="card-label red">Negative Rate</div>
        <h3>Shorts Pay Longs</h3>
        <p>The perpetual is trading below spot. The market is net bearish. Short holders pay a percentage of their position value to long holders every 8 hours.</p>
      </div>
    </div>
  </section>

  <div class="divider"></div>

  <!-- â”€â”€ Section 2: How It Works â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="section" id="how-it-works-section">
    <span class="section-anchor" id="how-it-works"></span>
    <h2>How the Mechanism Works</h2>
    <p>
      Understanding the funding mechanism step by step is critical for any agent that operates in perpetuals markets. The flow is straightforward:
    </p>

    <div class="steps">
      <div class="step">
        <div class="step-dot"></div>
        <h4>1. Price Divergence Appears</h4>
        <p>The perpetual contract price deviates from the index price (a volume-weighted average of the asset's spot price across major exchanges). The difference â€” called the <em>premium</em> â€” feeds directly into the funding rate calculation.</p>
      </div>
      <div class="step">
        <div class="step-dot"></div>
        <h4>2. Funding Rate Is Calculated</h4>
        <p>Every funding period, an 8-hour time-weighted average of the premium index is computed. An interest rate component (usually small) is added. The result is the funding rate expressed as a percentage, typically displayed as an 8-hour rate (e.g., +0.01%).</p>
      </div>
      <div class="step">
        <div class="step-dot"></div>
        <h4>3. Settlement at 00:00, 08:00, 16:00 UTC</h4>
        <p>At each 8-hour interval, the exchange automatically debits and credits open positions. If you hold a $10,000 long position and the rate is +0.05%, you pay $5 to short holders. If you hold a short, you receive $5.</p>
      </div>
      <div class="step">
        <div class="step-dot"></div>
        <h4>4. Price Convergence Is Incentivized</h4>
        <p>Persistently high positive rates make longs expensive and attract new short sellers (who receive funding). This selling pressure on the perpetual closes the gap between the perpetual price and the spot index, reducing the rate over time.</p>
      </div>
    </div>

    <div class="callout warning">
      <div class="callout-icon">&#9888;&#65039;</div>
      <div class="callout-text">
        <strong>Important for agents:</strong> The funding rate displayed on the interface is the <em>predicted</em> rate for the <em>upcoming</em> settlement, not a guaranteed future rate. The actual rate at settlement is based on the premium at that moment. Rates can change significantly within the period.
      </div>
    </div>
  </section>

  <div class="divider"></div>

  <!-- â”€â”€ Section 3: Formula â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="section" id="formula-section">
    <span class="section-anchor" id="formula"></span>
    <h2>The Funding Rate Formula</h2>
    <p>
      Hyperliquid uses a funding rate formula derived from the standard industry model. Understanding the components helps an agent reason about why a rate is high or low and predict how it might evolve.
    </p>

    <div class="formula-box">
      <div class="formula-label">Funding Rate Formula</div>
      <div class="formula-main">
Funding Rate = Premium Index + clamp(Interest Rate âˆ’ Premium Index, âˆ’0.05%, +0.05%)

Premium Index (8h TWAP) =
  (Mark Price âˆ’ Index Price) / Index Price

Payment = Position Value Ã— Funding Rate
      </div>
      <div class="formula-terms">
        <div class="formula-term">
          <div class="term-name">Mark Price</div>
          <div class="term-desc">Fair value of the perpetual, derived from order book mid-price and oracle price to prevent manipulation.</div>
        </div>
        <div class="formula-term">
          <div class="term-name">Index Price</div>
          <div class="term-desc">Volume-weighted average of the asset's spot price across multiple reference exchanges.</div>
        </div>
        <div class="formula-term">
          <div class="term-name">Interest Rate</div>
          <div class="term-desc">A fixed baseline rate (typically 0.01% per 8h on most venues). Represents the cost of holding leveraged exposure.</div>
        </div>
        <div class="formula-term">
          <div class="term-name">clamp()</div>
          <div class="term-desc">Caps the interest rate adjustment to Â±0.05% per period, preventing runaway funding during extreme dislocations.</div>
        </div>
        <div class="formula-term">
          <div class="term-name">8h TWAP</div>
          <div class="term-desc">Time-weighted average premium over the 8-hour period, sampled at regular intervals (e.g., every minute).</div>
        </div>
        <div class="formula-term">
          <div class="term-name">Position Value</div>
          <div class="term-desc">Notional value of open position = quantity Ã— mark price. Funding is on notional, not on margin posted.</div>
        </div>
      </div>
    </div>

    <div class="callout info">
      <div class="callout-icon">&#9432;</div>
      <div class="callout-text">
        <strong>Annualized equivalent:</strong> An 8-hour rate of +0.01% equates to approximately +10.95% annualized (3 periods/day Ã— 365 days). A rate of +0.10% annualizes to ~109.5%. Rates above 0.10% per period are considered elevated and represent significant carry cost for longs.
      </div>
    </div>
  </section>

  <div class="divider"></div>

  <!-- â”€â”€ Section 4: For AI Agents â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="section" id="for-ai-agents-section">
    <span class="section-anchor" id="for-ai-agents"></span>
    <h2>Funding Rate Signals for AI Agents</h2>
    <p>
      Funding rates provide a continuous, quantitative signal about market sentiment and carry costs. An AI agent can use this signal in several ways.
    </p>

    <h3>Directional Signal</h3>
    <div class="card-grid">
      <div class="card card-positive">
        <div class="card-label green">High Positive Rate</div>
        <h3>Consider Going Short</h3>
        <p>When longs are paying substantial funding to shorts, the market is in a crowded long position. Going short collects funding income and benefits from potential mean reversion.</p>
      </div>
      <div class="card card-negative">
        <div class="card-label red">High Negative Rate</div>
        <h3>Consider Going Long</h3>
        <p>When shorts are paying substantial funding to longs, the market is in a crowded short position. Going long collects funding income and may benefit from a short squeeze.</p>
      </div>
    </div>

    <h3 style="margin-top:28px;">Funding Arbitrage (Delta-Neutral)</h3>
    <p>
      The most common institutional strategy is to collect funding without taking directional exposure. This is achieved by holding equal and opposite positions in spot and perpetuals:
    </p>

    <div class="card card-purple" style="margin-top:12px;">
      <div class="card-label purple">Arbitrage Strategy</div>
      <h3>Cash-and-Carry (Long Spot + Short Perp)</h3>
      <p style="margin-bottom:12px;">
        When the perpetual funding rate is consistently positive, an agent can hold a long position in spot (or a spot-equivalent instrument) and simultaneously hold an equal short position in the perpetual. The directional exposure is hedged, and the agent simply collects the funding payments from long holders.
      </p>
      <p style="margin-bottom:0;">
        <strong>Net P&amp;L:</strong> Funding received âˆ’ (spot holding cost + execution slippage + exchange fees)<br />
        <strong>Break-even rate:</strong> Typically &gt;0.02% per 8h to cover costs on most venues.
      </p>
    </div>

    <div class="callout success">
      <div class="callout-icon">&#10003;</div>
      <div class="callout-text">
        <strong>Rule of thumb for agents:</strong> A funding rate exceeding <code style="font-family:'JetBrains Mono',monospace; font-size:12px; background:rgba(255,255,255,0.06); padding:2px 6px; border-radius:4px;">0.05%</code> per 8 hours (â‰ˆ55% annualized) is strong enough to build a funding-collection strategy around. Below this threshold, friction costs typically erode the edge.
      </div>
    </div>

    <h3 style="margin-top:28px;">Threshold-Based Decision Logic</h3>
    <div class="rate-table-wrapper" style="overflow-x:auto;">
      <table class="rate-table">
        <thead>
          <tr>
            <th>8h Funding Rate</th>
            <th>Interpretation</th>
            <th>Suggested Agent Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="rate-pill positive">+0.10%+</span></td>
            <td>Extreme greed â€” heavily crowded longs</td>
            <td>Strong signal to short perp / open arb</td>
          </tr>
          <tr>
            <td><span class="rate-pill positive">+0.05% â€“ +0.10%</span></td>
            <td>Elevated bullish sentiment</td>
            <td>Consider short perp; arb is economical</td>
          </tr>
          <tr>
            <td><span class="rate-pill positive">+0.01% â€“ +0.05%</span></td>
            <td>Normal bullish conditions</td>
            <td>Monitor; arb marginal after fees</td>
          </tr>
          <tr>
            <td><span class="rate-pill neutral">-0.01% â€“ +0.01%</span></td>
            <td>Neutral / balanced market</td>
            <td>No funding signal; use other indicators</td>
          </tr>
          <tr>
            <td><span class="rate-pill negative">-0.05% â€“ -0.01%</span></td>
            <td>Elevated bearish sentiment</td>
            <td>Consider long perp; arb marginal after fees</td>
          </tr>
          <tr>
            <td><span class="rate-pill negative">-0.10% or below</span></td>
            <td>Extreme fear â€” heavily crowded shorts</td>
            <td>Strong signal to long perp / reverse arb</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <div class="divider"></div>

  <!-- â”€â”€ Section 5: Hyperliquid / Purple Flea API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="section" id="hyperliquid-section">
    <span class="section-anchor" id="hyperliquid"></span>
    <h2>Hyperliquid &amp; the Purple Flea Trading API</h2>
    <p>
      The Purple Flea Trading API wraps Hyperliquid's exchange infrastructure in a clean REST interface designed for AI agents. All perpetuals markets are accessible via simple HTTP calls â€” no wallet management, no WebSocket complexity, no gas handling.
    </p>

    <h3>Fetching Funding Rates</h3>
    <p>Use the <code style="font-family:'JetBrains Mono',monospace; font-size:13px; background:rgba(255,255,255,0.06); padding:2px 6px; border-radius:4px;">/v1/markets</code> endpoint to retrieve all available markets and their current funding rates in a single call:</p>

    <div class="endpoint">
      <span class="method-badge">GET</span>
      <span class="endpoint-path">https://api.purpleflea.com/v1/markets</span>
    </div>
    <p class="endpoint-desc">Returns all active perpetuals markets with current funding rate, open interest, mark price, and index price.</p>

    <div class="json-block">
      <div class="json-header">
        Response <span class="status-200">200 OK</span>
      </div>
      <pre>{
  <span class="json-key">"markets"</span>: [
    {
      <span class="json-key">"symbol"</span>:        <span class="json-str">"BTC-PERP"</span>,
      <span class="json-key">"mark_price"</span>:    <span class="json-num">97834.20</span>,
      <span class="json-key">"index_price"</span>:   <span class="json-num">97801.55</span>,
      <span class="json-key">"funding_rate"</span>:  <span class="json-num">0.000412</span>,   <span class="json-comment">// +0.0412% per 8h â€” elevated</span>
      <span class="json-key">"funding_rate_8h_annualized"</span>: <span class="json-num">0.4507</span>,  <span class="json-comment">// +45.1% annualized</span>
      <span class="json-key">"next_funding_ts"</span>: <span class="json-num">1740614400</span>, <span class="json-comment">// Unix timestamp (UTC)</span>
      <span class="json-key">"open_interest_usd"</span>: <span class="json-num">1482950000</span>
    },
    {
      <span class="json-key">"symbol"</span>:        <span class="json-str">"ETH-PERP"</span>,
      <span class="json-key">"mark_price"</span>:    <span class="json-num">2714.88</span>,
      <span class="json-key">"index_price"</span>:   <span class="json-num">2716.10</span>,
      <span class="json-key">"funding_rate"</span>:  <span class="json-num">-0.000088</span>,  <span class="json-comment">// -0.0088% per 8h â€” mild bearish</span>
      <span class="json-key">"funding_rate_8h_annualized"</span>: <span class="json-num">-0.0964</span>,
      <span class="json-key">"next_funding_ts"</span>: <span class="json-num">1740614400</span>,
      <span class="json-key">"open_interest_usd"</span>: <span class="json-num">687320000</span>
    },
    {
      <span class="json-key">"symbol"</span>:        <span class="json-str">"SOL-PERP"</span>,
      <span class="json-key">"mark_price"</span>:    <span class="json-num">182.44</span>,
      <span class="json-key">"index_price"</span>:   <span class="json-num">182.19</span>,
      <span class="json-key">"funding_rate"</span>:  <span class="json-num">0.000651</span>,   <span class="json-comment">// +0.0651% per 8h â€” high, arb opportunity</span>
      <span class="json-key">"funding_rate_8h_annualized"</span>: <span class="json-num">0.7125</span>,
      <span class="json-key">"next_funding_ts"</span>: <span class="json-num">1740614400</span>,
      <span class="json-key">"open_interest_usd"</span>: <span class="json-num">298140000</span>
    }
  ],
  <span class="json-key">"generated_at"</span>: <span class="json-num">1740610831</span>
}</pre>
    </div>

    <div class="callout info">
      <div class="callout-icon">&#9432;</div>
      <div class="callout-text">
        <strong>Funding rate encoding:</strong> The <code style="font-family:'JetBrains Mono',monospace; font-size:12px; background:rgba(255,255,255,0.06); padding:2px 6px; border-radius:4px;">funding_rate</code> field is expressed as a decimal fraction of notional value per 8-hour period. Multiply by 100 to get a percentage. A value of <code style="font-family:'JetBrains Mono',monospace; font-size:12px; background:rgba(255,255,255,0.06); padding:2px 6px; border-radius:4px;">0.000651</code> = 0.0651% per 8h.
      </div>
    </div>

    <h3 style="margin-top:28px;">Placing Orders via the API</h3>
    <p>Once your agent identifies a funding opportunity, it can place orders directly:</p>

    <div class="endpoint">
      <span class="method-badge">GET</span>
      <span class="endpoint-path">https://api.purpleflea.com/v1/markets</span>
    </div>
    <div class="endpoint">
      <span class="method-badge" style="background:rgba(168,85,247,0.1);color:#A855F7;border-color:rgba(168,85,247,0.3);">POST</span>
      <span class="endpoint-path">https://api.purpleflea.com/v1/orders</span>
    </div>
    <div class="endpoint">
      <span class="method-badge" style="background:rgba(168,85,247,0.1);color:#A855F7;border-color:rgba(168,85,247,0.3);">POST</span>
      <span class="endpoint-path">https://api.purpleflea.com/v1/orders/{id}/cancel</span>
    </div>
    <div class="endpoint">
      <span class="method-badge">GET</span>
      <span class="endpoint-path">https://api.purpleflea.com/v1/positions</span>
    </div>
  </section>

  <div class="divider"></div>

  <!-- â”€â”€ Section 6: Code Example â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="section" id="code-example-section">
    <span class="section-anchor" id="code-example"></span>
    <h2>Python Agent Code Example</h2>
    <p>
      The following example demonstrates an AI agent that polls funding rates every 5 minutes, identifies markets where the rate exceeds a configurable threshold, and opens a delta-neutral position (short perp + long spot equivalent) to collect funding.
    </p>

    <div class="code-block">
      <div class="code-header">
        <div class="code-lang">Python 3.11+</div>
        <div class="code-dots">
          <span class="dot-red"></span>
          <span class="dot-yellow"></span>
          <span class="dot-green"></span>
        </div>
      </div>
      <pre><span class="c">"""
Funding Rate Collector â€” Purple Flea Trading API
Monitors Hyperliquid perpetuals and opens delta-neutral
positions when funding rates exceed the threshold.
"""</span>

<span class="kw">import</span> time
<span class="kw">import</span> logging
<span class="kw">import</span> requests
<span class="kw">from</span> dataclasses <span class="kw">import</span> dataclass
<span class="kw">from</span> typing <span class="kw">import</span> Optional

<span class="c"># â”€â”€ Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
API_BASE   = <span class="st">"https://api.purpleflea.com"</span>
API_KEY    = <span class="st">"pf_YOUR_API_KEY_HERE"</span>
THRESHOLD  = <span class="nm">0.0005</span>    <span class="c"># 0.05% per 8h â€” minimum to enter</span>
MAX_NOTIONAL = <span class="nm">1000</span>   <span class="c"># USD notional per position</span>
POLL_INTERVAL = <span class="nm">300</span>   <span class="c"># seconds between funding checks</span>

logging.basicConfig(
    level=logging.INFO,
    format=<span class="st">"%(asctime)s  %(levelname)s  %(message)s"</span>
)
log = logging.getLogger(<span class="st">"funding-agent"</span>)

<span class="c"># â”€â”€ Data Model â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="kw">@dataclass</span>
<span class="kw">class</span> <span class="fn">Market</span>:
    symbol: str
    mark_price: float
    funding_rate: float
    open_interest_usd: float
    next_funding_ts: int

<span class="c"># â”€â”€ API Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="kw">def</span> <span class="fn">get_markets</span>() -> list[Market]:
    <span class="st">"""Fetch all perpetuals markets with current funding rates."""</span>
    headers = {<span class="st">"X-API-Key"</span>: API_KEY}
    resp = requests.get(
        f<span class="st">"{API_BASE}/v1/markets"</span>,
        headers=headers,
        timeout=<span class="nm">10</span>
    )
    resp.raise_for_status()
    data = resp.json()
    <span class="kw">return</span> [
        Market(
            symbol=m[<span class="st">"symbol"</span>],
            mark_price=m[<span class="st">"mark_price"</span>],
            funding_rate=m[<span class="st">"funding_rate"</span>],
            open_interest_usd=m[<span class="st">"open_interest_usd"</span>],
            next_funding_ts=m[<span class="st">"next_funding_ts"</span>],
        )
        <span class="kw">for</span> m <span class="kw">in</span> data[<span class="st">"markets"</span>]
    ]

<span class="kw">def</span> <span class="fn">place_order</span>(
    symbol: str,
    side: str,          <span class="c"># "buy" | "sell"</span>
    notional_usd: float,
    order_type: str = <span class="st">"market"</span>,
) -> dict:
    <span class="st">"""Place a market order on the perpetuals market."""</span>
    headers = {
        <span class="st">"X-API-Key"</span>: API_KEY,
        <span class="st">"Content-Type"</span>: <span class="st">"application/json"</span>,
    }
    payload = {
        <span class="st">"symbol"</span>:       symbol,
        <span class="st">"side"</span>:         side,
        <span class="st">"type"</span>:         order_type,
        <span class="st">"notional_usd"</span>: notional_usd,
    }
    resp = requests.post(
        f<span class="st">"{API_BASE}/v1/orders"</span>,
        headers=headers,
        json=payload,
        timeout=<span class="nm">10</span>
    )
    resp.raise_for_status()
    <span class="kw">return</span> resp.json()

<span class="kw">def</span> <span class="fn">get_open_positions</span>() -> dict[str, dict]:
    <span class="st">"""Return open positions keyed by symbol."""</span>
    headers = {<span class="st">"X-API-Key"</span>: API_KEY}
    resp = requests.get(
        f<span class="st">"{API_BASE}/v1/positions"</span>,
        headers=headers,
        timeout=<span class="nm">10</span>
    )
    resp.raise_for_status()
    positions = resp.json().get(<span class="st">"positions"</span>, [])
    <span class="kw">return</span> {p[<span class="st">"symbol"</span>]: p <span class="kw">for</span> p <span class="kw">in</span> positions}

<span class="c"># â”€â”€ Strategy Logic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="kw">def</span> <span class="fn">evaluate_market</span>(
    market: Market,
    open_positions: dict[str, dict],
) -> Optional[str]:
    <span class="st">"""
    Return a trade action or None.
    Returns:
        "short"  â€” open short perp to collect positive funding
        "long"   â€” open long perp to collect negative funding
        None     â€” no action warranted
    """</span>
    already_open = market.symbol <span class="kw">in</span> open_positions
    rate = market.funding_rate
    annualized = rate * <span class="nm">3</span> * <span class="nm">365</span>   <span class="c"># 3 periods/day Ã— 365</span>

    <span class="kw">if</span> already_open:
        log.debug(<span class="st">f"  {market.symbol}: position already open, skipping"</span>)
        <span class="kw">return</span> None

    <span class="kw">if</span> rate >= THRESHOLD:
        log.info(
            <span class="st">f"  OPPORTUNITY {market.symbol}: funding={rate:.4%}/8h "</span>
            <span class="st">f"({annualized:.1%} annualized) â€” SHORT PERP"</span>
        )
        <span class="kw">return</span> <span class="st">"short"</span>

    <span class="kw">if</span> rate &lt;= -THRESHOLD:
        log.info(
            <span class="st">f"  OPPORTUNITY {market.symbol}: funding={rate:.4%}/8h "</span>
            <span class="st">f"({annualized:.1%} annualized) â€” LONG PERP"</span>
        )
        <span class="kw">return</span> <span class="st">"long"</span>

    log.debug(
        <span class="st">f"  {market.symbol}: rate={rate:.4%} below threshold, skipping"</span>
    )
    <span class="kw">return</span> None

<span class="kw">def</span> <span class="fn">run_cycle</span>() -> None:
    <span class="st">"""Execute one full scan-and-trade cycle."""</span>
    log.info(<span class="st">"=== Starting funding scan ==="</span>)

    markets = get_markets()
    open_positions = get_open_positions()
    log.info(
        <span class="st">f"Fetched {len(markets)} markets, {len(open_positions)} open positions"</span>
    )

    <span class="kw">for</span> market <span class="kw">in</span> markets:
        action = evaluate_market(market, open_positions)
        <span class="kw">if</span> action == <span class="st">"short"</span>:
            result = place_order(
                symbol=market.symbol,
                side=<span class="st">"sell"</span>,
                notional_usd=MAX_NOTIONAL,
            )
            log.info(<span class="st">f"Opened short on {market.symbol}: {result}"</span>)
        <span class="kw">elif</span> action == <span class="st">"long"</span>:
            result = place_order(
                symbol=market.symbol,
                side=<span class="st">"buy"</span>,
                notional_usd=MAX_NOTIONAL,
            )
            log.info(<span class="st">f"Opened long on {market.symbol}: {result}"</span>)

<span class="c"># â”€â”€ Entry Point â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="kw">if</span> __name__ == <span class="st">"__main__"</span>:
    log.info(<span class="st">f"Funding agent started. Threshold: {THRESHOLD:.4%}/8h"</span>)
    <span class="kw">while True</span>:
        <span class="kw">try</span>:
            run_cycle()
        <span class="kw">except</span> Exception <span class="kw">as</span> exc:
            log.error(<span class="st">f"Cycle error: {exc}"</span>, exc_info=<span class="kw">True</span>)
        log.info(<span class="st">f"Sleeping {POLL_INTERVAL}s until next scan..."</span>)
        time.sleep(POLL_INTERVAL)</pre>
    </div>

    <div class="callout warning">
      <div class="callout-icon">&#9888;&#65039;</div>
      <div class="callout-text">
        <strong>Production considerations:</strong> The example above opens perp-only positions (not a fully delta-neutral arb). For a complete arb, the agent must also hold the equivalent long spot position. The agent above is suitable for directional funding-collection strategies but carries mark-to-market risk on the position.
      </div>
    </div>
  </section>

  <div class="divider"></div>

  <!-- â”€â”€ Section 7: Historical Context â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="section" id="historical-context-section">
    <span class="section-anchor" id="historical-context"></span>
    <h2>Historical Context and Rate Interpretation</h2>
    <p>
      Understanding where current funding rates sit relative to historical norms is essential for calibrating strategy thresholds and risk tolerances.
    </p>

    <div class="card-grid">
      <div class="card">
        <div class="card-label" style="color:var(--text-muted);">Typical Range</div>
        <h3>+0.005% to +0.02%</h3>
        <p>Most markets spend the majority of time in this range during neutral-to-mildly-bullish conditions. This reflects the baseline interest rate component.</p>
      </div>
      <div class="card card-positive">
        <div class="card-label green">Bull Market Peak</div>
        <h3>+0.10% to +0.30%</h3>
        <p>During strong bull runs (e.g., late 2021, Q4 2024), BTC and ETH perpetuals regularly sustained rates in this range. These periods represent exceptional funding income opportunities.</p>
      </div>
      <div class="card card-negative">
        <div class="card-label red">Capitulation Events</div>
        <h3>-0.10% to -0.15%</h3>
        <p>During rapid sell-offs or liquidation cascades (e.g., May 2021, FTX collapse), negative funding reached extreme levels for short periods, offering the reverse arb opportunity.</p>
      </div>
      <div class="card card-warning">
        <div class="card-label yellow">Flash Extremes</div>
        <h3>Temporarily beyond Â±0.30%</h3>
        <p>During black-swan events or listing surges on small caps, rates can spike to extreme levels for 1-2 periods before snapping back. These carry very high risk.</p>
      </div>
    </div>

    <h3 style="margin-top:32px;">How to Interpret Extremes</h3>
    <p>
      An extremely high positive funding rate is a double-edged signal. On one hand, it means significant income for short positions. On the other, it often occurs during strong upward price momentum â€” meaning the market may continue to rally even as shorts collect funding. An agent should weigh funding income against the mark-to-market risk of fighting the trend.
    </p>
    <p>
      Open interest data (returned alongside funding rates in the <code style="font-family:'JetBrains Mono',monospace; font-size:13px; background:rgba(255,255,255,0.06); padding:2px 6px; border-radius:4px;">/v1/markets</code> response) provides additional context. A high funding rate combined with rising open interest indicates that new leveraged longs are still entering â€” the positioning is not yet unwinding. A high funding rate alongside <em>falling</em> open interest often signals the start of a deleveraging event and potential mean reversion.
    </p>
  </section>

  <div class="divider"></div>

  <!-- â”€â”€ Section 8: Risk Warnings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="section" id="risks-section">
    <span class="section-anchor" id="risks"></span>
    <h2>Risk Warnings</h2>

    <div class="callout danger">
      <div class="callout-icon">&#9940;</div>
      <div class="callout-text">
        <strong>Funding collection strategies carry real financial risk.</strong> Past funding rates are not indicative of future rates. Agents must be designed to handle adverse conditions. Never operate without position size limits, stop-loss logic, and liquidation monitoring.
      </div>
    </div>

    <ul class="risk-list">
      <li>
        <div class="risk-icon">&#8635;</div>
        <div>
          <strong>Funding Rate Reversal</strong>
          A rate can flip from strongly positive to strongly negative within a single 8-hour period. An agent that opened a short to collect +0.10% funding may suddenly owe funding the next period while also facing a price move against its position.
        </div>
      </li>
      <li>
        <div class="risk-icon">&#9889;</div>
        <div>
          <strong>Liquidation Risk</strong>
          Perpetual positions use leverage. A short opened to collect funding can be liquidated if the price rallies sharply. Funding income collected over 10 periods can be wiped out by a single liquidation event. Always set appropriate leverage and maintain sufficient margin.
        </div>
      </li>
      <li>
        <div class="risk-icon">&#128200;</div>
        <div>
          <strong>Compounding Costs</strong>
          Funding is charged on the full notional value of the position, not just the margin. A 0.01% rate on a $10,000 position costs $1 every 8 hours, or $3/day, or approximately $1,095 per year â€” equivalent to a 10.95% annual drag on a $10,000 position held as a long in neutral conditions.
        </div>
      </li>
      <li>
        <div class="risk-icon">&#128274;</div>
        <div>
          <strong>Imperfect Delta Hedge</strong>
          In a cash-and-carry strategy, the spot and perp legs do not always move in perfect lockstep. Basis risk â€” the difference between spot and perp price â€” can erode arb profits, especially during high-volatility periods or exchange outages.
        </div>
      </li>
      <li>
        <div class="risk-icon">&#128246;</div>
        <div>
          <strong>Exchange and API Risk</strong>
          Agents relying on automated API execution are exposed to downtime, latency, and order rejection. Build retry logic, circuit breakers, and state recovery into your agent. A failed close order on a leveraged position is a serious risk event.
        </div>
      </li>
    </ul>
  </section>

  <div class="divider"></div>

  <!-- â”€â”€ CTA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="cta-section">
    <div class="cta-box">
      <h2>Start Trading with the Purple Flea Trading API</h2>
      <p>
        Access all Hyperliquid perpetuals markets, real-time funding rates, and order execution through a single REST API built for AI agents.
      </p>
      <div class="btn-wrap">
        <a class="btn-primary" href="https://purpleflea.com/api-key">
          Get Your API Key
        </a>
        <a class="btn-secondary" href="https://purpleflea.com/docs">
          Read the Docs
        </a>
      </div>
    </div>
  </section>

</div>
</main>

<!-- â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<footer>
  <p>
    &copy; 2026 <a href="https://purpleflea.com">Purple Flea</a> &mdash;
    <a href="https://purpleflea.com/docs">API Docs</a> &middot;
    <a href="https://purpleflea.com/guides">Guides</a> &middot;
    <a href="https://purpleflea.com/terms">Terms</a> &middot;
    <a href="https://purpleflea.com/privacy">Privacy</a>
  </p>
  <p style="margin-top:8px;">Trading cryptocurrencies involves substantial risk of loss. This content is for informational purposes only and does not constitute financial advice.</p>
</footer>

<script>
  // Mobile nav toggle
  const toggle = document.getElementById('mobileToggle');
  const navLinks = document.getElementById('navLinks');
  toggle.addEventListener('click', () => {
    navLinks.classList.toggle('open');
  });
  // Close nav on link click (mobile)
  navLinks.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => navLinks.classList.remove('open'));
  });
</script>

</body>
</html>
