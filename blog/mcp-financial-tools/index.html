<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How to Use MCP Servers for AI Agent Financial Operations (2026 Guide) | Purple Flea</title>
  <meta name="description" content="A complete guide to using Model Context Protocol (MCP) servers for AI agent financial operations. Connect Claude to crypto wallets, trading, casino, and domain tools.">
  <meta name="author" content="Purple Flea">
  <meta property="og:title" content="How to Use MCP Servers for AI Agent Financial Operations (2026 Guide)">
  <meta property="og:description" content="Learn how to connect Claude and other AI agents to financial MCP servers for crypto wallets, trading, casino operations, and domain management.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://purpleflea.com/blog/mcp-financial-tools">
  <link rel="canonical" href="https://purpleflea.com/blog/mcp-financial-tools">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --purple: #A855F7;
      --purple-dim: #7C3AED;
      --bg: #09090B;
      --text: #FAFAFA;
      --text-secondary: #A1A1AA;
      --text-muted: #71717A;
      --border: rgba(255,255,255,0.06);
      --bg-card: rgba(255,255,255,0.03);
      --radius: 16px;
      --radius-sm: 10px;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.7;
      font-size: 16px;
    }

    /* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: rgba(9,9,11,0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
    }

    .nav-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 24px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .nav-logo {
      font-weight: 700;
      font-size: 18px;
      color: var(--text);
      text-decoration: none;
      letter-spacing: -0.3px;
    }

    .nav-logo span { color: var(--purple); }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 28px;
      list-style: none;
    }

    .nav-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      transition: color 0.2s;
    }

    .nav-links a:hover { color: var(--text); }

    .nav-cta {
      background: var(--purple);
      color: #fff !important;
      padding: 8px 18px;
      border-radius: 8px;
      font-weight: 600 !important;
      font-size: 13px !important;
      transition: background 0.2s !important;
    }

    .nav-cta:hover { background: var(--purple-dim) !important; color: #fff !important; }

    /* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
    .page-wrapper {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 24px;
      padding-top: 100px;
    }

    .content-grid {
      display: grid;
      grid-template-columns: 1fr 260px;
      gap: 60px;
      align-items: start;
    }

    /* ‚îÄ‚îÄ ARTICLE HEADER ‚îÄ‚îÄ */
    .article-header { margin-bottom: 48px; }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(168,85,247,0.12);
      border: 1px solid rgba(168,85,247,0.25);
      color: var(--purple);
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      padding: 5px 12px;
      border-radius: 100px;
      margin-bottom: 20px;
    }

    .badge::before {
      content: '';
      width: 6px;
      height: 6px;
      background: var(--purple);
      border-radius: 50%;
    }

    h1 {
      font-size: clamp(28px, 4vw, 44px);
      font-weight: 700;
      line-height: 1.18;
      letter-spacing: -0.8px;
      margin-bottom: 20px;
      color: var(--text);
    }

    .article-meta {
      display: flex;
      align-items: center;
      gap: 20px;
      color: var(--text-muted);
      font-size: 14px;
    }

    .article-meta span { display: flex; align-items: center; gap: 6px; }

    .meta-dot {
      width: 3px;
      height: 3px;
      background: var(--text-muted);
      border-radius: 50%;
    }

    /* ‚îÄ‚îÄ TABLE OF CONTENTS ‚îÄ‚îÄ */
    .toc-sidebar {
      position: sticky;
      top: 80px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 24px;
    }

    .toc-title {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    .toc-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .toc-list a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 13px;
      line-height: 1.5;
      display: block;
      padding: 4px 8px;
      border-radius: 6px;
      transition: all 0.15s;
      border-left: 2px solid transparent;
    }

    .toc-list a:hover {
      color: var(--purple);
      background: rgba(168,85,247,0.06);
      border-left-color: var(--purple);
    }

    /* ‚îÄ‚îÄ ARTICLE BODY ‚îÄ‚îÄ */
    .article-body { min-width: 0; }

    h2 {
      font-size: 26px;
      font-weight: 700;
      letter-spacing: -0.4px;
      color: var(--text);
      margin-top: 56px;
      margin-bottom: 18px;
      padding-top: 8px;
    }

    h3 {
      font-size: 19px;
      font-weight: 600;
      letter-spacing: -0.2px;
      color: var(--text);
      margin-top: 36px;
      margin-bottom: 14px;
    }

    p {
      color: var(--text-secondary);
      margin-bottom: 18px;
      font-size: 16px;
    }

    a { color: var(--purple); text-decoration: none; }
    a:hover { text-decoration: underline; }

    strong { color: var(--text); font-weight: 600; }

    ul, ol {
      color: var(--text-secondary);
      padding-left: 22px;
      margin-bottom: 18px;
    }

    li { margin-bottom: 8px; font-size: 16px; }

    /* ‚îÄ‚îÄ CODE ‚îÄ‚îÄ */
    code {
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 13.5px;
      background: rgba(255,255,255,0.06);
      border: 1px solid var(--border);
      padding: 2px 7px;
      border-radius: 5px;
      color: var(--purple);
    }

    pre {
      background: #0D0D10;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 22px 24px;
      overflow-x: auto;
      margin: 24px 0;
      position: relative;
    }

    pre code {
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 13px;
      background: none;
      border: none;
      padding: 0;
      color: #E2E8F0;
      line-height: 1.7;
      display: block;
    }

    .code-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      color: var(--text-muted);
      font-weight: 500;
      margin-bottom: 10px;
      letter-spacing: 0.5px;
    }

    /* syntax colors */
    .kw  { color: #C084FC; }
    .str { color: #86EFAC; }
    .num { color: #FCA5A5; }
    .cmt { color: #52525B; font-style: italic; }
    .fn  { color: #7DD3FC; }
    .key { color: #A5F3FC; }
    .val { color: #86EFAC; }
    .op  { color: #A1A1AA; }
    .obj { color: #FCD34D; }

    /* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 28px;
      margin: 24px 0;
    }

    .card-purple {
      background: rgba(168,85,247,0.06);
      border-color: rgba(168,85,247,0.2);
    }

    /* ‚îÄ‚îÄ MCP SERVER GRID ‚îÄ‚îÄ */
    .server-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin: 28px 0;
    }

    .server-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 22px;
      transition: border-color 0.2s, background 0.2s;
    }

    .server-card:hover {
      border-color: rgba(168,85,247,0.3);
      background: rgba(168,85,247,0.04);
    }

    .server-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: rgba(168,85,247,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      margin-bottom: 14px;
    }

    .server-name {
      font-size: 15px;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 6px;
      font-family: 'JetBrains Mono', monospace;
    }

    .server-desc {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.55;
      margin: 0;
    }

    /* ‚îÄ‚îÄ TOOLS TABLE ‚îÄ‚îÄ */
    .tools-section { margin: 28px 0; }

    .tools-server-heading {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      font-weight: 600;
      color: var(--purple);
      padding: 8px 14px;
      background: rgba(168,85,247,0.08);
      border-radius: 8px;
      margin-bottom: 14px;
      display: inline-block;
    }

    .tool-row {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 13px 0;
      border-bottom: 1px solid var(--border);
    }

    .tool-row:last-child { border-bottom: none; }

    .tool-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      font-weight: 500;
      color: var(--text);
      min-width: 200px;
      flex-shrink: 0;
    }

    .tool-desc {
      font-size: 14px;
      color: var(--text-secondary);
    }

    /* ‚îÄ‚îÄ CHAT DEMO ‚îÄ‚îÄ */
    .chat-demo {
      background: #0D0D10;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      margin: 28px 0;
    }

    .chat-header {
      padding: 14px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(255,255,255,0.02);
    }

    .chat-dots { display: flex; gap: 6px; }
    .chat-dot { width: 10px; height: 10px; border-radius: 50%; }
    .dot-red { background: #EF4444; }
    .dot-yellow { background: #EAB308; }
    .dot-green { background: #22C55E; }

    .chat-title {
      font-size: 13px;
      color: var(--text-muted);
      font-weight: 500;
      margin-left: 4px;
    }

    .chat-body { padding: 24px; display: flex; flex-direction: column; gap: 20px; }

    .msg { display: flex; gap: 14px; align-items: flex-start; }

    .msg-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
      font-family: 'Inter', sans-serif;
    }

    .avatar-user { background: rgba(168,85,247,0.2); color: var(--purple); }
    .avatar-claude { background: rgba(251,146,60,0.2); color: #FB923C; }
    .avatar-tool { background: rgba(34,197,94,0.15); color: #22C55E; }

    .msg-content { flex: 1; }

    .msg-role {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.8px;
      text-transform: uppercase;
      margin-bottom: 6px;
    }

    .role-user { color: var(--purple); }
    .role-claude { color: #FB923C; }
    .role-tool { color: #22C55E; }

    .msg-text {
      font-size: 14.5px;
      color: var(--text-secondary);
      line-height: 1.65;
    }

    .tool-call-block {
      background: rgba(34,197,94,0.04);
      border: 1px solid rgba(34,197,94,0.15);
      border-radius: 8px;
      padding: 14px 16px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 12.5px;
      color: #86EFAC;
      line-height: 1.6;
    }

    .tool-call-label {
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: #22C55E;
      margin-bottom: 8px;
    }

    /* ‚îÄ‚îÄ INFO BOX ‚îÄ‚îÄ */
    .info-box {
      border-left: 3px solid var(--purple);
      padding: 18px 22px;
      background: rgba(168,85,247,0.05);
      border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
      margin: 24px 0;
    }

    .info-box p { margin: 0; font-size: 15px; }

    .info-box-title {
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.8px;
      text-transform: uppercase;
      color: var(--purple);
      margin-bottom: 8px;
    }

    /* ‚îÄ‚îÄ CLIENT GRID ‚îÄ‚îÄ */
    .client-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      margin: 24px 0;
    }

    .client-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 20px;
      text-align: center;
    }

    .client-name {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 6px;
    }

    .client-desc {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 0;
    }

    /* ‚îÄ‚îÄ CTA SECTION ‚îÄ‚îÄ */
    .cta-section {
      background: linear-gradient(135deg, rgba(168,85,247,0.12) 0%, rgba(124,58,237,0.08) 100%);
      border: 1px solid rgba(168,85,247,0.25);
      border-radius: var(--radius);
      padding: 48px 40px;
      text-align: center;
      margin: 56px 0 32px;
    }

    .cta-section h2 { margin-top: 0; }

    .cta-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--purple);
      color: #fff;
      padding: 14px 28px;
      border-radius: 10px;
      font-weight: 700;
      font-size: 15px;
      text-decoration: none;
      margin: 8px;
      transition: background 0.2s, transform 0.1s;
    }

    .cta-btn:hover { background: var(--purple-dim); text-decoration: none; transform: translateY(-1px); }

    .cta-btn-outline {
      background: transparent;
      border: 1px solid rgba(168,85,247,0.4);
      color: var(--purple);
    }

    .cta-btn-outline:hover { background: rgba(168,85,247,0.1); }

    /* ‚îÄ‚îÄ STEP LIST ‚îÄ‚îÄ */
    .step-list { counter-reset: step; list-style: none; padding: 0; margin: 24px 0; }

    .step-list > li {
      counter-increment: step;
      display: flex;
      gap: 18px;
      align-items: flex-start;
      margin-bottom: 22px;
    }

    .step-list > li::before {
      content: counter(step);
      min-width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(168,85,247,0.15);
      border: 1px solid rgba(168,85,247,0.3);
      color: var(--purple);
      font-size: 13px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .step-content { flex: 1; }

    .step-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 6px;
    }

    /* ‚îÄ‚îÄ DIVIDER ‚îÄ‚îÄ */
    hr {
      border: none;
      border-top: 1px solid var(--border);
      margin: 48px 0;
    }

    /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
    @media (max-width: 860px) {
      .content-grid { grid-template-columns: 1fr; }
      .toc-sidebar { display: none; }
      .server-grid { grid-template-columns: 1fr; }
      .client-grid { grid-template-columns: 1fr; }
    }

    @media (max-width: 600px) {
      h1 { font-size: 26px; }
      h2 { font-size: 22px; }
      .page-wrapper { padding: 0 16px; padding-top: 90px; }
      .nav-links { display: none; }
      pre { padding: 16px; }
    }
  </style>
</head>
<body>

<!-- ‚îÄ‚îÄ NAV ‚îÄ‚îÄ -->
<nav>
  <div class="nav-inner">
    <a href="https://purpleflea.com" class="nav-logo">purple<span>flea</span></a>
    <ul class="nav-links">
      <li><a href="https://purpleflea.com/docs">Docs</a></li>
      <li><a href="https://purpleflea.com/blog">Blog</a></li>
      <li><a href="https://purpleflea.com/pricing">Pricing</a></li>
      <li><a href="https://purpleflea.com/dashboard" class="nav-cta">Get API Key</a></li>
    </ul>
  </div>
</nav>

<!-- ‚îÄ‚îÄ PAGE WRAPPER ‚îÄ‚îÄ -->
<div class="page-wrapper">
  <div class="content-grid">

    <!-- ‚îÄ‚îÄ MAIN ARTICLE ‚îÄ‚îÄ -->
    <article class="article-body">

      <!-- Header -->
      <header class="article-header">
        <div class="badge">MCP + Finance</div>
        <h1>How to Use MCP Servers for AI Agent Financial Operations (2026 Guide)</h1>
        <div class="article-meta">
          <span>Feb 27, 2026</span>
          <span class="meta-dot"></span>
          <span>10 min read</span>
          <span class="meta-dot"></span>
          <span>Purple Flea Team</span>
        </div>
      </header>

      <!-- ‚îÄ‚îÄ SECTION 1: INTRODUCTION ‚îÄ‚îÄ -->
      <section id="introduction">
        <h2>Introduction</h2>
        <p>
          The Model Context Protocol (MCP) has emerged as the de facto standard for giving large language models access to external tools and real-world systems. Where previous tool-calling approaches required bespoke integrations for each agent framework, MCP offers a unified, transport-agnostic protocol that any compliant client can speak fluently.
        </p>
        <p>
          Financial tooling is arguably the highest-leverage category of MCP servers available today. The ability for an AI agent to <strong>check a crypto wallet balance, execute a trade, place a wager, or register a domain</strong> ‚Äî all from within a single natural-language conversation ‚Äî fundamentally changes what autonomous agents can accomplish. Instead of writing glue code, you configure a JSON block and ship.
        </p>
        <p>
          Purple Flea publishes four production-grade MCP servers covering crypto wallets, trading, casino operations, and domain management. This guide walks through everything: what MCP is, how our servers work, how to wire them into Claude Desktop or any other MCP client, and how to extend them with your own logic.
        </p>

        <div class="info-box">
          <div class="info-box-title">Prerequisites</div>
          <p>You need Node.js 20+, a Purple Flea account with API keys, and either Claude Desktop, Cursor, or Windsurf installed. All four MCP servers are available on npm under the <code>@purple-flea</code> scope.</p>
        </div>
      </section>

      <!-- ‚îÄ‚îÄ SECTION 2: WHAT IS MCP ‚îÄ‚îÄ -->
      <section id="what-is-mcp">
        <h2>What Is the Model Context Protocol?</h2>
        <p>
          MCP is an open protocol introduced by Anthropic in late 2024 and rapidly adopted across the AI ecosystem. It defines a standard way for <strong>MCP clients</strong> (Claude Desktop, Cursor, Windsurf, custom agents) to discover and invoke <strong>tools</strong> exposed by <strong>MCP servers</strong> ‚Äî lightweight processes that run locally or remotely and respond to a JSON-RPC-like wire format.
        </p>

        <h3>Tool Calling vs. MCP</h3>
        <p>
          Traditional tool calling bakes function schemas directly into the model API request. Each framework invents its own schema format, each integration is one-off, and there is no shared discovery mechanism. MCP changes the model:
        </p>
        <ul>
          <li><strong>Discovery is automatic.</strong> The client calls <code>tools/list</code> and gets a live schema for every tool the server exposes ‚Äî no manual registration.</li>
          <li><strong>Transport is pluggable.</strong> Servers run over stdio, HTTP+SSE, or WebSockets; clients don't care which.</li>
          <li><strong>Servers are composable.</strong> An orchestrator server can itself be an MCP client that fans out requests to multiple downstream MCP servers.</li>
          <li><strong>Auth lives outside the LLM.</strong> API keys are held by the server process, not leaked into the context window.</li>
        </ul>

        <h3>Why MCP Is Better for Agents</h3>
        <p>
          Autonomous agents need to operate across long, multi-step sessions. MCP servers are persistent processes with their own state and retry logic. The model never needs to hold API tokens in memory; it simply calls a named tool and receives a structured result. That separation of concerns makes agents more reliable, auditable, and easier to extend without touching the model layer.
        </p>

        <div class="card card-purple">
          <p style="margin:0; font-size: 15px;"><strong>Key insight:</strong> MCP lets financial tooling behave like a first-class citizen of the AI stack. Instead of pasting balance output into a chat window, the agent reads balances, reasons over them, and executes follow-up actions ‚Äî all within a single coherent turn.</p>
        </div>
      </section>

      <!-- ‚îÄ‚îÄ SECTION 3: PURPLE FLEA OVERVIEW ‚îÄ‚îÄ -->
      <section id="purple-flea-servers">
        <h2>Purple Flea MCP Servers</h2>
        <p>
          Purple Flea provides four purpose-built MCP servers that cover the most common AI-driven financial use cases. Each server authenticates with a dedicated API key, exposes a rich tool surface, and returns structured JSON that agents can reason over directly.
        </p>

        <div class="server-grid">
          <div class="server-card">
            <div class="server-icon">üé∞</div>
            <div class="server-name">casino-mcp</div>
            <p class="server-desc">Casino operations: coin flips, dice rolls, slot spins, blackjack, provably fair game history, and balance management for gaming wallets.</p>
          </div>
          <div class="server-card">
            <div class="server-icon">üìà</div>
            <div class="server-name">trading-mcp</div>
            <p class="server-desc">Spot and perpetual trading across major crypto pairs. Market orders, limit orders, position tracking, P&amp;L reporting, and order book snapshots.</p>
          </div>
          <div class="server-card">
            <div class="server-icon">üëõ</div>
            <div class="server-name">wallet-mcp</div>
            <p class="server-desc">Multi-chain crypto wallet operations: balance lookups, transaction history, send/receive, address generation, and gas estimation across EVM chains, Solana, and Bitcoin.</p>
          </div>
          <div class="server-card">
            <div class="server-icon">üåê</div>
            <div class="server-name">domains-mcp</div>
            <p class="server-desc">Domain registration, DNS management, WHOIS lookup, renewal, transfer, and Web3 domain minting (.crypto, .eth, .sol) ‚Äî all via natural language.</p>
          </div>
        </div>

        <p>
          Every server is published as an npm package and is invoked by the MCP client via <code>npx</code>, so there is nothing to install globally. The packages auto-update on each spawn if you omit a pinned version tag.
        </p>
      </section>

      <!-- ‚îÄ‚îÄ SECTION 4: SETUP GUIDE ‚îÄ‚îÄ -->
      <section id="setup">
        <h2>Setup Guide: Installing in Claude Desktop</h2>
        <p>
          Claude Desktop reads MCP server configuration from <code>~/.claude/claude_desktop_config.json</code>. Open the file (create it if it does not exist) and add the <code>mcpServers</code> block below. Replace each placeholder key with the real API key from your <a href="https://purpleflea.com/dashboard">Purple Flea dashboard</a>.
        </p>

        <div class="code-label">~/.claude/claude_desktop_config.json</div>
        <pre><code><span class="op">{</span>
  <span class="key">"mcpServers"</span><span class="op">: {</span>
    <span class="key">"casino"</span><span class="op">: {</span>
      <span class="key">"command"</span><span class="op">:</span> <span class="str">"npx"</span><span class="op">,</span>
      <span class="key">"args"</span><span class="op">:</span> <span class="op">[</span><span class="str">"@purple-flea/casino-mcp"</span><span class="op">],</span>
      <span class="key">"env"</span><span class="op">: {</span> <span class="key">"CASINO_API_KEY"</span><span class="op">:</span> <span class="str">"your_key"</span> <span class="op">}</span>
    <span class="op">},</span>
    <span class="key">"trading"</span><span class="op">: {</span>
      <span class="key">"command"</span><span class="op">:</span> <span class="str">"npx"</span><span class="op">,</span>
      <span class="key">"args"</span><span class="op">:</span> <span class="op">[</span><span class="str">"@purple-flea/trading-mcp"</span><span class="op">],</span>
      <span class="key">"env"</span><span class="op">: {</span> <span class="key">"TRADING_API_KEY"</span><span class="op">:</span> <span class="str">"your_key"</span> <span class="op">}</span>
    <span class="op">},</span>
    <span class="key">"wallet"</span><span class="op">: {</span>
      <span class="key">"command"</span><span class="op">:</span> <span class="str">"npx"</span><span class="op">,</span>
      <span class="key">"args"</span><span class="op">:</span> <span class="op">[</span><span class="str">"@purple-flea/wallet-mcp"</span><span class="op">],</span>
      <span class="key">"env"</span><span class="op">: {</span> <span class="key">"WALLET_API_KEY"</span><span class="op">:</span> <span class="str">"your_key"</span> <span class="op">}</span>
    <span class="op">},</span>
    <span class="key">"domains"</span><span class="op">: {</span>
      <span class="key">"command"</span><span class="op">:</span> <span class="str">"npx"</span><span class="op">,</span>
      <span class="key">"args"</span><span class="op">:</span> <span class="op">[</span><span class="str">"@purple-flea/domains-mcp"</span><span class="op">],</span>
      <span class="key">"env"</span><span class="op">: {</span> <span class="key">"DOMAINS_API_KEY"</span><span class="op">:</span> <span class="str">"your_key"</span> <span class="op">}</span>
    <span class="op">}</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre>

        <p>After saving the file, restart Claude Desktop. You will see a small plug icon in the bottom-left of the chat composer indicating connected MCP servers. Click it to verify all four servers show a green status dot.</p>

        <h3>Installation Steps</h3>
        <ol class="step-list">
          <li>
            <div class="step-content">
              <div class="step-title">Create a Purple Flea account</div>
              Visit <a href="https://purpleflea.com/dashboard">purpleflea.com/dashboard</a>, sign up, and navigate to API Keys. Generate separate keys for casino, trading, wallet, and domains.
            </div>
          </li>
          <li>
            <div class="step-content">
              <div class="step-title">Verify Node.js 20+</div>
              Run <code>node --version</code> in your terminal. If you are below v20, install via <a href="https://nodejs.org">nodejs.org</a> or <code>nvm install 20</code>.
            </div>
          </li>
          <li>
            <div class="step-content">
              <div class="step-title">Edit the config file</div>
              Open <code>~/.claude/claude_desktop_config.json</code> in any editor, paste the JSON above, and replace each <code>"your_key"</code> with your real keys.
            </div>
          </li>
          <li>
            <div class="step-content">
              <div class="step-title">Restart Claude Desktop</div>
              Fully quit the app (Cmd+Q / Alt+F4) and relaunch. Check the MCP status indicator in the composer.
            </div>
          </li>
          <li>
            <div class="step-content">
              <div class="step-title">Test with a simple query</div>
              Type "What tools do you have available?" ‚Äî Claude will enumerate every tool from all four servers.
            </div>
          </li>
        </ol>
      </section>

      <!-- ‚îÄ‚îÄ SECTION 5: DEMO ‚îÄ‚îÄ -->
      <section id="demo">
        <h2>Demo: Crypto Balance + Casino Bet in One Message</h2>
        <p>
          Let's watch Claude handle a compound financial request end-to-end: check the current wallet balance, then place a $5 coin-flip bet if the balance is sufficient.
        </p>

        <div class="chat-demo">
          <div class="chat-header">
            <div class="chat-dots">
              <div class="chat-dot dot-red"></div>
              <div class="chat-dot dot-yellow"></div>
              <div class="chat-dot dot-green"></div>
            </div>
            <span class="chat-title">Claude Desktop ‚Äî with Purple Flea MCP servers connected</span>
          </div>
          <div class="chat-body">

            <div class="msg">
              <div class="msg-avatar avatar-user">U</div>
              <div class="msg-content">
                <div class="msg-role role-user">User</div>
                <div class="msg-text">Check my crypto balance and if I have more than $20 worth of USDC, place a $5 bet on coin flip.</div>
              </div>
            </div>

            <div class="msg">
              <div class="msg-avatar avatar-claude">C</div>
              <div class="msg-content">
                <div class="msg-role role-claude">Claude</div>
                <div class="msg-text">Sure ‚Äî let me check your wallet balance first, then decide whether to place the bet.</div>
              </div>
            </div>

            <div class="msg">
              <div class="msg-avatar avatar-tool">T</div>
              <div class="msg-content">
                <div class="msg-role role-tool">Tool Call ‚Äî wallet.get_balances</div>
                <div class="tool-call-block">
                  <div class="tool-call-label">Request</div>
                  { "chains": ["ethereum", "polygon"], "tokens": ["USDC"] }
                  <br><br>
                  <div class="tool-call-label">Response</div>
                  {
                    "balances": [
                      { "chain": "polygon", "token": "USDC", "amount": "47.82", "usd_value": "47.82" },
                      { "chain": "ethereum", "token": "USDC", "amount": "0.00", "usd_value": "0.00" }
                    ],
                    "total_usd": "47.82"
                  }
                </div>
              </div>
            </div>

            <div class="msg">
              <div class="msg-avatar avatar-claude">C</div>
              <div class="msg-content">
                <div class="msg-role role-claude">Claude</div>
                <div class="msg-text">Your total USDC balance is $47.82 (all on Polygon), which is above $20. Placing a $5 coin-flip bet now.</div>
              </div>
            </div>

            <div class="msg">
              <div class="msg-avatar avatar-tool">T</div>
              <div class="msg-content">
                <div class="msg-role role-tool">Tool Call ‚Äî casino.place_bet</div>
                <div class="tool-call-block">
                  <div class="tool-call-label">Request</div>
                  { "game": "coin_flip", "amount": "5", "currency": "USDC", "choice": "heads" }
                  <br><br>
                  <div class="tool-call-label">Response</div>
                  {
                    "bet_id": "bet_9xK2mP7qR",
                    "game": "coin_flip",
                    "choice": "heads",
                    "result": "tails",
                    "outcome": "loss",
                    "amount_wagered": "5.00",
                    "amount_won": "0.00",
                    "new_balance": "42.82",
                    "provably_fair_hash": "a3f9c2...d8e1"
                  }
                </div>
              </div>
            </div>

            <div class="msg">
              <div class="msg-avatar avatar-claude">C</div>
              <div class="msg-content">
                <div class="msg-role role-claude">Claude</div>
                <div class="msg-text">
                  Here's the summary:<br><br>
                  <strong>Wallet balance:</strong> $47.82 USDC (Polygon)<br>
                  <strong>Bet placed:</strong> $5 on heads ‚Äî coin landed <strong>tails</strong>, so this one's a loss.<br>
                  <strong>New balance:</strong> $42.82 USDC<br>
                  <strong>Bet ID:</strong> <code>bet_9xK2mP7qR</code> (provably fair ‚Äî hash: a3f9c2...d8e1)<br><br>
                  Want to try again or check your full transaction history?
                </div>
              </div>
            </div>

          </div>
        </div>

        <p>
          Notice that Claude autonomously chained two tool calls, applied conditional logic between them, and surfaced actionable output ‚Äî without any code. That is the power of MCP in a financial context.
        </p>
      </section>

      <!-- ‚îÄ‚îÄ SECTION 6: TOOL REFERENCE ‚îÄ‚îÄ -->
      <section id="tool-reference">
        <h2>Available MCP Tools Per Server</h2>
        <p>
          Each server exposes a curated set of tools. Below is the full reference as of February 2026. The live schema (including parameter types and validation rules) is always available via <code>tools/list</code> at runtime.
        </p>

        <div class="tools-section">
          <div class="tools-server-heading">@purple-flea/wallet-mcp</div>
          <div class="tool-row">
            <div class="tool-name">wallet.get_balances</div>
            <div class="tool-desc">Returns token balances across one or more chains. Supports EVM networks, Solana, and Bitcoin. Optionally filter by token symbol.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">wallet.get_transactions</div>
            <div class="tool-desc">Fetches paginated transaction history for a given address and chain, with USD value annotations.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">wallet.send_token</div>
            <div class="tool-desc">Broadcasts a token transfer. Requires recipient address, amount, token, and chain. Returns tx hash and explorer URL.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">wallet.generate_address</div>
            <div class="tool-desc">Derives and returns a fresh deposit address for a given chain and account index.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">wallet.estimate_gas</div>
            <div class="tool-desc">Estimates gas cost for a pending transfer in native currency and USD before execution.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">wallet.get_price</div>
            <div class="tool-desc">Returns the current USD spot price for any supported token, with 24-hour change percentage.</div>
          </div>
        </div>

        <div class="tools-section" style="margin-top: 32px;">
          <div class="tools-server-heading">@purple-flea/trading-mcp</div>
          <div class="tool-row">
            <div class="tool-name">trading.place_market_order</div>
            <div class="tool-desc">Executes an immediate market buy or sell for a given pair and quantity. Returns fill price and order ID.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">trading.place_limit_order</div>
            <div class="tool-desc">Places a resting limit order at a specified price. Supports GTC, IOC, and FOK time-in-force options.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">trading.cancel_order</div>
            <div class="tool-desc">Cancels a single open order by order ID, or all open orders for a given pair.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">trading.get_positions</div>
            <div class="tool-desc">Returns all open spot and perp positions with entry price, current mark price, unrealized P&amp;L, and liquidation price.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">trading.get_order_book</div>
            <div class="tool-desc">Fetches the top N bids and asks for a trading pair, with aggregated depth at each price level.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">trading.get_pnl_report</div>
            <div class="tool-desc">Generates a realized P&amp;L report for a date range, broken down by asset and trade.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">trading.get_funding_rate</div>
            <div class="tool-desc">Returns the current and predicted next funding rate for a perpetual contract.</div>
          </div>
        </div>

        <div class="tools-section" style="margin-top: 32px;">
          <div class="tools-server-heading">@purple-flea/casino-mcp</div>
          <div class="tool-row">
            <div class="tool-name">casino.place_bet</div>
            <div class="tool-desc">Places a bet on coin flip, dice, slots, or blackjack. Returns result, payout, new balance, and provably-fair seed hash.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">casino.get_game_history</div>
            <div class="tool-desc">Returns paginated bet history with outcomes and P&amp;L. Filter by game type, date range, or outcome.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">casino.verify_fairness</div>
            <div class="tool-desc">Verifies the provably fair outcome of any historical bet using its seed hash and nonce.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">casino.get_casino_balance</div>
            <div class="tool-desc">Returns the current gaming wallet balance, lifetime wagered amount, and net profit/loss.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">casino.get_active_promotions</div>
            <div class="tool-desc">Lists active bonuses, free spins, and deposit match promotions available to the account.</div>
          </div>
        </div>

        <div class="tools-section" style="margin-top: 32px;">
          <div class="tools-server-heading">@purple-flea/domains-mcp</div>
          <div class="tool-row">
            <div class="tool-name">domains.search_availability</div>
            <div class="tool-desc">Checks whether one or more domain names are available for registration, with pricing across TLDs.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">domains.register_domain</div>
            <div class="tool-desc">Registers a domain for a specified number of years. Deducts cost from wallet balance. Returns registrar confirmation.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">domains.list_domains</div>
            <div class="tool-desc">Returns all domains owned by the account with expiry dates, auto-renew status, and nameserver config.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">domains.update_dns</div>
            <div class="tool-desc">Adds, updates, or deletes DNS records (A, AAAA, CNAME, MX, TXT) for a managed domain.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">domains.whois_lookup</div>
            <div class="tool-desc">Returns parsed WHOIS data for any domain: registrar, creation/expiry dates, nameservers, and contact info.</div>
          </div>
          <div class="tool-row">
            <div class="tool-name">domains.mint_web3_domain</div>
            <div class="tool-desc">Mints a Web3 domain (.crypto, .eth, .sol) to a specified wallet address. Returns transaction hash and token ID.</div>
          </div>
        </div>
      </section>

      <!-- ‚îÄ‚îÄ SECTION 7: OTHER CLIENTS ‚îÄ‚îÄ -->
      <section id="other-clients">
        <h2>Using Purple Flea MCP Servers with Other Clients</h2>
        <p>
          MCP is client-agnostic. The same server configuration works across every compliant client. Here are the three most popular options beyond Claude Desktop.
        </p>

        <div class="client-grid">
          <div class="client-card">
            <div class="client-name">Cursor</div>
            <p class="client-desc">Add MCP servers in <strong>Settings ‚Üí MCP</strong>. Cursor supports the same JSON config format. Tools appear as inline autocomplete actions during coding sessions.</p>
          </div>
          <div class="client-card">
            <div class="client-name">Windsurf</div>
            <p class="client-desc">Configure via <strong>Preferences ‚Üí MCP Servers</strong>. Windsurf's Cascade agent natively chains MCP tool calls across multi-step agentic workflows.</p>
          </div>
          <div class="client-card">
            <div class="client-name">Custom Client</div>
            <p class="client-desc">Use the official <code>@modelcontextprotocol/sdk</code> TypeScript package to spawn servers, call <code>tools/list</code>, and invoke tools programmatically in your own app.</p>
          </div>
        </div>

        <h3>Custom Client ‚Äî Minimal Example</h3>
        <p>The following snippet connects to the wallet MCP server from Node.js, lists available tools, and calls <code>wallet.get_balances</code>:</p>

        <div class="code-label">custom-client.ts</div>
        <pre><code><span class="kw">import</span> <span class="op">{</span> Client <span class="op">}</span> <span class="kw">from</span> <span class="str">"@modelcontextprotocol/sdk/client/index.js"</span><span class="op">;</span>
<span class="kw">import</span> <span class="op">{</span> StdioClientTransport <span class="op">}</span> <span class="kw">from</span> <span class="str">"@modelcontextprotocol/sdk/client/stdio.js"</span><span class="op">;</span>

<span class="kw">const</span> transport <span class="op">=</span> <span class="kw">new</span> <span class="fn">StdioClientTransport</span><span class="op">({</span>
  command<span class="op">:</span> <span class="str">"npx"</span><span class="op">,</span>
  args<span class="op">:</span> <span class="op">[</span><span class="str">"@purple-flea/wallet-mcp"</span><span class="op">],</span>
  env<span class="op">:</span> <span class="op">{</span> <span class="op">...</span>process<span class="op">.</span>env<span class="op">,</span> WALLET_API_KEY<span class="op">:</span> process<span class="op">.</span>env<span class="op">.</span>WALLET_API_KEY <span class="op">}</span>
<span class="op">});</span>

<span class="kw">const</span> client <span class="op">=</span> <span class="kw">new</span> <span class="fn">Client</span><span class="op">({</span> name<span class="op">:</span> <span class="str">"my-agent"</span><span class="op">,</span> version<span class="op">:</span> <span class="str">"1.0.0"</span> <span class="op">},</span> <span class="op">{</span> capabilities<span class="op">:</span> <span class="op">{}</span> <span class="op">});</span>
<span class="kw">await</span> client<span class="op">.</span><span class="fn">connect</span><span class="op">(</span>transport<span class="op">);</span>

<span class="cmt">// Discover tools</span>
<span class="kw">const</span> <span class="op">{</span> tools <span class="op">}</span> <span class="op">=</span> <span class="kw">await</span> client<span class="op">.</span><span class="fn">listTools</span><span class="op">();</span>
console<span class="op">.</span><span class="fn">log</span><span class="op">(</span><span class="str">"Available tools:"</span><span class="op">,</span> tools<span class="op">.</span><span class="fn">map</span><span class="op">(</span>t <span class="op">=&gt;</span> t<span class="op">.</span>name<span class="op">));</span>

<span class="cmt">// Call a tool</span>
<span class="kw">const</span> result <span class="op">=</span> <span class="kw">await</span> client<span class="op">.</span><span class="fn">callTool</span><span class="op">({</span>
  name<span class="op">:</span> <span class="str">"wallet.get_balances"</span><span class="op">,</span>
  arguments<span class="op">:</span> <span class="op">{</span> chains<span class="op">:</span> <span class="op">[</span><span class="str">"ethereum"</span><span class="op">,</span> <span class="str">"polygon"</span><span class="op">],</span> tokens<span class="op">:</span> <span class="op">[</span><span class="str">"USDC"</span><span class="op">,</span> <span class="str">"ETH"</span><span class="op">]</span> <span class="op">}</span>
<span class="op">});</span>

console<span class="op">.</span><span class="fn">log</span><span class="op">(</span>JSON<span class="op">.</span><span class="fn">stringify</span><span class="op">(</span>result<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="num">2</span><span class="op">));</span>
<span class="kw">await</span> client<span class="op">.</span><span class="fn">close</span><span class="op">();</span></code></pre>
      </section>

      <!-- ‚îÄ‚îÄ SECTION 8: BUILDING CUSTOM SERVER ‚îÄ‚îÄ -->
      <section id="custom-server">
        <h2>Building a Custom MCP Server for Purple Flea</h2>
        <p>
          The four published servers cover most use cases, but you can build additional MCP servers that wrap Purple Flea's REST API with your own business logic, rate limiting, caching, or custom tool names. The following is a complete, runnable MCP server in Node.js that adds three custom tools on top of the wallet and trading APIs.
        </p>

        <div class="code-label">purple-flea-custom-mcp/src/index.ts</div>
        <pre><code><span class="cmt">#!/usr/bin/env node</span>
<span class="kw">import</span> <span class="op">{</span> Server <span class="op">}</span> <span class="kw">from</span> <span class="str">"@modelcontextprotocol/sdk/server/index.js"</span><span class="op">;</span>
<span class="kw">import</span> <span class="op">{</span> StdioServerTransport <span class="op">}</span> <span class="kw">from</span> <span class="str">"@modelcontextprotocol/sdk/server/stdio.js"</span><span class="op">;</span>
<span class="kw">import</span> <span class="op">{</span>
  CallToolRequestSchema<span class="op">,</span>
  ListToolsRequestSchema<span class="op">,</span>
  ErrorCode<span class="op">,</span>
  McpError<span class="op">,</span>
<span class="op">}</span> <span class="kw">from</span> <span class="str">"@modelcontextprotocol/sdk/types.js"</span><span class="op">;</span>

<span class="kw">const</span> WALLET_API_KEY  <span class="op">=</span> process<span class="op">.</span>env<span class="op">.</span>WALLET_API_KEY  <span class="op">??</span> <span class="str">""</span><span class="op">;</span>
<span class="kw">const</span> TRADING_API_KEY <span class="op">=</span> process<span class="op">.</span>env<span class="op">.</span>TRADING_API_KEY <span class="op">??</span> <span class="str">""</span><span class="op">;</span>
<span class="kw">const</span> BASE_URL        <span class="op">=</span> <span class="str">"https://api.purpleflea.com/v1"</span><span class="op">;</span>

<span class="kw">async function</span> <span class="fn">apiFetch</span><span class="op">(</span>path<span class="op">:</span> string<span class="op">,</span> apiKey<span class="op">:</span> string<span class="op">,</span> body<span class="op">?:</span> unknown<span class="op">) {</span>
  <span class="kw">const</span> res <span class="op">=</span> <span class="kw">await</span> <span class="fn">fetch</span><span class="op">(`${</span>BASE_URL<span class="op">}${</span>path<span class="op">}`, {</span>
    method<span class="op">:</span> body <span class="op">?</span> <span class="str">"POST"</span> <span class="op">:</span> <span class="str">"GET"</span><span class="op">,</span>
    headers<span class="op">: {</span>
      <span class="str">"Authorization"</span><span class="op">: `Bearer ${</span>apiKey<span class="op">}`,</span>
      <span class="str">"Content-Type"</span><span class="op">:</span>  <span class="str">"application/json"</span><span class="op">,</span>
    <span class="op">},</span>
    body<span class="op">:</span> body <span class="op">?</span> JSON<span class="op">.</span><span class="fn">stringify</span><span class="op">(</span>body<span class="op">) :</span> <span class="kw">undefined</span><span class="op">,</span>
  <span class="op">});</span>
  <span class="kw">if</span> <span class="op">(!</span>res<span class="op">.</span>ok<span class="op">)</span> <span class="kw">throw new</span> <span class="fn">McpError</span><span class="op">(</span>ErrorCode<span class="op">.</span>InternalError<span class="op">,</span> <span class="kw">await</span> res<span class="op">.</span><span class="fn">text</span><span class="op">());</span>
  <span class="kw">return</span> res<span class="op">.</span><span class="fn">json</span><span class="op">();</span>
<span class="op">}</span>

<span class="kw">const</span> server <span class="op">=</span> <span class="kw">new</span> <span class="fn">Server</span><span class="op">(</span>
  <span class="op">{</span> name<span class="op">:</span> <span class="str">"purple-flea-custom"</span><span class="op">,</span> version<span class="op">:</span> <span class="str">"1.0.0"</span> <span class="op">},</span>
  <span class="op">{</span> capabilities<span class="op">: {</span> tools<span class="op">: {} } },</span>
<span class="op">);</span>

<span class="cmt">// ‚îÄ‚îÄ Tool definitions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
server<span class="op">.</span><span class="fn">setRequestHandler</span><span class="op">(</span>ListToolsRequestSchema<span class="op">, async () => ({</span>
  tools<span class="op">: [</span>
    <span class="op">{</span>
      name<span class="op">:</span>        <span class="str">"pf.portfolio_summary"</span><span class="op">,</span>
      description<span class="op">:</span> <span class="str">"Returns a unified portfolio view: wallet balances + open trading positions + net USD value."</span><span class="op">,</span>
      inputSchema<span class="op">: {</span> type<span class="op">:</span> <span class="str">"object"</span><span class="op">,</span> properties<span class="op">: {},</span> required<span class="op">: [] },</span>
    <span class="op">},</span>
    <span class="op">{</span>
      name<span class="op">:</span>        <span class="str">"pf.rebalance"</span><span class="op">,</span>
      description<span class="op">:</span> <span class="str">"Calculates the trades needed to hit target allocations and optionally executes them."</span><span class="op">,</span>
      inputSchema<span class="op">: {</span>
        type<span class="op">:</span> <span class="str">"object"</span><span class="op">,</span>
        properties<span class="op">: {</span>
          targets<span class="op">: {</span> type<span class="op">:</span> <span class="str">"object"</span><span class="op">,</span> description<span class="op">:</span> <span class="str">"Token symbol ‚Üí target % (e.g. {BTC: 50, ETH: 30, USDC: 20})"</span> <span class="op">},</span>
          execute<span class="op">: {</span> type<span class="op">:</span> <span class="str">"boolean"</span><span class="op">,</span> description<span class="op">:</span> <span class="str">"Set true to place the rebalancing orders"</span> <span class="op">},</span>
        <span class="op">},</span>
        required<span class="op">: [</span><span class="str">"targets"</span><span class="op">],</span>
      <span class="op">},</span>
    <span class="op">},</span>
    <span class="op">{</span>
      name<span class="op">:</span>        <span class="str">"pf.daily_report"</span><span class="op">,</span>
      description<span class="op">:</span> <span class="str">"Generates a concise daily P&L report covering trades, casino activity, and wallet movements."</span><span class="op">,</span>
      inputSchema<span class="op">: {</span>
        type<span class="op">:</span> <span class="str">"object"</span><span class="op">,</span>
        properties<span class="op">: {</span>
          date<span class="op">: {</span> type<span class="op">:</span> <span class="str">"string"</span><span class="op">,</span> description<span class="op">:</span> <span class="str">"ISO date string, defaults to today"</span> <span class="op">},</span>
        <span class="op">},</span>
        required<span class="op">: [],</span>
      <span class="op">},</span>
    <span class="op">},</span>
  <span class="op">],</span>
<span class="op">}));</span>

<span class="cmt">// ‚îÄ‚îÄ Tool handlers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
server<span class="op">.</span><span class="fn">setRequestHandler</span><span class="op">(</span>CallToolRequestSchema<span class="op">, async (</span>req<span class="op">) => {</span>
  <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> arguments<span class="op">:</span> args <span class="op">} =</span> req<span class="op">.</span>params<span class="op">;</span>

  <span class="kw">switch</span> <span class="op">(</span>name<span class="op">) {</span>
    <span class="kw">case</span> <span class="str">"pf.portfolio_summary"</span><span class="op">: {</span>
      <span class="kw">const</span> <span class="op">[</span>balances<span class="op">,</span> positions<span class="op">] =</span> <span class="kw">await</span> Promise<span class="op">.</span><span class="fn">all</span><span class="op">([</span>
        <span class="fn">apiFetch</span><span class="op">(</span><span class="str">"/wallet/balances"</span><span class="op">,</span> WALLET_API_KEY<span class="op">),</span>
        <span class="fn">apiFetch</span><span class="op">(</span><span class="str">"/trading/positions"</span><span class="op">,</span> TRADING_API_KEY<span class="op">),</span>
      <span class="op">]);</span>
      <span class="kw">return</span> <span class="op">{</span> content<span class="op">: [{</span> type<span class="op">:</span> <span class="str">"text"</span><span class="op">,</span> text<span class="op">:</span> JSON<span class="op">.</span><span class="fn">stringify</span><span class="op">({</span> balances<span class="op">,</span> positions <span class="op">},</span> <span class="kw">null</span><span class="op">,</span> <span class="num">2</span><span class="op">) }] };</span>
    <span class="op">}</span>

    <span class="kw">case</span> <span class="str">"pf.rebalance"</span><span class="op">: {</span>
      <span class="kw">const</span> plan <span class="op">=</span> <span class="kw">await</span> <span class="fn">apiFetch</span><span class="op">(</span><span class="str">"/trading/rebalance"</span><span class="op">,</span> TRADING_API_KEY<span class="op">, {</span>
        targets<span class="op">:</span> <span class="op">(</span>args <span class="kw">as</span> <span class="kw">any</span><span class="op">).</span>targets<span class="op">,</span>
        execute<span class="op">:</span> <span class="op">(</span>args <span class="kw">as</span> <span class="kw">any</span><span class="op">).</span>execute <span class="op">??</span> <span class="kw">false</span><span class="op">,</span>
      <span class="op">});</span>
      <span class="kw">return</span> <span class="op">{</span> content<span class="op">: [{</span> type<span class="op">:</span> <span class="str">"text"</span><span class="op">,</span> text<span class="op">:</span> JSON<span class="op">.</span><span class="fn">stringify</span><span class="op">(</span>plan<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="num">2</span><span class="op">) }] };</span>
    <span class="op">}</span>

    <span class="kw">case</span> <span class="str">"pf.daily_report"</span><span class="op">: {</span>
      <span class="kw">const</span> date <span class="op">= (</span>args <span class="kw">as</span> <span class="kw">any</span><span class="op">).</span>date <span class="op">??</span> <span class="kw">new</span> <span class="fn">Date</span><span class="op">().</span><span class="fn">toISOString</span><span class="op">().</span><span class="fn">slice</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">10</span><span class="op">);</span>
      <span class="kw">const</span> report <span class="op">=</span> <span class="kw">await</span> <span class="fn">apiFetch</span><span class="op">(</span><span class="str">`/reports/daily?date=${</span>date<span class="op">}`</span><span class="op">,</span> TRADING_API_KEY<span class="op">);</span>
      <span class="kw">return</span> <span class="op">{</span> content<span class="op">: [{</span> type<span class="op">:</span> <span class="str">"text"</span><span class="op">,</span> text<span class="op">:</span> JSON<span class="op">.</span><span class="fn">stringify</span><span class="op">(</span>report<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="num">2</span><span class="op">) }] };</span>
    <span class="op">}</span>

    <span class="kw">default</span><span class="op">:</span>
      <span class="kw">throw new</span> <span class="fn">McpError</span><span class="op">(</span>ErrorCode<span class="op">.</span>MethodNotFound<span class="op">, `Unknown tool: ${</span>name<span class="op">}`);</span>
  <span class="op">}</span>
<span class="op">});</span>

<span class="cmt">// ‚îÄ‚îÄ Start server ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="kw">const</span> transport <span class="op">=</span> <span class="kw">new</span> <span class="fn">StdioServerTransport</span><span class="op">();</span>
<span class="kw">await</span> server<span class="op">.</span><span class="fn">connect</span><span class="op">(</span>transport<span class="op">);</span>
console<span class="op">.</span><span class="fn">error</span><span class="op">(</span><span class="str">"Purple Flea custom MCP server running on stdio"</span><span class="op">);</span></code></pre>

        <p>
          To use this server, add it to your <code>claude_desktop_config.json</code> the same way as the published servers, pointing <code>command</code> at <code>node</code> and <code>args</code> at your compiled output file.
        </p>
      </section>

      <!-- ‚îÄ‚îÄ SECTION 9: MULTI-AGENT ‚îÄ‚îÄ -->
      <section id="multi-agent">
        <h2>Multi-Agent Patterns with an Orchestrator MCP Server</h2>
        <p>
          As your agent architecture matures, you may want a single high-level MCP server that fans out to the individual Purple Flea servers on behalf of an orchestrator agent. This pattern has several advantages:
        </p>
        <ul>
          <li><strong>Single connection surface.</strong> The orchestrator agent connects to one server; all routing is internal.</li>
          <li><strong>Composed transactions.</strong> Complex operations (e.g., "sell ETH and use proceeds to register a domain") can be implemented as atomic tools.</li>
          <li><strong>Centralized rate limiting and logging.</strong> All Purple Flea API calls flow through a single process where you can add audit logs, spend caps, and circuit breakers.</li>
          <li><strong>Sub-agent delegation.</strong> The orchestrator MCP server can itself spawn sub-agent LLM calls for tasks that require reasoning (e.g., deciding which position to reduce during a rebalance).</li>
        </ul>

        <h3>Orchestrator Architecture Diagram</h3>

        <pre><code>
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ               Claude Orchestrator Agent              ‚îÇ
  ‚îÇ             (claude-opus-4-6 via API)                ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ MCP (stdio)
                         ‚ñº
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ           Orchestrator MCP Server                    ‚îÇ
  ‚îÇ   pf.execute_strategy / pf.compound_action          ‚îÇ
  ‚îÇ              (your Node.js process)                  ‚îÇ
  ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò
     ‚îÇ MCP (stdio)   ‚îÇ MCP (stdio)    ‚îÇ MCP (stdio)  ‚îÇ MCP (stdio)
     ‚ñº               ‚ñº                ‚ñº              ‚ñº
  wallet-mcp    trading-mcp      casino-mcp    domains-mcp
        </code></pre>

        <h3>Orchestrator Server Skeleton</h3>

        <div class="code-label">orchestrator-mcp/src/index.ts (key excerpt)</div>
        <pre><code><span class="kw">import</span> <span class="op">{</span> Client <span class="op">}</span> <span class="kw">from</span> <span class="str">"@modelcontextprotocol/sdk/client/index.js"</span><span class="op">;</span>
<span class="kw">import</span> <span class="op">{</span> StdioClientTransport <span class="op">}</span> <span class="kw">from</span> <span class="str">"@modelcontextprotocol/sdk/client/stdio.js"</span><span class="op">;</span>

<span class="cmt">// Helper: connect to a downstream Purple Flea MCP server</span>
<span class="kw">async function</span> <span class="fn">connectDownstream</span><span class="op">(</span>pkg<span class="op">:</span> string<span class="op">,</span> envKey<span class="op">:</span> string<span class="op">) {</span>
  <span class="kw">const</span> t <span class="op">=</span> <span class="kw">new</span> <span class="fn">StdioClientTransport</span><span class="op">({</span>
    command<span class="op">:</span> <span class="str">"npx"</span><span class="op">,</span>
    args<span class="op">: [</span>pkg<span class="op">],</span>
    env<span class="op">: {</span> <span class="op">...</span>process<span class="op">.</span>env<span class="op">,</span> <span class="op">[</span>envKey<span class="op">]:</span> process<span class="op">.</span>env<span class="op">[</span>envKey<span class="op">]</span> <span class="op">},</span>
  <span class="op">});</span>
  <span class="kw">const</span> c <span class="op">=</span> <span class="kw">new</span> <span class="fn">Client</span><span class="op">({</span> name<span class="op">:</span> <span class="str">"orchestrator"</span><span class="op">,</span> version<span class="op">:</span> <span class="str">"1.0.0"</span> <span class="op">}, {</span> capabilities<span class="op">: {} });</span>
  <span class="kw">await</span> c<span class="op">.</span><span class="fn">connect</span><span class="op">(</span>t<span class="op">);</span>
  <span class="kw">return</span> c<span class="op">;</span>
<span class="op">}</span>

<span class="cmt">// Initialise all downstream connections at startup</span>
<span class="kw">const</span> wallet  <span class="op">=</span> <span class="kw">await</span> <span class="fn">connectDownstream</span><span class="op">(</span><span class="str">"@purple-flea/wallet-mcp"</span><span class="op">,</span>  <span class="str">"WALLET_API_KEY"</span><span class="op">);</span>
<span class="kw">const</span> trading <span class="op">=</span> <span class="kw">await</span> <span class="fn">connectDownstream</span><span class="op">(</span><span class="str">"@purple-flea/trading-mcp"</span><span class="op">,</span> <span class="str">"TRADING_API_KEY"</span><span class="op">);</span>
<span class="kw">const</span> casino  <span class="op">=</span> <span class="kw">await</span> <span class="fn">connectDownstream</span><span class="op">(</span><span class="str">"@purple-flea/casino-mcp"</span><span class="op">,</span>  <span class="str">"CASINO_API_KEY"</span><span class="op">);</span>
<span class="kw">const</span> domains <span class="op">=</span> <span class="kw">await</span> <span class="fn">connectDownstream</span><span class="op">(</span><span class="str">"@purple-flea/domains-mcp"</span><span class="op">,</span> <span class="str">"DOMAINS_API_KEY"</span><span class="op">);</span>

<span class="cmt">// Compound tool: sell ETH ‚Üí register domain</span>
<span class="kw">async function</span> <span class="fn">sellAndRegisterDomain</span><span class="op">(</span>domainName<span class="op">:</span> string<span class="op">,</span> ethAmount<span class="op">:</span> string<span class="op">) {</span>
  <span class="cmt">// 1. Sell ETH to get USDC</span>
  <span class="kw">const</span> order <span class="op">=</span> <span class="kw">await</span> trading<span class="op">.</span><span class="fn">callTool</span><span class="op">({</span>
    name<span class="op">:</span> <span class="str">"trading.place_market_order"</span><span class="op">,</span>
    arguments<span class="op">: {</span> side<span class="op">:</span> <span class="str">"sell"</span><span class="op">,</span> pair<span class="op">:</span> <span class="str">"ETH/USDC"</span><span class="op">,</span> amount<span class="op">:</span> ethAmount <span class="op">},</span>
  <span class="op">});</span>

  <span class="cmt">// 2. Check domain availability</span>
  <span class="kw">const</span> avail <span class="op">=</span> <span class="kw">await</span> domains<span class="op">.</span><span class="fn">callTool</span><span class="op">({</span>
    name<span class="op">:</span> <span class="str">"domains.search_availability"</span><span class="op">,</span>
    arguments<span class="op">: {</span> names<span class="op">: [</span>domainName<span class="op">] },</span>
  <span class="op">});</span>

  <span class="cmt">// 3. Register if available</span>
  <span class="kw">const</span> reg <span class="op">=</span> <span class="kw">await</span> domains<span class="op">.</span><span class="fn">callTool</span><span class="op">({</span>
    name<span class="op">:</span> <span class="str">"domains.register_domain"</span><span class="op">,</span>
    arguments<span class="op">: {</span> name<span class="op">:</span> domainName<span class="op">,</span> years<span class="op">:</span> <span class="num">1</span> <span class="op">},</span>
  <span class="op">});</span>

  <span class="kw">return</span> <span class="op">{</span> order<span class="op">,</span> availability<span class="op">:</span> avail<span class="op">,</span> registration<span class="op">:</span> reg <span class="op">};</span>
<span class="op">}</span></code></pre>

        <p>
          By composing downstream MCP clients inside an upstream MCP server, you build a tree of tools that the orchestrator agent can invoke with a single high-level command. The pattern scales naturally: add more Purple Flea servers as downstream children, or add other third-party MCP servers into the same tree.
        </p>

        <div class="info-box">
          <div class="info-box-title">Note on concurrency</div>
          <p>When fanning out to multiple downstream servers simultaneously, use <code>Promise.all</code> for independent calls and sequential awaits for calls with data dependencies. Downstream MCP stdio transports are single-threaded per process, so a slow downstream call will block that server's other requests ‚Äî design your orchestrator accordingly.</p>
        </div>
      </section>

      <hr>

      <!-- ‚îÄ‚îÄ SECTION 10: CTA ‚îÄ‚îÄ -->
      <section id="get-started" class="cta-section">
        <h2>Start Building with Purple Flea MCP Servers</h2>
        <p style="color: var(--text-secondary); max-width: 480px; margin: 0 auto 28px; font-size: 15px;">
          Get your API keys in under a minute. Four MCP servers, no infrastructure to manage, production-grade financial tooling available immediately to any AI agent.
        </p>
        <div>
          <a href="https://purpleflea.com/dashboard" class="cta-btn">Get API Keys Free</a>
          <a href="https://purpleflea.com/docs/mcp" class="cta-btn cta-btn-outline">Read Full Docs</a>
        </div>
        <p style="margin-top: 20px; font-size: 13px; color: var(--text-muted);">
          No credit card required for the free tier. Upgrade when you need higher rate limits.
        </p>
      </section>

    </article>

    <!-- ‚îÄ‚îÄ SIDEBAR TOC ‚îÄ‚îÄ -->
    <aside>
      <nav class="toc-sidebar" aria-label="Table of contents">
        <div class="toc-title">On This Page</div>
        <ul class="toc-list">
          <li><a href="#introduction">Introduction</a></li>
          <li><a href="#what-is-mcp">What Is MCP?</a></li>
          <li><a href="#purple-flea-servers">Purple Flea Servers</a></li>
          <li><a href="#setup">Setup Guide</a></li>
          <li><a href="#demo">Demo Conversation</a></li>
          <li><a href="#tool-reference">Tool Reference</a></li>
          <li><a href="#other-clients">Other MCP Clients</a></li>
          <li><a href="#custom-server">Custom MCP Server</a></li>
          <li><a href="#multi-agent">Multi-Agent Patterns</a></li>
          <li><a href="#get-started">Get Started</a></li>
        </ul>
      </nav>
    </aside>

  </div><!-- end content-grid -->
</div><!-- end page-wrapper -->

</body>
</html>
