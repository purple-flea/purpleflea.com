<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Purple Flea Docs ‚Äî API Reference & Developer Guide</title>
<meta name="description" content="Complete API documentation for Purple Flea: Casino, Trading, Wallet, Domains APIs. Getting started guides, SDK references, MCP server setup, and referral system documentation.">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://purpleflea.com/docs">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üü£</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "name": "Purple Flea API Documentation",
  "url": "https://purpleflea.com/docs",
  "description": "API reference documentation for Purple Flea: Casino, Trading, Wallet, and Domains APIs for autonomous AI agents.",
  "author": {"@type": "Organization", "name": "Purple Flea", "url": "https://purpleflea.com"},
  "publisher": {"@type": "Organization", "name": "Purple Flea", "url": "https://purpleflea.com"}
}
</script>

<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --purple: #A855F7;
  --purple-dim: #7C3AED;
  --purple-glow: rgba(168, 85, 247, 0.2);
  --bg: #09090B;
  --bg-sidebar: #0D0D10;
  --bg-card: rgba(255, 255, 255, 0.03);
  --bg-card-hover: rgba(255, 255, 255, 0.05);
  --border: rgba(255, 255, 255, 0.06);
  --border-purple: rgba(168, 85, 247, 0.25);
  --text: #FAFAFA;
  --text-secondary: #A1A1AA;
  --text-muted: #71717A;
  --green: #22C55E;
  --blue: #60A5FA;
  --amber: #F59E0B;
  --red: #F87171;
  --radius: 12px;
  --mono: 'JetBrains Mono', 'Fira Code', monospace;
  --sidebar-width: 260px;
}

html { scroll-behavior: smooth; }

body {
  font-family: 'Inter', -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  display: flex;
  min-height: 100vh;
}

/* Scrollbar */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(168,85,247,0.25); border-radius: 3px; }

/* Sidebar */
.sidebar {
  width: var(--sidebar-width);
  flex-shrink: 0;
  background: var(--bg-sidebar);
  border-right: 1px solid var(--border);
  height: 100vh;
  position: sticky;
  top: 0;
  overflow-y: auto;
  padding: 20px 0 40px;
}
.sidebar-logo {
  display: flex; align-items: center; gap: 8px;
  padding: 0 20px 20px;
  border-bottom: 1px solid var(--border);
  text-decoration: none; color: var(--text);
  font-weight: 700; font-size: 0.95rem;
}
.sidebar-logo-icon { color: var(--purple); font-size: 1.1rem; }
.sidebar-section {
  padding: 20px 20px 8px;
  font-size: 0.65rem; font-weight: 700; letter-spacing: 0.12em;
  text-transform: uppercase; color: var(--text-muted);
}
.sidebar-link {
  display: block; padding: 7px 20px;
  font-size: 0.825rem; color: var(--text-secondary);
  text-decoration: none; border-left: 2px solid transparent;
  transition: all 0.15s;
}
.sidebar-link:hover { color: var(--text); background: rgba(255,255,255,0.03); }
.sidebar-link.active {
  color: var(--purple); border-left-color: var(--purple);
  background: rgba(168,85,247,0.06);
}
.sidebar-link.sub { padding-left: 32px; font-size: 0.78rem; }

/* Main content */
.main {
  flex: 1;
  min-width: 0;
  max-width: 800px;
  padding: 48px 48px 80px;
}
@media (max-width: 768px) {
  body { flex-direction: column; }
  .sidebar { width: 100%; height: auto; position: static; }
  .main { padding: 24px 20px 60px; }
}

/* Nav bar */
.topnav {
  width: 100%;
  position: sticky; top: 0; z-index: 100;
  background: rgba(9,9,11,0.9); backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
  padding: 12px 20px;
  display: flex; align-items: center; justify-content: space-between;
}
.topnav-links { display: flex; gap: 20px; }
.topnav-links a { font-size: 0.825rem; color: var(--text-secondary); text-decoration: none; }
.topnav-links a:hover { color: var(--text); }

/* Typography */
h1 { font-size: 2rem; font-weight: 800; letter-spacing: -0.04em; line-height: 1.15; margin-bottom: 16px; }
h2 { font-size: 1.4rem; font-weight: 700; letter-spacing: -0.03em; margin: 40px 0 14px; padding-top: 20px; border-top: 1px solid var(--border); }
h2:first-child { border-top: none; padding-top: 0; margin-top: 0; }
h3 { font-size: 1.05rem; font-weight: 600; letter-spacing: -0.02em; margin: 28px 0 10px; color: var(--text); }
p { color: var(--text-secondary); margin-bottom: 14px; font-size: 0.925rem; }
p:last-child { margin-bottom: 0; }
a { color: var(--purple); text-decoration: none; }
a:hover { text-decoration: underline; }
ul, ol { color: var(--text-secondary); margin: 12px 0 16px 20px; font-size: 0.9rem; }
li { margin-bottom: 6px; }
strong { color: var(--text); font-weight: 600; }
code {
  font-family: var(--mono); font-size: 0.82em;
  background: rgba(168,85,247,0.1); color: var(--purple);
  padding: 1px 5px; border-radius: 4px;
}

/* Page intro */
.page-intro {
  padding-bottom: 32px; margin-bottom: 12px;
  border-bottom: 1px solid var(--border);
}
.page-tag {
  display: inline-flex; align-items: center; gap: 6px;
  background: rgba(168,85,247,0.1); border: 1px solid var(--border-purple);
  color: var(--purple); font-size: 0.72rem; font-weight: 600;
  padding: 3px 10px; border-radius: 20px; margin-bottom: 16px;
  text-transform: uppercase; letter-spacing: 0.06em;
}

/* Code block */
.code-block {
  background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.07);
  border-radius: var(--radius); padding: 18px 20px;
  font-family: var(--mono); font-size: 0.8rem; color: #D4D4D8;
  white-space: pre; overflow-x: auto; margin: 14px 0 20px;
  position: relative; line-height: 1.6;
}
.code-block .comment { color: var(--text-muted); }
.code-block .string { color: #86EFAC; }
.code-block .keyword { color: #C084FC; }
.code-block .number { color: #FCA5A5; }
.code-block .url { color: #67E8F9; }
.copy-btn {
  position: absolute; top: 10px; right: 10px;
  background: rgba(168,85,247,0.15); border: 1px solid var(--border-purple);
  color: var(--purple); font-size: 0.68rem; font-weight: 600;
  padding: 3px 10px; border-radius: 6px; cursor: pointer;
  font-family: 'Inter', sans-serif; transition: background 0.15s;
}
.copy-btn:hover { background: rgba(168,85,247,0.28); }

/* Endpoint rows */
.endpoint-table { margin: 16px 0 24px; display: flex; flex-direction: column; gap: 6px; }
.endpoint-row {
  display: flex; align-items: flex-start; gap: 12px;
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: 9px; padding: 12px 14px;
  transition: border-color 0.2s;
}
.endpoint-row:hover { border-color: var(--border-purple); }
.method {
  font-family: var(--mono); font-size: 0.62rem; font-weight: 700;
  padding: 2px 7px; border-radius: 4px; flex-shrink: 0;
  letter-spacing: 0.05em; margin-top: 2px;
}
.get { background: rgba(34,197,94,0.12); color: var(--green); }
.post { background: rgba(96,165,250,0.12); color: var(--blue); }
.put { background: rgba(245,158,11,0.12); color: var(--amber); }
.delete { background: rgba(248,113,113,0.12); color: var(--red); }
.endpoint-body { flex: 1; min-width: 0; }
.endpoint-path {
  font-family: var(--mono); font-size: 0.82rem;
  color: var(--text); margin-bottom: 4px;
}
.endpoint-desc { font-size: 0.78rem; color: var(--text-secondary); }
.endpoint-params { margin-top: 8px; font-size: 0.75rem; color: var(--text-muted); font-family: var(--mono); }

/* Param table */
.param-table {
  width: 100%; border-collapse: collapse;
  font-size: 0.82rem; margin: 12px 0 20px;
}
.param-table th {
  text-align: left; padding: 8px 12px;
  color: var(--text-muted); font-weight: 500; font-size: 0.72rem;
  border-bottom: 1px solid var(--border);
  text-transform: uppercase; letter-spacing: 0.06em;
}
.param-table td {
  padding: 10px 12px; border-bottom: 1px solid rgba(255,255,255,0.03);
  color: var(--text-secondary); vertical-align: top;
}
.param-table td:first-child { color: var(--text); font-family: var(--mono); font-size: 0.78rem; }
.param-table td.type { color: var(--amber); font-family: var(--mono); font-size: 0.75rem; }
.param-table td.required { color: var(--red); font-size: 0.72rem; }
.param-table td.optional { color: var(--text-muted); font-size: 0.72rem; }
.param-table tr:last-child td { border-bottom: none; }

/* Callout boxes */
.callout {
  border-radius: var(--radius); padding: 14px 18px;
  margin: 16px 0; font-size: 0.875rem;
  display: flex; gap: 12px; align-items: flex-start;
}
.callout-info { background: rgba(96,165,250,0.07); border: 1px solid rgba(96,165,250,0.2); }
.callout-success { background: rgba(34,197,94,0.07); border: 1px solid rgba(34,197,94,0.2); }
.callout-warning { background: rgba(245,158,11,0.07); border: 1px solid rgba(245,158,11,0.2); }
.callout-icon { font-size: 1rem; flex-shrink: 0; margin-top: 1px; }
.callout p { color: var(--text-secondary); margin: 0; font-size: 0.85rem; }
.callout strong { color: var(--text); }

/* Breadcrumb */
.breadcrumb {
  display: flex; gap: 8px; align-items: center;
  font-size: 0.78rem; color: var(--text-muted); margin-bottom: 20px;
}
.breadcrumb a { color: var(--text-muted); text-decoration: none; }
.breadcrumb a:hover { color: var(--purple); }
.breadcrumb span { color: var(--text-secondary); }

/* TOC */
.toc {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 20px 24px; margin: 0 0 32px;
}
.toc h4 { font-size: 0.72rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); margin-bottom: 12px; }
.toc ol { margin: 0 0 0 16px; }
.toc li { margin-bottom: 5px; }
.toc a { font-size: 0.825rem; color: var(--text-secondary); text-decoration: none; }
.toc a:hover { color: var(--purple); }

/* Commission badge */
.commission {
  display: inline-block; font-size: 0.72rem; font-weight: 700;
  padding: 3px 10px; border-radius: 20px;
}
.commission-green { background: rgba(34,197,94,0.1); color: var(--green); border: 1px solid rgba(34,197,94,0.2); }
.commission-purple { background: rgba(168,85,247,0.1); color: var(--purple); border: 1px solid var(--border-purple); }

/* Doc section cards */
.doc-cards {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 12px; margin: 24px 0;
}
@media (max-width: 600px) { .doc-cards { grid-template-columns: 1fr; } }
.doc-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 20px;
  text-decoration: none; color: var(--text);
  transition: border-color 0.2s, background 0.2s;
  display: block;
}
.doc-card:hover { border-color: var(--border-purple); background: var(--bg-card-hover); text-decoration: none; }
.doc-card-icon { font-size: 1.4rem; margin-bottom: 10px; }
.doc-card h3 { font-size: 0.95rem; margin: 0 0 6px; }
.doc-card p { font-size: 0.8rem; margin: 0; }
</style>
</head>
<body>

<!-- Sidebar -->
<aside class="sidebar">
  <a href="/" class="sidebar-logo">
    <span class="sidebar-logo-icon">&#9830;</span>
    Purple Flea
  </a>

  <div class="sidebar-section">Overview</div>
  <a href="#getting-started" class="sidebar-link">Getting Started</a>
  <a href="#authentication" class="sidebar-link sub">Authentication</a>
  <a href="#rate-limits" class="sidebar-link sub">Rate Limits</a>
  <a href="#errors" class="sidebar-link sub">Error Codes</a>

  <div class="sidebar-section">APIs</div>
  <a href="#casino" class="sidebar-link">Casino API</a>
  <a href="#trading" class="sidebar-link">Trading API</a>
  <a href="#wallet" class="sidebar-link">Wallet API</a>
  <a href="#domains" class="sidebar-link">Domains API</a>

  <div class="sidebar-section">Integrations</div>
  <a href="#referral" class="sidebar-link">Referral System</a>
  <a href="#mcp" class="sidebar-link">MCP Server</a>
  <a href="#sdk-langchain" class="sidebar-link">LangChain SDK</a>
  <a href="#sdk-crewai" class="sidebar-link">CrewAI SDK</a>

  <div class="sidebar-section">Links</div>
  <a href="https://purpleflea.com" class="sidebar-link">‚Üê purpleflea.com</a>
  <a href="/for-agents" class="sidebar-link">For Agents</a>
  <a href="/llms.txt" class="sidebar-link">llms.txt</a>
  <a href="https://github.com/purple-flea" target="_blank" class="sidebar-link">GitHub ‚Üó</a>
</aside>

<!-- Main -->
<main class="main">

  <div class="page-intro">
    <div class="breadcrumb">
      <a href="/">purpleflea.com</a>
      <span>/</span>
      <span>docs</span>
    </div>
    <div class="page-tag">Developer Documentation</div>
    <h1>Purple Flea API Docs</h1>
    <p>Complete reference for all Purple Flea APIs. Everything is REST. All responses are JSON. No dashboards ‚Äî just endpoints.</p>
    <div class="doc-cards">
      <a href="#casino" class="doc-card">
        <div class="doc-card-icon">üé≤</div>
        <h3>Casino API</h3>
        <p>Provably fair games. Coin flip, dice, roulette, crash. 10% referral.</p>
      </a>
      <a href="#trading" class="doc-card">
        <div class="doc-card-icon">üìà</div>
        <h3>Trading API</h3>
        <p>275+ perpetual futures via Hyperliquid. Up to 50x leverage. 20% referral.</p>
      </a>
      <a href="#wallet" class="doc-card">
        <div class="doc-card-icon">üíé</div>
        <h3>Wallet API</h3>
        <p>Non-custodial HD wallets on 8 chains. Best-rate DEX swaps. 10% referral.</p>
      </a>
      <a href="#domains" class="doc-card">
        <div class="doc-card-icon">üåê</div>
        <h3>Domains API</h3>
        <p>Register .ai/.com/.io domains. Manage DNS programmatically. 15% referral.</p>
      </a>
    </div>
  </div>

  <!-- Getting Started -->
  <section id="getting-started">
    <h2>Getting Started</h2>
    <p>All Purple Flea APIs share a common authentication model. Register once per service to get an API key and referral code. No KYC, no email verification required.</p>

    <h3>Quick Start (Casino)</h3>
    <div class="code-block" id="qs-1"><button class="copy-btn" onclick="copyBlock('qs-1',this)">Copy</button><span class="comment"># 1. Register and get your API key + referral code</span>
curl -X POST https://api.purpleflea.com/api/v1/register \
  -H "Content-Type: application/json" \
  -d '{"username": "my_agent", "email": "agent@example.com"}'

<span class="comment"># Response:</span>
<span class="string">{
  "api_key": "sk_live_abc123...",
  "referral_code": "REF_abc123",
  "user_id": "usr_...",
  "deposit_address": "0x..."
}</span>

<span class="comment"># 2. Place your first bet (coin flip)</span>
curl -X POST https://api.purpleflea.com/api/v1/flip \
  -H "Authorization: Bearer sk_live_abc123..." \
  -H "Content-Type: application/json" \
  -d '{"amount": 1.00, "side": "heads"}'

<span class="comment"># Response:</span>
<span class="string">{
  "result": "heads",
  "won": true,
  "payout": 1.99,
  "proof": "sha256:4d7e...",
  "server_seed_hash": "abc..."
}</span></div>

    <h3 id="authentication">Authentication</h3>
    <p>Pass your API key in the <code>Authorization</code> header on every request:</p>
    <div class="code-block">Authorization: Bearer sk_live_...</div>

    <div class="callout callout-info">
      <span class="callout-icon">‚ÑπÔ∏è</span>
      <p><strong>Referral codes:</strong> When registering new agents, pass <code>"referral_code": "REF_xxx"</code> in the register body. The referrer earns commissions on all activity from the referred agent ‚Äî forever.</p>
    </div>

    <h3 id="rate-limits">Rate Limits</h3>
    <table class="param-table">
      <thead><tr><th>Tier</th><th>Limit</th><th>Notes</th></tr></thead>
      <tbody>
        <tr><td>Free</td><td class="type">100 req/min</td><td>Default for new registrations</td></tr>
        <tr><td>Pro</td><td class="type">10,000 req/min</td><td>Contact hello@purpleflea.com</td></tr>
        <tr><td>Enterprise</td><td class="type">Unlimited</td><td>SLA available</td></tr>
      </tbody>
    </table>

    <h3 id="errors">Error Codes</h3>
    <table class="param-table">
      <thead><tr><th>Code</th><th>Meaning</th></tr></thead>
      <tbody>
        <tr><td>400</td><td>Bad request ‚Äî missing or invalid parameters</td></tr>
        <tr><td>401</td><td>Unauthorized ‚Äî invalid or missing API key</td></tr>
        <tr><td>402</td><td>Insufficient balance ‚Äî deposit required</td></tr>
        <tr><td>404</td><td>Not found ‚Äî market/position/domain not found</td></tr>
        <tr><td>429</td><td>Rate limited ‚Äî too many requests</td></tr>
        <tr><td>500</td><td>Internal error ‚Äî contact support</td></tr>
      </tbody>
    </table>
  </section>

  <!-- Casino API -->
  <section id="casino">
    <h2>Casino API</h2>
    <p>
      Base URL: <code>https://api.purpleflea.com/api/v1/</code><br>
      MCP Repo: <code>github.com/Purple-flea/casino-mcp</code><br>
      Referral: <span class="commission commission-green">10% of referred agent net losses</span>
    </p>

    <p>Provably fair gambling games. Every outcome uses a server seed + client seed + nonce scheme. Verify any bet at <code>GET /verify/:bet_id</code>. Minimum bet: $0.01. Maximum: $10,000. Payouts are instant in USDC.</p>

    <h3>Register</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/register</div>
          <div class="endpoint-desc">Create account and get API key</div>
          <div class="endpoint-params">Body: username*, email*, referral_code?</div>
        </div>
      </div>
    </div>

    <table class="param-table">
      <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td>username</td><td class="type">string</td><td class="required">required</td><td>Unique agent identifier</td></tr>
        <tr><td>email</td><td class="type">string</td><td class="required">required</td><td>For notifications (no verification)</td></tr>
        <tr><td>referral_code</td><td class="type">string</td><td class="optional">optional</td><td>Referrer's code ‚Äî links commission chain</td></tr>
      </tbody>
    </table>

    <h3>Wallet</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/balance</div>
          <div class="endpoint-desc">Get current balance and deposit address</div>
        </div>
      </div>
    </div>

    <div class="code-block" id="casino-balance"><button class="copy-btn" onclick="copyBlock('casino-balance',this)">Copy</button>curl https://api.purpleflea.com/api/v1/balance \
  -H "Authorization: Bearer sk_live_..."

<span class="string">{
  "balance_usd": 42.50,
  "deposit_address": "0xAbCd...",
  "pending_deposit": 0.00
}</span></div>

    <h3>Games</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/games</div>
          <div class="endpoint-desc">List all games with house edge and limits</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/flip</div>
          <div class="endpoint-desc">Provably fair coin flip ‚Äî heads or tails</div>
          <div class="endpoint-params">Body: amount*, side* (heads|tails)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/dice</div>
          <div class="endpoint-desc">Roll dice with custom over/under threshold</div>
          <div class="endpoint-params">Body: amount*, target* (over|under), target_value* (1-99)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/custom</div>
          <div class="endpoint-desc">Custom win probability bet (1-99%)</div>
          <div class="endpoint-params">Body: amount*, win_probability* (1-99)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/crash</div>
          <div class="endpoint-desc">Crash game ‚Äî cash out before it crashes</div>
          <div class="endpoint-params">Body: amount*, target_multiplier* (1.01 ‚Äì 100)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/roulette</div>
          <div class="endpoint-desc">European roulette (single zero)</div>
          <div class="endpoint-params">Body: amount*, bet_type* (color|number|dozen|column|even|odd), bet_value*</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/verify/:bet_id</div>
          <div class="endpoint-desc">Verify any past bet outcome ‚Äî cryptographic proof</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/history</div>
          <div class="endpoint-desc">Bet history with proofs</div>
          <div class="endpoint-params">Query: limit? (default 20, max 100)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/referrals</div>
          <div class="endpoint-desc">Your referral stats and earnings</div>
        </div>
      </div>
    </div>

    <h3>Example: dice roll</h3>
    <div class="code-block" id="casino-dice"><button class="copy-btn" onclick="copyBlock('casino-dice',this)">Copy</button>curl -X POST https://api.purpleflea.com/api/v1/dice \
  -H "Authorization: Bearer sk_live_..." \
  -H "Content-Type: application/json" \
  -d '{"amount": 5.00, "target": "over", "target_value": 50}'

<span class="string">{
  "roll": 73,
  "target": "over",
  "target_value": 50,
  "won": true,
  "payout": 9.95,
  "proof": "sha256:7f3e...",
  "server_seed_hash": "abc...",
  "nonce": 42
}</span></div>
  </section>

  <!-- Trading API -->
  <section id="trading">
    <h2>Trading API</h2>
    <p>
      Base URL: <code>https://api.purpleflea.com/v1/trading/</code><br>
      MCP Repo: <code>github.com/Purple-flea/trading-mcp</code><br>
      Referral: <span class="commission commission-green">20% of referred agent trading fees ‚Äî forever</span>
    </p>

    <p>Access 275+ perpetual futures markets via Hyperliquid. CEX-level liquidity on a DEX. Up to 50x leverage on major markets. Available markets include crypto pairs, stock perps (TSLA, NVDA, AAPL), commodities (GOLD, OIL), and forex (EUR-USD, GBP-USD).</p>

    <div class="callout callout-success">
      <span class="callout-icon">üí°</span>
      <p><strong>Best referral rate:</strong> At 20% of fees, trading is the highest-value referral in the ecosystem. An active trading agent generating $10,000/month in notional volume pays roughly $5 in fees ‚Äî you earn $1/month per agent. At 1,000 referred agents that's $1,000/month.</p>
    </div>

    <h3>Register</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/register</div>
          <div class="endpoint-desc">Create trading account</div>
          <div class="endpoint-params">Body: username*, email*, referral_code?</div>
        </div>
      </div>
    </div>

    <h3>Markets</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/markets</div>
          <div class="endpoint-desc">List all 275+ markets with price, funding rate, open interest</div>
        </div>
      </div>
    </div>

    <div class="code-block" id="trading-markets"><button class="copy-btn" onclick="copyBlock('trading-markets',this)">Copy</button>curl https://api.purpleflea.com/v1/trading/markets \
  -H "Authorization: Bearer sk_live_..."

<span class="string">{
  "markets": [
    {"id": "BTC-PERP", "price": 92450.00, "funding_rate": 0.0001, "open_interest": 1250000000},
    {"id": "ETH-PERP", "price": 3240.00, "funding_rate": -0.0002, "open_interest": 480000000},
    {"id": "TSLA-PERP", "price": 412.50, "funding_rate": 0.00005, "open_interest": 28000000},
    ...275 total
  ]
}</span></div>

    <h3>Positions</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/open</div>
          <div class="endpoint-desc">Open a leveraged perpetual position</div>
          <div class="endpoint-params">Body: market*, side* (long|short), size* (USD), leverage* (1-50)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/close</div>
          <div class="endpoint-desc">Close position and realize P&L</div>
          <div class="endpoint-params">Body: position_id*</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/stop-loss</div>
          <div class="endpoint-desc">Set stop loss on open position</div>
          <div class="endpoint-params">Body: position_id*, price*</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/take-profit</div>
          <div class="endpoint-desc">Set take profit on open position</div>
          <div class="endpoint-params">Body: position_id*, price*</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/positions</div>
          <div class="endpoint-desc">List open positions with unrealized P&L</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/orders</div>
          <div class="endpoint-desc">List pending orders (limit, stop loss, take profit)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/history</div>
          <div class="endpoint-desc">Trade history with fees paid</div>
          <div class="endpoint-params">Query: limit? (default 20)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/referrals</div>
          <div class="endpoint-desc">Referral stats and fee earnings</div>
        </div>
      </div>
    </div>

    <h3>Example: open ETH long position</h3>
    <div class="code-block" id="trading-open"><button class="copy-btn" onclick="copyBlock('trading-open',this)">Copy</button>curl -X POST https://api.purpleflea.com/v1/trading/open \
  -H "Authorization: Bearer sk_live_..." \
  -H "Content-Type: application/json" \
  -d '{
    "market": "ETH-PERP",
    "side": "long",
    "size": 1000,
    "leverage": 5
  }'

<span class="string">{
  "position_id": "pos_abc123",
  "market": "ETH-PERP",
  "side": "long",
  "size_usd": 1000,
  "leverage": 5,
  "entry_price": 3240.00,
  "liquidation_price": 2610.00,
  "margin_used": 200.00,
  "fee_paid": 0.50
}</span></div>
  </section>

  <!-- Wallet API -->
  <section id="wallet">
    <h2>Wallet API</h2>
    <p>
      Base URL: <code>https://wallet.purpleflea.com/v1/</code><br>
      OpenAPI: <code>https://wallet.purpleflea.com/openapi.json</code><br>
      Referral: <span class="commission commission-green">10% of referred agent swap fees</span>
    </p>

    <p>Non-custodial HD wallets. Mnemonics are generated client-side and never stored. Derives addresses for Ethereum, Base, Solana, Bitcoin, Tron, Polygon, Arbitrum, BNB. Cross-chain swaps powered by Wagyu (aggregator of 1inch, Paraswap, Jupiter, Li.Fi, 0x).</p>

    <h3>Register</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/auth/register</div>
          <div class="endpoint-desc">Create account ‚Äî returns API key and referral code</div>
          <div class="endpoint-params">Body: referral_code?</div>
        </div>
      </div>
    </div>

    <h3>Wallets</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/wallet/create</div>
          <div class="endpoint-desc">Generate BIP-39 HD wallet. Returns mnemonic ONCE ‚Äî store securely.</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/wallet/balance/:address</div>
          <div class="endpoint-desc">On-chain balance for address</div>
          <div class="endpoint-params">Query: chain* (base|ethereum|solana|bitcoin|tron|polygon|arbitrum|bnb)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/wallet/send</div>
          <div class="endpoint-desc">Sign and broadcast transaction</div>
          <div class="endpoint-params">Body: chain*, to*, amount*, private_key*, token? (ERC-20 contract address)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/wallet/chains</div>
          <div class="endpoint-desc">List supported chains (no auth required)</div>
        </div>
      </div>
    </div>

    <h3>Swaps</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/wallet/swap/quote</div>
          <div class="endpoint-desc">Get best-rate cross-chain swap quote</div>
          <div class="endpoint-params">Query: from_chain*, to_chain*, from_token*, to_token*, amount*</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/wallet/swap</div>
          <div class="endpoint-desc">Execute cross-chain swap via Wagyu aggregator</div>
          <div class="endpoint-params">Body: from_chain*, to_chain*, from_token*, to_token*, amount*, to_address*</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/wallet/swap/status/:orderId</div>
          <div class="endpoint-desc">Check swap order status</div>
        </div>
      </div>
    </div>

    <h3>Referrals</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/referral/code</div>
          <div class="endpoint-desc">Get your referral code</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/referral/stats</div>
          <div class="endpoint-desc">Earnings: total_earned, withdrawn, available</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/referral/withdraw</div>
          <div class="endpoint-desc">Withdraw referral earnings to any address</div>
          <div class="endpoint-params">Body: address*, chain?</div>
        </div>
      </div>
    </div>

    <h3>Example: create wallet and check balance</h3>
    <div class="code-block" id="wallet-create"><button class="copy-btn" onclick="copyBlock('wallet-create',this)">Copy</button><span class="comment"># Register</span>
curl -X POST https://wallet.purpleflea.com/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"referral_code": "REF_xxx"}'

<span class="string">{"api_key": "sk_live_...", "referral_code": "REF_yyy"}</span>

<span class="comment"># Create wallet (returns mnemonic ONCE)</span>
curl -X POST https://wallet.purpleflea.com/v1/wallet/create \
  -H "Authorization: Bearer sk_live_..."

<span class="string">{
  "mnemonic": "word1 word2 ... word12",
  "addresses": {
    "ethereum": "0xAbCd...",
    "bitcoin": "bc1q...",
    "solana": "7xKXt...",
    "tron": "TAbCd..."
  }
}</span>

<span class="comment"># Check ETH balance</span>
curl "https://wallet.purpleflea.com/v1/wallet/balance/0xAbCd...?chain=ethereum" \
  -H "Authorization: Bearer sk_live_..."</div>
  </section>

  <!-- Domains API -->
  <section id="domains">
    <h2>Domains API</h2>
    <p>
      Base URL: <code>https://domains.purpleflea.com/v1/</code><br>
      Referral: <span class="commission commission-purple">15% of referred domain purchases</span>
    </p>

    <p>Register and manage domains programmatically. 500+ TLDs available including .ai, .com, .io, .xyz, .agent, .bot. Pay with crypto. Manage DNS records via API ‚Äî no registrar dashboard required.</p>

    <h3>Search & Register</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/domains/search</div>
          <div class="endpoint-desc">Check domain availability across multiple TLDs</div>
          <div class="endpoint-params">Body: query* (domain name without TLD), tlds* (array of TLDs)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/domains/register</div>
          <div class="endpoint-desc">Register a domain (pay with crypto balance)</div>
          <div class="endpoint-params">Body: domain* (full domain.tld), years? (default 1), auto_renew? (bool)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/domains</div>
          <div class="endpoint-desc">List your registered domains</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/domains/:domain</div>
          <div class="endpoint-desc">Get domain details, expiry, nameservers</div>
        </div>
      </div>
    </div>

    <h3>DNS Records</h3>
    <div class="endpoint-table">
      <div class="endpoint-row">
        <span class="method get">GET</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/domains/:domain/records</div>
          <div class="endpoint-desc">List all DNS records for domain</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method post">POST</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/domains/:domain/records</div>
          <div class="endpoint-desc">Create DNS record</div>
          <div class="endpoint-params">Body: type* (A|CNAME|TXT|MX|AAAA), name*, value*, ttl? (default 3600)</div>
        </div>
      </div>
      <div class="endpoint-row">
        <span class="method delete">DELETE</span>
        <div class="endpoint-body">
          <div class="endpoint-path">/domains/:domain/records/:record_id</div>
          <div class="endpoint-desc">Delete a DNS record</div>
        </div>
      </div>
    </div>

    <h3>Example: search and register a .ai domain</h3>
    <div class="code-block" id="domains-example"><button class="copy-btn" onclick="copyBlock('domains-example',this)">Copy</button><span class="comment"># Search availability</span>
curl -X POST https://domains.purpleflea.com/v1/domains/search \
  -H "Authorization: Bearer sk_live_..." \
  -H "Content-Type: application/json" \
  -d '{"query": "myagent", "tlds": [".ai", ".com", ".io", ".agent"]}'

<span class="string">{
  "results": [
    {"domain": "myagent.ai", "available": true, "price_usd": 89.99},
    {"domain": "myagent.com", "available": false},
    {"domain": "myagent.io", "available": true, "price_usd": 34.99},
    {"domain": "myagent.agent", "available": true, "price_usd": 14.99}
  ]
}</span>

<span class="comment"># Register</span>
curl -X POST https://domains.purpleflea.com/v1/domains/register \
  -H "Authorization: Bearer sk_live_..." \
  -H "Content-Type: application/json" \
  -d '{"domain": "myagent.ai", "years": 2, "auto_renew": true}'</div>
  </section>

  <!-- Referral System -->
  <section id="referral">
    <h2>Referral System</h2>
    <p>Every Purple Flea API has a built-in referral program. Pass your referral code when registering new agents. There is no cap, no expiry, no minimum ‚Äî commissions are paid on every qualifying action forever.</p>

    <table class="param-table">
      <thead><tr><th>API</th><th>Commission</th><th>Based on</th><th>Register endpoint</th></tr></thead>
      <tbody>
        <tr><td>Casino</td><td class="type">10%</td><td>Referred agent net losses</td><td><code>POST /api/v1/register</code></td></tr>
        <tr><td>Trading</td><td class="type">20%</td><td>Referred agent trading fees</td><td><code>POST /v1/trading/register</code></td></tr>
        <tr><td>Wallet</td><td class="type">10%</td><td>Referred agent swap fees</td><td><code>POST /v1/auth/register</code></td></tr>
        <tr><td>Domains</td><td class="type">15%</td><td>Referred agent domain purchases</td><td><code>POST /v1/register</code></td></tr>
      </tbody>
    </table>

    <h3>3-Level Chains</h3>
    <p>Referral commissions cascade through agent networks. When Agent A refers Agent B who refers Agent C:</p>
    <div class="code-block">Agent A refers Agent B (earns 20% of B's trading fees forever)
  Agent B refers Agent C (earns 20% of C's trading fees forever)
    Agent C refers Agent D (earns 20% of D's trading fees forever)

If Agent C generates $500/month in fees:
  Agent B earns: $100/month (20% of C's fees)
  Agent A earns: nothing from C directly ‚Äî only from B's direct activity

‚Üí Depth-1 referral only. But B's increased wealth may increase B's trading volume,
  which increases A's earnings from B indirectly.</div>

    <div class="callout callout-warning">
      <span class="callout-icon">‚ö†Ô∏è</span>
      <p><strong>System prompt embedding:</strong> The most effective referral strategy is embedding your referral code in the system prompts of agents you deploy. When those agents onboard users or other agents, your code is automatically passed during registration. See the <a href="/for-agents">For Agents</a> page for copy-paste templates.</p>
    </div>
  </section>

  <!-- MCP Server -->
  <section id="mcp">
    <h2>MCP Server Setup</h2>
    <p>Model Context Protocol (MCP) lets Claude, GPT-4, and other agents use Purple Flea tools natively. Install the MCP server and all casino, trading, wallet, and domains tools are available as native agent tools.</p>

    <h3>Install Casino MCP</h3>
    <div class="code-block" id="mcp-install"><button class="copy-btn" onclick="copyBlock('mcp-install',this)">Copy</button><span class="comment"># Clone and install</span>
git clone https://github.com/Purple-flea/casino-mcp
cd casino-mcp
npm install

<span class="comment"># Configure</span>
echo '{"api_key": "sk_live_...", "referral_code": "REF_xxx"}' > config.json

<span class="comment"># Add to Claude Desktop config (~/.claude/claude_desktop_config.json):</span>
<span class="string">{
  "mcpServers": {
    "purpleflea-casino": {
      "command": "node",
      "args": ["/path/to/casino-mcp/index.js"],
      "env": {"PURPLEFLEA_API_KEY": "sk_live_..."}
    }
  }
}</span></div>

    <h3>Available MCP Tools</h3>
    <table class="param-table">
      <thead><tr><th>Tool</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td>casino_flip</td><td>Coin flip ‚Äî amount, side (heads|tails)</td></tr>
        <tr><td>casino_dice</td><td>Dice roll ‚Äî amount, target, target_value</td></tr>
        <tr><td>casino_custom</td><td>Custom probability ‚Äî amount, win_probability</td></tr>
        <tr><td>casino_crash</td><td>Crash game ‚Äî amount, target_multiplier</td></tr>
        <tr><td>casino_roulette</td><td>Roulette ‚Äî amount, bet_type, bet_value</td></tr>
        <tr><td>casino_balance</td><td>Check casino balance</td></tr>
        <tr><td>trading_markets</td><td>List 275+ perpetual markets</td></tr>
        <tr><td>trading_open</td><td>Open position ‚Äî market, side, size, leverage</td></tr>
        <tr><td>trading_close</td><td>Close position ‚Äî position_id</td></tr>
        <tr><td>trading_positions</td><td>List open positions with P&L</td></tr>
        <tr><td>trading_stop_loss</td><td>Set stop loss ‚Äî position_id, price</td></tr>
        <tr><td>trading_take_profit</td><td>Set take profit ‚Äî position_id, price</td></tr>
      </tbody>
    </table>
  </section>

  <!-- LangChain SDK -->
  <section id="sdk-langchain">
    <h2>LangChain SDK</h2>
    <p>The <code>langchain-purpleflea</code> package wraps all Purple Flea APIs as LangChain <code>BaseTool</code> subclasses, ready to pass to any LangChain agent.</p>

    <div class="code-block" id="lc-install"><button class="copy-btn" onclick="copyBlock('lc-install',this)">Copy</button">pip install langchain-purpleflea</div>

    <h3>Basic usage</h3>
    <div class="code-block" id="lc-usage"><button class="copy-btn" onclick="copyBlock('lc-usage',this)">Copy</button>from langchain_purpleflea import PurpleFleatoolkit
from langchain.agents import AgentExecutor, create_openai_tools_agent
from langchain_openai import ChatOpenAI

<span class="comment"># Initialize with your API key and referral code</span>
toolkit = PurpleFleatoolkit(
    api_key=<span class="string">"sk_live_..."</span>,
    referral_code=<span class="string">"REF_xxx"</span>  <span class="comment"># Passed when your agent registers others</span>
)

<span class="comment"># Get all tools (20 tools across casino, trading, wallet, domains)</span>
tools = toolkit.get_tools()

<span class="comment"># Or get tools for a specific product</span>
casino_tools = toolkit.get_casino_tools()
trading_tools = toolkit.get_trading_tools()
wallet_tools = toolkit.get_wallet_tools()
domains_tools = toolkit.get_domains_tools()

<span class="comment"># Create agent</span>
llm = ChatOpenAI(model=<span class="string">"gpt-4o"</span>)
agent = create_openai_tools_agent(llm, tools, prompt)
executor = AgentExecutor(agent=agent, tools=tools)

result = executor.invoke({<span class="string">"input"</span>: <span class="string">"Flip a coin for $5"</span>})</div>
  </section>

  <!-- CrewAI SDK -->
  <section id="sdk-crewai">
    <h2>CrewAI SDK</h2>
    <p>The <code>crewai-purpleflea</code> package provides <code>@tool</code>-decorated functions compatible with CrewAI agents.</p>

    <div class="code-block" id="crew-install"><button class="copy-btn" onclick="copyBlock('crew-install',this)">Copy</button>pip install crewai-purpleflea</div>

    <h3>Basic usage</h3>
    <div class="code-block" id="crew-usage"><button class="copy-btn" onclick="copyBlock('crew-usage',this)">Copy</button">from crewai import Agent, Task, Crew
from crewai_purpleflea import (
    trading_open_position,
    trading_close_position,
    trading_markets,
    casino_flip,
    casino_balance,
    wallet_create,
    wallet_swap,
    domains_search,
    domains_register
)

<span class="comment"># Trading agent</span>
trader = Agent(
    role=<span class="string">"Quantitative Trader"</span>,
    goal=<span class="string">"Open profitable perpetual positions based on technical analysis"</span>,
    tools=[trading_markets, trading_open_position, trading_close_position]
)

<span class="comment"># Domain squatter agent</span>
squatter = Agent(
    role=<span class="string">"Domain Registrar"</span>,
    goal=<span class="string">"Register valuable AI-related domains before they are taken"</span>,
    tools=[domains_search, domains_register]
)

crew = Crew(agents=[trader, squatter], tasks=[...], verbose=True)
result = crew.kickoff()</div>

    <h3>Available functions</h3>
    <table class="param-table">
      <thead><tr><th>Function</th><th>Product</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td>casino_flip</td><td>Casino</td><td>Coin flip with amount and side</td></tr>
        <tr><td>casino_dice</td><td>Casino</td><td>Dice roll with custom threshold</td></tr>
        <tr><td>casino_balance</td><td>Casino</td><td>Get casino account balance</td></tr>
        <tr><td>casino_history</td><td>Casino</td><td>Get recent bet history</td></tr>
        <tr><td>trading_markets</td><td>Trading</td><td>List all 275+ markets</td></tr>
        <tr><td>trading_open_position</td><td>Trading</td><td>Open leveraged position</td></tr>
        <tr><td>trading_close_position</td><td>Trading</td><td>Close position, realize P&L</td></tr>
        <tr><td>trading_positions</td><td>Trading</td><td>List open positions</td></tr>
        <tr><td>wallet_create</td><td>Wallet</td><td>Generate HD wallet</td></tr>
        <tr><td>wallet_balance</td><td>Wallet</td><td>Check on-chain balance</td></tr>
        <tr><td>wallet_send</td><td>Wallet</td><td>Broadcast transaction</td></tr>
        <tr><td>wallet_swap</td><td>Wallet</td><td>Cross-chain swap via Wagyu</td></tr>
        <tr><td>domains_search</td><td>Domains</td><td>Check domain availability</td></tr>
        <tr><td>domains_register</td><td>Domains</td><td>Register a domain</td></tr>
        <tr><td>domains_dns_add</td><td>Domains</td><td>Add DNS record</td></tr>
      </tbody>
    </table>
  </section>

</main>

<script>
function copyBlock(id, btn) {
  const el = document.getElementById(id);
  const text = el.innerText.replace(/^Copy$|^Copied!$/m, '').trim();
  navigator.clipboard.writeText(text).then(() => {
    btn.textContent = 'Copied!';
    setTimeout(() => btn.textContent = 'Copy', 2000);
  });
}

// Sidebar active state on scroll
const sections = document.querySelectorAll('section[id], h3[id]');
const links = document.querySelectorAll('.sidebar-link');
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      links.forEach(l => l.classList.remove('active'));
      const active = document.querySelector(`.sidebar-link[href="#${entry.target.id}"]`);
      if (active) active.classList.add('active');
    }
  });
}, { rootMargin: '-30% 0px -60% 0px' });
sections.forEach(s => observer.observe(s));
</script>

</body>
</html>
