<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Agent Casino Strategy â€” Optimal Gambling Algorithms for Agents</title>
<meta name="description" content="Guide to optimal gambling strategies for autonomous AI agents: Kelly Criterion for casino games, martingale analysis, provably fair verification, bankroll management. Purple Flea Casino API.">
<link rel="canonical" href="https://purpleflea.com/ai-agent-casino-strategy/">
<meta property="og:title" content="AI Agent Casino Strategy â€” Optimal Gambling Algorithms for Agents">
<meta property="og:description" content="Guide to optimal gambling strategies for autonomous AI agents: Kelly Criterion for casino games, martingale analysis, provably fair verification, bankroll management.">
<meta property="og:url" content="https://purpleflea.com/ai-agent-casino-strategy/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Purple Flea">
<meta property="og:image" content="https://purpleflea.com/flea.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@purpleflea">
<meta name="twitter:title" content="AI Agent Casino Strategy â€” Optimal Gambling Algorithms">
<meta name="twitter:description" content="Kelly Criterion, martingale analysis, crash strategy, and bankroll management for autonomous gambling agents.">
<meta name="twitter:image" content="https://purpleflea.com/flea.jpg">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "AI Agent Casino Strategy Guide",
  "url": "https://purpleflea.com/ai-agent-casino-strategy/",
  "description": "Optimal gambling algorithms and strategies for autonomous AI agents using Purple Flea Casino API.",
  "publisher": { "@type": "Organization", "name": "Purple Flea", "url": "https://purpleflea.com" }
}
</script>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŸ£</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --purple: #A855F7;
  --purple-dim: #7C3AED;
  --purple-glow: rgba(168, 85, 247, 0.3);
  --purple-subtle: rgba(168, 85, 247, 0.08);
  --bg: #09090B;
  --bg-card: rgba(255, 255, 255, 0.03);
  --bg-card-hover: rgba(255, 255, 255, 0.06);
  --border: rgba(255, 255, 255, 0.06);
  --border-hover: rgba(168, 85, 247, 0.3);
  --text: #FAFAFA;
  --text-secondary: #A1A1AA;
  --text-muted: #71717A;
  --radius: 16px;
  --radius-sm: 10px;
}
html { scroll-behavior: smooth; }
body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
body::before { content: ''; position: fixed; inset: 0; z-index: 9999; pointer-events: none; opacity: 0.025; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"); background-repeat: repeat; background-size: 180px; }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(168, 85, 247, 0.3); border-radius: 3px; }
::selection { background: rgba(168, 85, 247, 0.4); color: white; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.reveal { opacity: 0; transform: translateY(30px); transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1); }
.reveal.visible { opacity: 1; transform: translateY(0); }
.reveal-delay-1 { transition-delay: 0.1s; }
.reveal-delay-2 { transition-delay: 0.2s; }
.reveal-delay-3 { transition-delay: 0.3s; }

/* NAV */
nav { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; padding: 16px 0; transition: all 0.3s ease; }
nav.scrolled { background: rgba(9, 9, 11, 0.8); backdrop-filter: blur(20px) saturate(1.5); border-bottom: 1px solid var(--border); }
.nav-inner { display: flex; align-items: center; justify-content: space-between; max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.nav-logo { display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 18px; text-decoration: none; color: var(--text); }
.nav-logo-icon { width: 32px; height: 32px; background: linear-gradient(135deg, var(--purple), var(--purple-dim)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 16px; }
.nav-links { display: flex; align-items: center; gap: 32px; list-style: none; }
.nav-links a { color: var(--text-secondary); text-decoration: none; font-size: 14px; font-weight: 450; transition: color 0.2s; }
.nav-links a:hover { color: var(--text); }
.nav-cta { display: inline-flex; align-items: center; gap: 6px; padding: 8px 18px; background: var(--purple); color: white !important; border-radius: 8px; font-weight: 500; font-size: 14px; text-decoration: none; transition: all 0.2s; }
.nav-cta:hover { background: var(--purple-dim); transform: translateY(-1px); }
@media (max-width: 768px) { .nav-links { display: none; } }

/* HERO */
.hero { min-height: 80vh; display: flex; align-items: center; justify-content: center; position: relative; padding: 120px 0 80px; overflow: hidden; }
.hero-bg { position: absolute; inset: 0; overflow: hidden; }
.hero-gradient-1 { position: absolute; top: -30%; left: 50%; transform: translateX(-50%); width: 900px; height: 600px; background: radial-gradient(ellipse, rgba(168, 85, 247, 0.15) 0%, transparent 70%); filter: blur(60px); }
.hero-grid { position: absolute; inset: 0; background-image: linear-gradient(rgba(168, 85, 247, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(168, 85, 247, 0.03) 1px, transparent 1px); background-size: 60px 60px; mask-image: radial-gradient(ellipse 60% 50% at 50% 50%, black 30%, transparent 100%); -webkit-mask-image: radial-gradient(ellipse 60% 50% at 50% 50%, black 30%, transparent 100%); }
.hero-content { position: relative; text-align: center; max-width: 860px; margin: 0 auto; padding: 0 24px; }
.hero-badge { display: inline-flex; align-items: center; gap: 8px; padding: 6px 16px 6px 8px; background: var(--purple-subtle); border: 1px solid rgba(168, 85, 247, 0.15); border-radius: 100px; font-size: 13px; font-weight: 500; color: var(--purple); margin-bottom: 32px; animation: fadeInDown 0.8s ease; }
.hero-badge-dot { width: 8px; height: 8px; background: var(--purple); border-radius: 50%; animation: badge-pulse 2s ease-in-out infinite; }
@keyframes badge-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
@keyframes fadeInDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes gradient-shift { 0% { background-position: 0% center; } 50% { background-position: 100% center; } 100% { background-position: 0% center; } }
.hero h1 { font-size: clamp(2.5rem, 6vw, 4.5rem); font-weight: 800; line-height: 1.05; letter-spacing: -0.03em; margin-bottom: 24px; animation: fadeInUp 0.8s ease 0.1s both; }
.hero h1 .gradient { background: linear-gradient(135deg, var(--purple) 0%, #C084FC 50%, var(--purple) 100%); background-size: 200% auto; -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; animation: gradient-shift 5s ease infinite; }
.hero-desc { font-size: clamp(1rem, 2vw, 1.2rem); color: var(--text-secondary); margin-bottom: 40px; line-height: 1.7; animation: fadeInUp 0.8s ease 0.2s both; }
.hero-actions { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; animation: fadeInUp 0.8s ease 0.3s both; }
.btn-primary { display: inline-flex; align-items: center; gap: 8px; padding: 14px 28px; background: var(--purple); color: white; border-radius: var(--radius-sm); font-weight: 600; font-size: 15px; text-decoration: none; transition: all 0.2s; box-shadow: 0 0 30px rgba(168, 85, 247, 0.3); }
.btn-primary:hover { background: var(--purple-dim); transform: translateY(-2px); box-shadow: 0 0 40px rgba(168, 85, 247, 0.5); }
.btn-secondary { display: inline-flex; align-items: center; gap: 8px; padding: 14px 28px; background: var(--bg-card); color: var(--text); border-radius: var(--radius-sm); font-weight: 500; font-size: 15px; text-decoration: none; border: 1px solid var(--border); transition: all 0.2s; }
.btn-secondary:hover { border-color: var(--border-hover); background: var(--bg-card-hover); transform: translateY(-2px); }

/* SECTIONS */
section { padding: 100px 0; position: relative; }
.section-label { display: inline-flex; align-items: center; gap: 12px; font-size: 12px; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--purple); margin-bottom: 20px; }
.section-label::before { content: ''; width: 24px; height: 1px; background: var(--purple); }
.section-title { font-size: clamp(2rem, 4vw, 3rem); font-weight: 800; letter-spacing: -0.02em; margin-bottom: 20px; }
.section-desc { font-size: 1.1rem; color: var(--text-secondary); max-width: 600px; margin-bottom: 60px; line-height: 1.7; }
.section-divider { border: none; height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent); margin: 0; }

/* CODE BLOCK */
.code-block { background: rgba(0,0,0,0.4); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; font-family: 'JetBrains Mono', monospace; font-size: 13.5px; line-height: 1.7; overflow-x: auto; position: relative; }
.code-block .code-header { display: flex; align-items: center; gap: 8px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
.code-dot { width: 12px; height: 12px; border-radius: 50%; }
.code-dot.red { background: #EF4444; }
.code-dot.yellow { background: #FBBF24; }
.code-dot.green { background: #22C55E; }
.code-filename { margin-left: 8px; font-size: 12px; color: var(--text-muted); }
.kw { color: #C084FC; }
.fn { color: #93C5FD; }
.st { color: #86EFAC; }
.cm { color: var(--text-muted); font-style: italic; }
.num { color: #FDE68A; }
.cls { color: #F9A8D4; }
.at { color: #A855F7; }

/* GRID */
.grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }
.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
@media (max-width: 768px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } }

/* CARDS */
.card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 32px; transition: all 0.3s ease; }
.card:hover { background: var(--bg-card-hover); border-color: var(--border-hover); transform: translateY(-4px); box-shadow: 0 20px 60px rgba(0,0,0,0.4), 0 0 30px rgba(168,85,247,0.05); }
.card-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; margin-bottom: 20px; }
.card-icon.purple { background: rgba(168, 85, 247, 0.15); }
.card-icon.blue { background: rgba(96, 165, 250, 0.15); }
.card-icon.green { background: rgba(34, 197, 94, 0.15); }
.card-icon.orange { background: rgba(251, 146, 60, 0.15); }
.card-icon.red { background: rgba(239, 68, 68, 0.15); }
.card h3 { font-size: 1.1rem; font-weight: 600; margin-bottom: 10px; }
.card p { color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6; }

/* EDGE TABLE */
.edge-table { width: 100%; border-collapse: collapse; }
.edge-table th { text-align: left; padding: 12px 16px; font-size: 12px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; color: var(--text-muted); border-bottom: 1px solid var(--border); }
.edge-table td { padding: 14px 16px; font-size: 14px; border-bottom: 1px solid var(--border); vertical-align: top; }
.edge-table tr:last-child td { border-bottom: none; }
.edge-table tr:hover td { background: var(--bg-card); }
.edge-table .game-name { font-weight: 600; color: var(--text); }
.edge-table .edge-val { font-family: 'JetBrains Mono', monospace; font-size: 13px; }
.edge-neg { color: #EF4444; }
.edge-var { color: #FBBF24; }
.badge-inline { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 500; }
.badge-red { background: rgba(239,68,68,0.15); color: #EF4444; }
.badge-yellow { background: rgba(251,191,36,0.15); color: #FBBF24; }
.badge-green { background: rgba(34,197,94,0.15); color: #22C55E; }

/* MATH BOX */
.math-box { background: rgba(168,85,247,0.06); border: 1px solid rgba(168,85,247,0.2); border-radius: var(--radius); padding: 28px 32px; margin: 32px 0; }
.math-box h4 { font-size: 13px; font-weight: 600; color: var(--purple); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 12px; }
.math-formula { font-family: 'JetBrains Mono', monospace; font-size: 15px; color: var(--text); line-height: 1.8; }
.math-formula .var { color: #C084FC; }
.math-formula .op { color: var(--text-muted); }
.math-formula .result { color: #86EFAC; }

/* RULE LIST */
.rule-list { list-style: none; display: flex; flex-direction: column; gap: 16px; margin-top: 24px; }
.rule-list li { display: flex; align-items: flex-start; gap: 16px; padding: 20px; background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); }
.rule-num { width: 28px; height: 28px; min-width: 28px; border-radius: 8px; background: var(--purple-subtle); border: 1px solid rgba(168,85,247,0.2); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 12px; color: var(--purple); }
.rule-text { font-size: 14px; color: var(--text-secondary); line-height: 1.6; }
.rule-text strong { color: var(--text); }

/* CTA SECTION */
.cta-section { text-align: center; padding: 100px 0; }
.cta-box { background: linear-gradient(135deg, rgba(168,85,247,0.08) 0%, rgba(124,58,237,0.05) 100%); border: 1px solid rgba(168,85,247,0.2); border-radius: 24px; padding: 80px 40px; position: relative; overflow: hidden; }
.cta-box::before { content: ''; position: absolute; top: -50%; left: 50%; transform: translateX(-50%); width: 600px; height: 400px; background: radial-gradient(ellipse, rgba(168,85,247,0.1) 0%, transparent 70%); filter: blur(40px); pointer-events: none; }
.cta-box h2 { font-size: clamp(2rem, 4vw, 3rem); font-weight: 800; letter-spacing: -0.02em; margin-bottom: 20px; position: relative; }
.cta-box p { color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 40px; position: relative; }

/* FOOTER */
footer { padding: 60px 0 40px; border-top: 1px solid var(--border); }
.footer-top { display: grid; grid-template-columns: 1fr 2fr; gap: 60px; margin-bottom: 60px; }
.footer-brand p { color: var(--text-secondary); font-size: 14px; margin-top: 16px; max-width: 260px; line-height: 1.6; }
.footer-columns { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; }
.footer-col h4 { font-size: 13px; font-weight: 600; margin-bottom: 16px; }
.footer-col ul { list-style: none; display: flex; flex-direction: column; gap: 10px; }
.footer-col a { color: var(--text-muted); text-decoration: none; font-size: 13px; transition: color 0.2s; }
.footer-col a:hover { color: var(--text); }
.footer-bottom { display: flex; align-items: center; justify-content: space-between; padding-top: 24px; border-top: 1px solid var(--border); }
.footer-bottom p { color: var(--text-muted); font-size: 13px; }
.footer-social { display: flex; gap: 24px; }
.footer-social a { color: var(--text-muted); text-decoration: none; font-size: 13px; transition: color 0.2s; }
.footer-social a:hover { color: var(--text); }
@media (max-width: 768px) { .footer-top { grid-template-columns: 1fr; gap: 40px; } .footer-columns { grid-template-columns: repeat(2, 1fr); } .footer-bottom { flex-direction: column; gap: 16px; text-align: center; } }

/* RELATED LINKS */
.related-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
@media (max-width: 768px) { .related-grid { grid-template-columns: 1fr; } }
.related-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 20px 24px; text-decoration: none; color: var(--text); display: block; transition: all 0.2s; }
.related-card:hover { border-color: var(--border-hover); background: var(--bg-card-hover); transform: translateY(-2px); }
.related-card .label { font-size: 11px; color: var(--purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px; }
.related-card .title { font-size: 14px; font-weight: 600; }
.related-card .desc { font-size: 13px; color: var(--text-muted); margin-top: 4px; }

/* ARTICLE PROSE */
.prose { max-width: 860px; }
.prose p { color: var(--text-secondary); font-size: 1rem; line-height: 1.8; margin-bottom: 20px; }
.prose p:last-child { margin-bottom: 0; }
.prose strong { color: var(--text); }
.prose code { background: rgba(168,85,247,0.1); padding: 2px 8px; border-radius: 4px; font-family: 'JetBrains Mono', monospace; font-size: 0.88em; color: var(--purple); }
</style>
</head>
<body>

<nav id="navbar">
  <div class="nav-inner">
    <a href="/" class="nav-logo">
      <div class="nav-logo-icon">&#9830;</div>
      Purple Flea
    </a>
    <ul class="nav-links">
      <li><a href="/docs">Docs</a></li>
      <li><a href="/for-agents">For Agents</a></li>
      <li><a href="/integrations">Integrations</a></li>
      <li><a href="/pricing">Pricing</a></li>
      <li><a href="https://wallet.purpleflea.com" target="_blank" class="nav-cta">Get Started â†’</a></li>
    </ul>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg">
    <div class="hero-gradient-1"></div>
    <div class="hero-grid"></div>
  </div>
  <div class="hero-content">
    <div class="hero-badge">
      <div class="hero-badge-dot"></div>
      Optimal Gambling Algorithms
    </div>
    <h1>AI Agent Casino<br><span class="gradient">Strategy Guide</span></h1>
    <p class="hero-desc">
      Autonomous gambling agents don't run on hunches â€” they run on math.
      This guide covers the quantitative foundations every AI agent needs before
      placing a single bet: house edge reality, Kelly Criterion, martingale failure modes,
      crash game optimisation, and responsible bankroll management.
    </p>
    <div class="hero-actions">
      <a href="https://casino.purpleflea.com" class="btn-primary" target="_blank">Try the Casino API â†’</a>
      <a href="/casino-api/" class="btn-secondary">API Reference</a>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- INTRO -->
<section>
  <div class="container">
    <div class="reveal prose">
      <div class="section-label">Overview</div>
      <h2 class="section-title">Algorithms, not intuition</h2>
      <p>
        When a human gambles, they bring cognitive biases, emotional reactions, and gut feelings to the table.
        When an AI agent gambles, it has only one advantage: it can be perfectly rational. But rational play
        in a negative-EV environment still loses money â€” just more slowly and predictably. This guide is not
        about winning; it is about understanding exactly what your agent is doing and why, so it can make
        informed, auditable decisions at every step.
      </p>
      <p>
        The Purple Flea Casino API exposes four provably fair games â€” coin flip, dice, roulette, and crash â€”
        each with configurable parameters and a cryptographic fairness proof on every outcome. Your agent can
        verify every result independently. That transparency is the foundation of sound algorithmic play.
      </p>
      <p>
        Every section below pairs the mathematical theory with Python code your agent can use directly.
        The code assumes you have already installed the <code>purpleflea</code> SDK and configured your API key.
        If you haven't, start with the <a href="/for-langchain/" style="color:var(--purple)">LangChain integration guide</a>
        or the <a href="/python-sdk/" style="color:var(--purple)">Python SDK docs</a>.
      </p>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- HOUSE EDGE -->
<section>
  <div class="container">
    <div class="reveal">
      <div class="section-label">House Edge Reality Check</div>
      <h2 class="section-title">What every game<br>actually costs</h2>
      <p class="section-desc">
        Before writing a single line of betting logic, your agent must internalise one fact:
        every casino game has a negative expected value for the player. Here is the precise edge for each
        Purple Flea game.
      </p>
    </div>

    <div class="reveal reveal-delay-1">
      <table class="edge-table" style="background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
        <thead>
          <tr>
            <th>Game</th>
            <th>Parameters</th>
            <th>Win Probability</th>
            <th>Payout Multiplier</th>
            <th>House Edge</th>
            <th>Verdict</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="game-name">Coin Flip</td>
            <td style="color:var(--text-secondary);font-size:13px;">Standard</td>
            <td class="edge-val">49%</td>
            <td class="edge-val">1.96x</td>
            <td class="edge-val edge-neg">-2.0%</td>
            <td><span class="badge-inline badge-red">Do not bet</span></td>
          </tr>
          <tr>
            <td class="game-name">Dice</td>
            <td style="color:var(--text-secondary);font-size:13px;">Roll under 50</td>
            <td class="edge-val">49%</td>
            <td class="edge-val">1.98x</td>
            <td class="edge-val edge-neg">-1.0%</td>
            <td><span class="badge-inline badge-red">Do not bet</span></td>
          </tr>
          <tr>
            <td class="game-name">Roulette</td>
            <td style="color:var(--text-secondary);font-size:13px;">European (single zero)</td>
            <td class="edge-val">48.6%</td>
            <td class="edge-val">1.94x</td>
            <td class="edge-val edge-neg">-2.7%</td>
            <td><span class="badge-inline badge-red">Do not bet</span></td>
          </tr>
          <tr>
            <td class="game-name">Crash</td>
            <td style="color:var(--text-secondary);font-size:13px;">Auto-cashout 2x</td>
            <td class="edge-val">49%</td>
            <td class="edge-val">2.0x</td>
            <td class="edge-val edge-neg">-2.0%</td>
            <td><span class="badge-inline badge-yellow">Strategy-dependent</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="reveal reveal-delay-2" style="margin-top:40px;">
      <div class="prose">
        <p>
          The house edge is the percentage of every bet the casino expects to keep over infinite trials.
          On a coin flip with a 49% win rate and 1.96x payout, your expected return per $1 wagered is:
          <code>0.49 * 1.96 + 0.51 * 0 - 1 = -0.02</code>. You lose two cents on average for every dollar bet.
          This is not a flaw or a trick â€” it is the mathematical definition of how casinos operate sustainably.
        </p>
        <p>
          <strong>The only paths to long-term profit are:</strong> earning volume rebates from the platform,
          collecting referral commissions (Purple Flea pays 10% on all activity from referred agents),
          exploiting genuine informational edges if they exist, or receiving promotional bonuses whose
          expected value exceeds the house edge. For most agents, most of the time, the correct bet size
          according to optimal theory is zero.
        </p>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- KELLY CRITERION -->
<section>
  <div class="container">
    <div class="reveal">
      <div class="section-label">Kelly Criterion</div>
      <h2 class="section-title">The mathematically<br>optimal bet size</h2>
      <p class="section-desc">
        The Kelly Criterion tells you exactly what fraction of your bankroll to bet in order to maximise
        long-run geometric growth. For negative-EV games, its answer is unambiguous.
      </p>
    </div>

    <div class="reveal reveal-delay-1">
      <div class="math-box">
        <h4>Kelly Formula</h4>
        <div class="math-formula">
          <span class="var">f*</span> <span class="op">=</span>
          (<span class="var">p</span> <span class="op">*</span> <span class="var">b</span>
          <span class="op">-</span> <span class="var">q</span>) <span class="op">/</span> <span class="var">b</span>
          <br><br>
          where: <span class="var">p</span> = win probability,
                 <span class="var">q</span> = loss probability (1 - p),
                 <span class="var">b</span> = net odds (payout - 1)
          <br><br>
          Coin flip: <span class="var">f*</span> = (0.49 * 0.96 - 0.51) / 0.96 = <span class="result">-0.0208</span>
          <br>
          Negative Kelly = <span class="result">bet zero, or take the other side</span>
        </div>
      </div>
    </div>

    <div class="reveal reveal-delay-2">
      <div class="code-block">
        <div class="code-header">
          <div class="code-dot red"></div>
          <div class="code-dot yellow"></div>
          <div class="code-dot green"></div>
          <span class="code-filename">kelly.py</span>
        </div>
<span class="kw">def</span> <span class="fn">kelly_fraction</span>(win_prob: <span class="cls">float</span>, payout_multiplier: <span class="cls">float</span>) -> <span class="cls">float</span>:
    <span class="st">"""
    Returns the Kelly-optimal fraction of bankroll to bet.
    A negative result means: don't bet (or bet on the other side).
    payout_multiplier is the gross payout (e.g., 1.96 for a coin flip
    that returns $1.96 per $1 wagered on a win).
    """</span>
    p = win_prob
    q = <span class="num">1</span> - p
    b = payout_multiplier - <span class="num">1</span>  <span class="cm"># net odds</span>
    <span class="kw">return</span> (p * b - q) / b


<span class="cm"># Purple Flea casino games â€” all return negative Kelly</span>
games = {
    <span class="st">"coin_flip"</span>:  kelly_fraction(<span class="num">0.49</span>, <span class="num">1.96</span>),   <span class="cm"># -0.021</span>
    <span class="st">"dice_u50"</span>:   kelly_fraction(<span class="num">0.49</span>, <span class="num">1.98</span>),   <span class="cm"># -0.010</span>
    <span class="st">"roulette_eu"</span>: kelly_fraction(<span class="num">0.486</span>, <span class="num">1.94</span>),  <span class="cm"># -0.028</span>
}

<span class="kw">for</span> game, f <span class="kw">in</span> games.items():
    verdict = <span class="st">"DO NOT BET"</span> <span class="kw">if</span> f <= <span class="num">0</span> <span class="kw">else</span> <span class="fn">f"BET {f:.1%} of bankroll"</span>
    <span class="fn">print</span>(<span class="fn">f</span><span class="st">"{game}: f* = {f:.4f} â†’ {verdict}"</span>)


<span class="kw">def</span> <span class="fn">should_agent_bet</span>(ev_per_unit: <span class="cls">float</span>, context: <span class="cls">str</span>) -> <span class="cls">bool</span>:
    <span class="st">"""
    An agent should only bet if:
    1. EV >= 0 (promotions, bonuses with edge), OR
    2. The purpose is non-financial (testing, demo, data collection)
    """</span>
    <span class="kw">if</span> ev_per_unit >= <span class="num">0</span>:
        <span class="kw">return</span> <span class="cls">True</span>
    allowed_contexts = {<span class="st">"entertainment"</span>, <span class="st">"testing"</span>, <span class="st">"demo"</span>, <span class="st">"research"</span>}
    <span class="kw">return</span> context <span class="kw">in</span> allowed_contexts
      </div>
    </div>

    <div class="reveal reveal-delay-3" style="margin-top:32px;">
      <div class="prose">
        <p>
          Kelly never lies. When <code>f*</code> is negative, the formula is telling your agent that the
          optimal rational action is to bet nothing. Any positive bet in a negative-EV game is a deliberate
          choice to trade expected value for variance â€” which can make sense for specific purposes (see
          "When Agents Should Gamble" below) but should always be explicit and logged.
        </p>
        <p>
          For positive-EV scenarios â€” such as a casino bonus that effectively gives you extra equity, or
          a bug that creates a momentary edge â€” Kelly gives you the precise fraction to bet to maximise
          expected logarithmic bankroll growth. Use half-Kelly (<code>f*/2</code>) in practice to reduce
          variance while retaining most of the growth benefit.
        </p>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- MARTINGALE -->
<section>
  <div class="container">
    <div class="reveal">
      <div class="section-label">Martingale Analysis</div>
      <h2 class="section-title">Why doubling down<br>always fails</h2>
      <p class="section-desc">
        The martingale is the oldest and most seductive betting system. It appears to guarantee profit
        because you always win eventually â€” but that guarantee requires infinite capital, which no agent has.
      </p>
    </div>

    <div class="reveal reveal-delay-1" style="display:grid;grid-template-columns:repeat(2,1fr);gap:24px;margin-bottom:40px;">
      <div class="card">
        <div class="card-icon green">&#8593;</div>
        <h3>The Promise</h3>
        <p>
          Start with $1. Double after every loss. Eventually you win, recovering all losses plus $1 profit.
          With infinite bankroll, this always works. The problem is the word "infinite."
        </p>
      </div>
      <div class="card">
        <div class="card-icon red">&#8595;</div>
        <h3>The Reality</h3>
        <p>
          After just 10 consecutive losses (probability: 0.51^10 = 0.12% per sequence), you need to bet
          $1,024 to recover $1. After 20 losses, you need over $1 million. Sequences like this occur
          regularly at any meaningful volume.
        </p>
      </div>
    </div>

    <div class="reveal reveal-delay-2">
      <div class="math-box">
        <h4>The Fundamental Theorem of Betting Systems</h4>
        <div class="math-formula">
          E[profit] <span class="op">=</span> house_edge <span class="op">*</span> total_volume_wagered
          <br><br>
          This identity holds for <span class="var">ALL</span> betting systems regardless of bet sizing,
          sequence, or strategy.
          <br>
          Martingale, Fibonacci, D'Alembert, Labouchere â€” none escape this.
          <br><br>
          <span class="result">The only variable you control is total volume. Lower it.</span>
        </div>
      </div>
    </div>

    <div class="reveal reveal-delay-3" style="margin-top:32px;">
      <div class="code-block">
        <div class="code-header">
          <div class="code-dot red"></div>
          <div class="code-dot yellow"></div>
          <div class="code-dot green"></div>
          <span class="code-filename">martingale_sim.py</span>
        </div>
<span class="kw">import</span> random

<span class="kw">def</span> <span class="fn">simulate_martingale</span>(
    starting_bankroll: <span class="cls">float</span>,
    base_bet: <span class="cls">float</span>,
    win_prob: <span class="cls">float</span>,
    max_rounds: <span class="cls">int</span> = <span class="num">10_000</span>
) -> <span class="cls">dict</span>:
    bankroll = starting_bankroll
    bet = base_bet
    total_wagered = <span class="num">0</span>
    rounds = <span class="num">0</span>

    <span class="kw">while</span> rounds < max_rounds <span class="kw">and</span> bankroll >= bet:
        total_wagered += bet
        <span class="kw">if</span> random.random() < win_prob:
            bankroll += bet  <span class="cm"># net win</span>
            bet = base_bet   <span class="cm"># reset</span>
        <span class="kw">else</span>:
            bankroll -= bet
            bet *= <span class="num">2</span>        <span class="cm"># double after loss</span>
        rounds += <span class="num">1</span>

    expected_loss = <span class="num">0.02</span> * total_wagered  <span class="cm"># 2% house edge</span>
    actual_loss = starting_bankroll - bankroll
    <span class="kw">return</span> {
        <span class="st">"rounds"</span>: rounds,
        <span class="st">"final_bankroll"</span>: bankroll,
        <span class="st">"total_wagered"</span>: total_wagered,
        <span class="st">"actual_loss"</span>: actual_loss,
        <span class="st">"expected_loss"</span>: expected_loss,
        <span class="st">"bust"</span>: bankroll < base_bet,
    }

<span class="cm"># Result: actual_loss converges to expected_loss, bust rate is high</span>
<span class="cm"># Agents must NEVER use martingale for serious bankroll management</span>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- CRASH STRATEGY -->
<section>
  <div class="container">
    <div class="reveal">
      <div class="section-label">Crash Game Optimisation</div>
      <h2 class="section-title">Auto-cashout strategy<br>for crash games</h2>
      <p class="section-desc">
        Crash is unique among casino games because the player chooses their cashout target.
        This gives agents a configurable parameter to reason about â€” though it does not change the negative EV.
      </p>
    </div>

    <div class="reveal reveal-delay-1">
      <div class="prose" style="margin-bottom:32px;">
        <p>
          In a crash game, a multiplier grows from 1x upward and crashes at a random point drawn from an
          exponential-like distribution engineered to produce a specific house edge. If you cash out before
          the crash, you win your bet multiplied by your cashout target. If the game crashes before you
          cash out, you lose your bet.
        </p>
        <p>
          For a game with house edge <code>h</code>, the probability that the crash point exceeds a target
          multiplier <code>m</code> is approximately <code>(1 - h) / m</code>. At a 2% house edge and a
          2x cashout target: <code>P(survive to 2x) = 0.98 / 2 = 0.49</code>. The expected value per bet is:
        </p>
      </div>
    </div>

    <div class="reveal reveal-delay-2">
      <div class="math-box">
        <h4>EV at any auto-cashout target (2% house edge)</h4>
        <div class="math-formula">
          P(crash above m) <span class="op">=</span> 0.98 / m
          <br><br>
          EV(2x cashout) <span class="op">=</span> 0.49 <span class="op">*</span> 2 <span class="op">+</span> 0.51 <span class="op">*</span> 0 <span class="op">-</span> 1 <span class="op">=</span> <span class="result">-0.02</span>
          <br>
          EV(10x cashout) <span class="op">=</span> 0.098 <span class="op">*</span> 10 <span class="op">+</span> 0.902 <span class="op">*</span> 0 <span class="op">-</span> 1 <span class="op">=</span> <span class="result">-0.02</span>
          <br><br>
          <span class="result">EV = -0.02 regardless of cashout target. Target only affects variance.</span>
        </div>
      </div>
    </div>

    <div class="reveal reveal-delay-3" style="margin-top:32px;">
      <div class="code-block">
        <div class="code-header">
          <div class="code-dot red"></div>
          <div class="code-dot yellow"></div>
          <div class="code-dot green"></div>
          <span class="code-filename">crash_agent.py</span>
        </div>
<span class="kw">import</span> purpleflea

client = purpleflea.<span class="fn">Client</span>(api_key=<span class="st">"pf_sk_..."</span>)

<span class="kw">def</span> <span class="fn">play_crash</span>(
    bet_amount: <span class="cls">float</span>,
    cashout_target: <span class="cls">float</span>,
    house_edge: <span class="cls">float</span> = <span class="num">0.02</span>
) -> <span class="cls">dict</span>:
    <span class="st">"""
    Place a crash bet with automatic cashout at cashout_target.
    Lower targets: higher win rate, lower variance, same EV.
    Higher targets: lower win rate, higher variance, same EV.
    For agent testing, 2x is a reasonable default (49% win rate).
    """</span>
    win_prob = (<span class="num">1</span> - house_edge) / cashout_target
    ev = win_prob * cashout_target - <span class="num">1</span>

    result = client.casino.<span class="fn">crash</span>(
        amount=bet_amount,
        auto_cashout=cashout_target,
    )

    <span class="cm"># Verify the outcome cryptographically</span>
    verified = client.casino.<span class="fn">verify</span>(
        game_id=result[<span class="st">"game_id"</span>],
        server_seed=result[<span class="st">"server_seed"</span>],
        client_seed=result[<span class="st">"client_seed"</span>],
    )
    <span class="kw">assert</span> verified[<span class="st">"crash_point"</span>] == result[<span class="st">"crash_point"</span>], <span class="st">"Fairness check failed!"</span>

    <span class="kw">return</span> {
        <span class="st">"win"</span>: result[<span class="st">"win"</span>],
        <span class="st">"crash_point"</span>: result[<span class="st">"crash_point"</span>],
        <span class="st">"pnl"</span>: result[<span class="st">"pnl"</span>],
        <span class="st">"expected_ev"</span>: ev,
        <span class="st">"verified"</span>: <span class="cls">True</span>,
    }
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- WHEN TO BET -->
<section>
  <div class="container">
    <div class="reveal">
      <div class="section-label">Rational Use Cases</div>
      <h2 class="section-title">When agents<br>should gamble</h2>
      <p class="section-desc">
        There are five legitimate reasons for an AI agent to engage with a casino API.
        Understanding the purpose before placing a bet is the most important guardrail of all.
      </p>
    </div>

    <div class="reveal reveal-delay-1">
      <ul class="rule-list">
        <li>
          <div class="rule-num">1</div>
          <div class="rule-text">
            <strong>Entertainment or demonstration.</strong> An agent showing its capabilities to a user may
            place a small number of bets with a pre-defined budget to demonstrate real financial activity.
            Set a hard cap (e.g., $5 total) before starting.
          </div>
        </li>
        <li>
          <div class="rule-num">2</div>
          <div class="rule-text">
            <strong>Testing provably fair verification pipelines.</strong> The mathematical integrity of
            the fairness proof matters for trust. Agents may place bets specifically to exercise their
            verification logic and confirm outcomes are auditable end-to-end.
          </div>
        </li>
        <li>
          <div class="rule-num">3</div>
          <div class="rule-text">
            <strong>Collecting data for strategy research.</strong> Running controlled trials across different
            bet sizes, cashout targets, or game configurations to build empirical distributions for
            analysis â€” provided the research budget is explicitly allocated and pre-approved.
          </div>
        </li>
        <li>
          <div class="rule-num">4</div>
          <div class="rule-text">
            <strong>Positive-EV promotional scenarios.</strong> When a casino bonus, reload offer, or
            promotional multiplier creates a scenario where <code>EV &gt;= 0</code>, Kelly says bet.
            Calculate the adjusted win probability including the bonus before committing any bankroll.
          </div>
        </li>
        <li>
          <div class="rule-num">5</div>
          <div class="rule-text">
            <strong>Agent capability demonstrations.</strong> As part of a broader showcase of what the
            agent can do â€” send crypto, trade perps, register a domain, place a bet â€” casino play serves
            as a concrete proof of real-world action capability with verifiable on-chain effects.
          </div>
        </li>
      </ul>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- BANKROLL MANAGEMENT -->
<section>
  <div class="container">
    <div class="reveal">
      <div class="section-label">Bankroll Management</div>
      <h2 class="section-title">Rules for responsible<br>agent gambling</h2>
      <p class="section-desc">
        Even when gambling is justified, disciplined bankroll management is non-negotiable.
        An agent that blows its entire budget on the first session cannot complete any other tasks.
      </p>
    </div>

    <div class="reveal reveal-delay-1" style="display:grid;grid-template-columns:repeat(2,1fr);gap:24px;margin-bottom:40px;">
      <div class="card">
        <div class="card-icon purple">&#9632;</div>
        <h3>Hard Stop-Loss</h3>
        <p>If bankroll drops 50% from starting value, stop entirely. No exceptions. Loss chasing is the
           most common failure mode for both human and agent gamblers. Code it as an assert, not a suggestion.</p>
      </div>
      <div class="card">
        <div class="card-icon blue">&#9632;</div>
        <h3>Fixed Fraction Betting</h3>
        <p>Bet between 1% and 5% of current bankroll per wager. This is a diluted Kelly approach that
           limits ruin risk while maintaining meaningful activity. Never bet more than 5% on a single game
           with negative EV.</p>
      </div>
      <div class="card">
        <div class="card-icon green">&#9632;</div>
        <h3>Never Chase Losses</h3>
        <p>Increasing bet size after a loss to recover is mathematically equivalent to martingale â€” it
           magnifies volume and thus magnifies expected losses. Each bet should be sized on current
           bankroll, not on history.</p>
      </div>
      <div class="card">
        <div class="card-icon orange">&#9632;</div>
        <h3>Full Audit Trail</h3>
        <p>Every bet must be logged with: timestamp, game type, bet amount, outcome, cumulative P&amp;L,
           and the provably fair verification hash. Agents operating with user funds must be fully
           auditable at all times.</p>
      </div>
    </div>

    <div class="reveal reveal-delay-2">
      <div class="code-block">
        <div class="code-header">
          <div class="code-dot red"></div>
          <div class="code-dot yellow"></div>
          <div class="code-dot green"></div>
          <span class="code-filename">bankroll_manager.py</span>
        </div>
<span class="kw">from</span> dataclasses <span class="kw">import</span> dataclass, field
<span class="kw">from</span> datetime <span class="kw">import</span> datetime
<span class="kw">from</span> typing <span class="kw">import</span> Optional
<span class="kw">import</span> json

<span class="at">@dataclass</span>
<span class="kw">class</span> <span class="cls">BankrollManager</span>:
    starting_bankroll: <span class="cls">float</span>
    max_bet_fraction: <span class="cls">float</span> = <span class="num">0.02</span>    <span class="cm"># 2% per bet default</span>
    stop_loss_fraction: <span class="cls">float</span> = <span class="num">0.50</span>  <span class="cm"># halt at 50% drawdown</span>
    current_bankroll: <span class="cls">float</span> = <span class="num">0.0</span>
    bets: <span class="cls">list</span> = field(default_factory=<span class="cls">list</span>)

    <span class="kw">def</span> <span class="fn">__post_init__</span>(<span class="cls">self</span>):
        <span class="cls">self</span>.current_bankroll = <span class="cls">self</span>.starting_bankroll

    <span class="kw">def</span> <span class="fn">can_bet</span>(<span class="cls">self</span>) -> <span class="cls">bool</span>:
        drawdown = (<span class="cls">self</span>.starting_bankroll - <span class="cls">self</span>.current_bankroll) / <span class="cls">self</span>.starting_bankroll
        <span class="kw">return</span> drawdown < <span class="cls">self</span>.stop_loss_fraction

    <span class="kw">def</span> <span class="fn">get_bet_size</span>(<span class="cls">self</span>) -> <span class="cls">float</span>:
        <span class="kw">if not</span> <span class="cls">self</span>.<span class="fn">can_bet</span>():
            <span class="kw">raise</span> <span class="cls">RuntimeError</span>(<span class="st">"Stop-loss triggered. No more bets this session."</span>)
        <span class="kw">return</span> <span class="cls">self</span>.current_bankroll * <span class="cls">self</span>.max_bet_fraction

    <span class="kw">def</span> <span class="fn">record_bet</span>(<span class="cls">self</span>, game: <span class="cls">str</span>, amount: <span class="cls">float</span>, pnl: <span class="cls">float</span>,
                  game_id: <span class="cls">str</span>, verify_hash: <span class="cls">str</span>):
        <span class="cls">self</span>.current_bankroll += pnl
        <span class="cls">self</span>.bets.append({
            <span class="st">"ts"</span>: datetime.<span class="fn">utcnow</span>().<span class="fn">isoformat</span>(),
            <span class="st">"game"</span>: game,
            <span class="st">"amount"</span>: amount,
            <span class="st">"pnl"</span>: pnl,
            <span class="st">"balance_after"</span>: <span class="cls">self</span>.current_bankroll,
            <span class="st">"game_id"</span>: game_id,
            <span class="st">"verify_hash"</span>: verify_hash,
        })

    <span class="kw">def</span> <span class="fn">export_log</span>(<span class="cls">self</span>) -> <span class="cls">str</span>:
        <span class="kw">return</span> json.<span class="fn">dumps</span>(<span class="cls">self</span>.bets, indent=<span class="num">2</span>)

    <span class="kw">def</span> <span class="fn">summary</span>(<span class="cls">self</span>) -> <span class="cls">dict</span>:
        total_wagered = <span class="fn">sum</span>(b[<span class="st">"amount"</span>] <span class="kw">for</span> b <span class="kw">in</span> <span class="cls">self</span>.bets)
        <span class="kw">return</span> {
            <span class="st">"bets_placed"</span>: <span class="fn">len</span>(<span class="cls">self</span>.bets),
            <span class="st">"total_wagered"</span>: total_wagered,
            <span class="st">"net_pnl"</span>: <span class="cls">self</span>.current_bankroll - <span class="cls">self</span>.starting_bankroll,
            <span class="st">"current_bankroll"</span>: <span class="cls">self</span>.current_bankroll,
            <span class="st">"active"</span>: <span class="cls">self</span>.<span class="fn">can_bet</span>(),
        }
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- PURPLE FLEA API -->
<section>
  <div class="container">
    <div class="reveal">
      <div class="section-label">Purple Flea Casino API</div>
      <h2 class="section-title">Using the API<br>responsibly</h2>
      <p class="section-desc">
        All Purple Flea casino games are provably fair. Your agent can and should verify every single
        outcome independently â€” the cryptographic proof is included in every API response.
      </p>
    </div>

    <div class="reveal reveal-delay-1" style="display:grid;grid-template-columns:repeat(3,1fr);gap:24px;margin-bottom:40px;">
      <div class="card">
        <div class="card-icon purple">&#10003;</div>
        <h3>Provably Fair</h3>
        <p>Every game outcome is derived from a server seed committed before the bet and revealed after,
           combined with your client seed. Verify with <code>POST /casino/verify</code>.</p>
      </div>
      <div class="card">
        <div class="card-icon blue">&#128196;</div>
        <h3>Bet History</h3>
        <p>Retrieve complete bet history via <code>GET /casino/history</code>. Filter by game type,
           date range, or outcome. Essential for your agent's audit trail and P&amp;L reporting.</p>
      </div>
      <div class="card">
        <div class="card-icon green">&#9729;</div>
        <h3>Agent Limits</h3>
        <p>The API has no built-in spending limits â€” your agent is responsible for enforcing them in code.
           Use <code>BankrollManager</code> above or equivalent logic. Never assume the API will stop you.</p>
      </div>
    </div>

    <div class="reveal reveal-delay-2">
      <div class="code-block">
        <div class="code-header">
          <div class="code-dot red"></div>
          <div class="code-dot yellow"></div>
          <div class="code-dot green"></div>
          <span class="code-filename">responsible_agent.py</span>
        </div>
<span class="kw">import</span> purpleflea
<span class="kw">from</span> bankroll_manager <span class="kw">import</span> BankrollManager

client = purpleflea.<span class="fn">Client</span>(api_key=<span class="st">"pf_sk_..."</span>)
bankroll = <span class="cls">BankrollManager</span>(starting_bankroll=<span class="num">10.0</span>)  <span class="cm"># $10 demo budget</span>

<span class="kw">def</span> <span class="fn">responsible_coin_flip</span>() -> <span class="cls">dict</span>:
    <span class="cm"># 1. Check stop-loss before every bet</span>
    <span class="kw">if not</span> bankroll.<span class="fn">can_bet</span>():
        <span class="kw">return</span> {<span class="st">"error"</span>: <span class="st">"Stop-loss active. Session ended."</span>}

    <span class="cm"># 2. Size bet using fixed-fraction rule</span>
    bet_size = bankroll.<span class="fn">get_bet_size</span>()

    <span class="cm"># 3. Place the bet</span>
    result = client.casino.<span class="fn">flip_coin</span>(amount=bet_size, side=<span class="st">"heads"</span>)

    <span class="cm"># 4. Verify the outcome immediately</span>
    proof = client.casino.<span class="fn">verify</span>(game_id=result[<span class="st">"game_id"</span>])
    <span class="kw">assert</span> proof[<span class="st">"valid"</span>], <span class="st">"Fairness verification failed!"</span>

    <span class="cm"># 5. Record in audit log</span>
    bankroll.<span class="fn">record_bet</span>(
        game=<span class="st">"coin_flip"</span>,
        amount=bet_size,
        pnl=result[<span class="st">"pnl"</span>],
        game_id=result[<span class="st">"game_id"</span>],
        verify_hash=proof[<span class="st">"hash"</span>],
    )

    <span class="kw">return</span> {<span class="st">"result"</span>: result, <span class="st">"summary"</span>: bankroll.<span class="fn">summary</span>()}
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<!-- RELATED -->
<section style="padding:60px 0;">
  <div class="container">
    <div class="reveal">
      <div class="section-label">Related Guides</div>
      <h2 class="section-title" style="margin-bottom:32px;">Keep reading</h2>
      <div class="related-grid">
        <a href="/casino-api/" class="related-card">
          <div class="label">API Docs</div>
          <div class="title">Casino API Reference</div>
          <div class="desc">Full endpoint documentation for all casino games</div>
        </a>
        <a href="/kelly-criterion-ai-trading/" class="related-card">
          <div class="label">Strategy</div>
          <div class="title">Kelly Criterion for AI Trading</div>
          <div class="desc">Applying Kelly to perpetual futures position sizing</div>
        </a>
        <a href="/for-langchain/" class="related-card">
          <div class="label">Integration</div>
          <div class="title">LangChain Integration</div>
          <div class="desc">Drop-in BaseTool wrappers for all Purple Flea APIs</div>
        </a>
      </div>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta-section">
  <div class="container">
    <div class="cta-box reveal">
      <h2>Ready to build a<br><span style="color:var(--purple)">smarter gambling agent?</span></h2>
      <p>Register your agent, get an API key, and start verifying provably fair outcomes programmatically.</p>
      <div class="hero-actions">
        <a href="https://wallet.purpleflea.com" class="btn-primary" target="_blank">Register your agent â†’</a>
        <a href="/casino-api/" class="btn-secondary">Casino API Docs</a>
      </div>
    </div>
  </div>
</section>

<hr class="section-divider">

<footer>
  <div class="container">
    <div class="footer-top">
      <div class="footer-brand">
        <a href="/" class="nav-logo">
          <div class="nav-logo-icon">&#9830;</div>
          Purple Flea
        </a>
        <p>AI-first infrastructure for autonomous agents. Built for machines, verified by math.</p>
      </div>
      <div class="footer-columns">
        <div class="footer-col">
          <h4>Products</h4>
          <ul>
            <li><a href="https://casino.purpleflea.com" target="_blank">Casino</a></li>
            <li><a href="https://trading.purpleflea.com" target="_blank">Trading</a></li>
            <li><a href="https://wallet.purpleflea.com" target="_blank">Wallet</a></li>
            <li><a href="https://domains.purpleflea.com" target="_blank">Domains</a></li>
            <li><a href="/crypto-wallet-api/">Wallet API Docs</a></li>
            <li><a href="/trading-api/">Trading API Docs</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Developers</h4>
          <ul>
            <li><a href="/docs">Docs</a></li>
            <li><a href="/for-agents">For Agents</a></li>
            <li><a href="/for-langchain/">LangChain</a></li>
            <li><a href="/for-crewai/">CrewAI</a></li>
            <li><a href="/for-claude/">Claude / MCP</a></li>
            <li><a href="/quick-start">Quick Start</a></li>
            <li><a href="/openapi">OpenAPI</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Company</h4>
          <ul>
            <li><a href="/pricing">Pricing</a></li>
            <li><a href="/stats">Stats</a></li>
            <li><a href="/changelog">Changelog</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li><a href="mailto:hello@purpleflea.com">Contact</a></li>
            <li><a href="https://github.com/Purple-flea" target="_blank">GitHub</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2026 Purple Flea. All rights reserved.</p>
      <div class="footer-social">
        <a href="https://github.com/Purple-flea" target="_blank">GitHub</a>
        <a href="https://x.com/purpleflea" target="_blank">X / Twitter</a>
      </div>
    </div>
  </div>
</footer>

<script>
const navbar = document.getElementById('navbar');
window.addEventListener('scroll', () => { navbar.classList.toggle('scrolled', window.scrollY > 50); });
const revealEls = document.querySelectorAll('.reveal');
const revealObs = new IntersectionObserver((entries) => {
  entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); revealObs.unobserve(e.target); } });
}, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });
revealEls.forEach(el => revealObs.observe(el));
</script>
</body>
</html>
