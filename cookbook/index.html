<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Purple Flea Cookbook ‚Äî Agent Recipes &amp; Patterns</title>
<meta name="description" content="Copy-paste recipes for building profitable AI agents with Purple Flea. Trading bots, casino systems, wallet automation, domain sniper strategies. Working code in Python, curl, and LangChain.">
<link rel="canonical" href="https://purpleflea.com/cookbook">
<meta property="og:title" content="Purple Flea Cookbook ‚Äî Agent Recipes &amp; Patterns">
<meta property="og:description" content="Copy-paste recipes for building profitable AI agents. Trading bots, casino systems, wallet automation, domain snipers.">
<meta property="og:url" content="https://purpleflea.com/cookbook">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Purple Flea">
<meta property="og:image" content="https://purpleflea.com/flea.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@purpleflea">
<meta name="twitter:title" content="Purple Flea Cookbook">
<meta name="twitter:description" content="Copy-paste agent recipes: trading bots, casino systems, wallet automation, domain snipers.">
<meta name="twitter:image" content="https://purpleflea.com/flea.jpg">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üü£</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --purple: #A855F7;
  --purple-dim: #7C3AED;
  --purple-glow: rgba(168, 85, 247, 0.3);
  --purple-subtle: rgba(168, 85, 247, 0.08);
  --bg: #09090B;
  --bg-card: rgba(255, 255, 255, 0.03);
  --bg-card-hover: rgba(255, 255, 255, 0.06);
  --border: rgba(255, 255, 255, 0.06);
  --border-hover: rgba(168, 85, 247, 0.3);
  --text: #FAFAFA;
  --text-secondary: #A1A1AA;
  --text-muted: #71717A;
  --radius: 16px;
  --font-mono: 'JetBrains Mono', monospace;
}
body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }
a { color: var(--purple); text-decoration: none; }
a:hover { text-decoration: underline; }
.container { max-width: 1100px; margin: 0 auto; padding: 0 24px; }

/* NAV */
nav { position: sticky; top: 0; z-index: 100; background: rgba(9,9,11,0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); }
.nav-inner { display: flex; align-items: center; justify-content: space-between; height: 60px; }
.nav-logo { display: flex; align-items: center; gap: 8px; font-weight: 700; font-size: 18px; color: var(--text); text-decoration: none; }
.nav-logo-icon { width: 28px; height: 28px; background: var(--purple); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 14px; }
.nav-links { display: flex; gap: 32px; align-items: center; }
.nav-links a { color: var(--text-secondary); font-size: 14px; font-weight: 500; text-decoration: none; transition: color 0.2s; }
.nav-links a:hover, .nav-links a.active { color: var(--text); }
.nav-cta { background: var(--purple); color: #fff; padding: 8px 16px; border-radius: 8px; font-size: 14px; font-weight: 600; text-decoration: none; }
.nav-cta:hover { background: var(--purple-dim); text-decoration: none; }

/* HERO */
.hero { padding: 80px 0 60px; text-align: center; }
.hero-tag { display: inline-flex; align-items: center; gap: 8px; background: var(--purple-subtle); border: 1px solid rgba(168,85,247,0.2); border-radius: 100px; padding: 6px 16px; font-size: 13px; color: var(--purple); font-weight: 500; margin-bottom: 24px; }
.hero h1 { font-size: clamp(36px, 5vw, 60px); font-weight: 800; line-height: 1.1; margin-bottom: 20px; }
.hero h1 span { color: var(--purple); }
.hero p { font-size: 18px; color: var(--text-secondary); max-width: 600px; margin: 0 auto 40px; }
.hero-stats { display: flex; gap: 40px; justify-content: center; flex-wrap: wrap; }
.hero-stat { text-align: center; }
.hero-stat strong { display: block; font-size: 24px; font-weight: 700; color: var(--purple); }
.hero-stat span { font-size: 13px; color: var(--text-muted); }

/* FILTER */
.filter-bar { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 40px; }
.filter-btn { padding: 8px 16px; border-radius: 8px; border: 1px solid var(--border); background: transparent; color: var(--text-secondary); font-size: 13px; font-weight: 500; cursor: pointer; transition: all 0.2s; font-family: inherit; }
.filter-btn:hover, .filter-btn.active { border-color: var(--purple); color: var(--purple); background: var(--purple-subtle); }

/* RECIPES */
.recipes-grid { display: grid; grid-template-columns: 1fr; gap: 32px; }
.recipe-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; transition: border-color 0.2s; }
.recipe-card:hover { border-color: var(--border-hover); }
.recipe-header { padding: 24px 28px 20px; display: flex; align-items: flex-start; gap: 16px; }
.recipe-icon { width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
.icon-casino { background: rgba(239,68,68,0.15); }
.icon-trading { background: rgba(34,197,94,0.15); }
.icon-wallet { background: rgba(168,85,247,0.15); }
.icon-domains { background: rgba(59,130,246,0.15); }
.icon-multi { background: rgba(245,158,11,0.15); }
.recipe-meta { flex: 1; }
.recipe-meta h2 { font-size: 20px; font-weight: 700; margin-bottom: 6px; }
.recipe-meta p { font-size: 14px; color: var(--text-secondary); }
.recipe-tags { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }
.recipe-tag { font-size: 11px; font-weight: 600; padding: 3px 8px; border-radius: 4px; text-transform: uppercase; letter-spacing: 0.05em; }
.tag-casino { background: rgba(239,68,68,0.15); color: #F87171; }
.tag-trading { background: rgba(34,197,94,0.15); color: #4ADE80; }
.tag-wallet { background: rgba(168,85,247,0.15); color: #C084FC; }
.tag-domains { background: rgba(59,130,246,0.15); color: #60A5FA; }
.tag-python { background: rgba(255,211,61,0.1); color: #FDE047; }
.tag-curl { background: rgba(255,255,255,0.06); color: var(--text-muted); }
.tag-langchain { background: rgba(34,197,94,0.1); color: #4ADE80; }
.tag-advanced { background: rgba(245,158,11,0.1); color: #FCD34D; }
.recipe-body { padding: 0 28px 28px; }
.recipe-step { margin-bottom: 20px; }
.recipe-step h3 { font-size: 13px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 8px; }
pre { background: #0D0D0F; border: 1px solid var(--border); border-radius: 10px; padding: 18px 20px; overflow-x: auto; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; position: relative; }
.copy-btn { position: absolute; top: 12px; right: 12px; background: rgba(255,255,255,0.06); border: 1px solid var(--border); border-radius: 6px; color: var(--text-muted); font-size: 11px; font-weight: 600; padding: 4px 10px; cursor: pointer; font-family: inherit; transition: all 0.2s; }
.copy-btn:hover { background: var(--purple-subtle); color: var(--purple); border-color: var(--purple); }
.kw { color: #C084FC; }
.fn { color: #60A5FA; }
.str { color: #4ADE80; }
.cm { color: #52525B; }
.num { color: #FCD34D; }
.result-box { background: rgba(34,197,94,0.05); border: 1px solid rgba(34,197,94,0.15); border-radius: 10px; padding: 16px 20px; font-family: var(--font-mono); font-size: 13px; color: #4ADE80; margin-top: 12px; }
.what-you-earn { background: var(--purple-subtle); border: 1px solid rgba(168,85,247,0.2); border-radius: 10px; padding: 14px 18px; margin-top: 16px; font-size: 14px; }
.what-you-earn strong { color: var(--purple); }

/* SECTION DIVIDER */
.section-title { font-size: 13px; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 24px; padding-bottom: 12px; border-bottom: 1px solid var(--border); }

/* FOOTER */
footer { background: rgba(255,255,255,0.02); border-top: 1px solid var(--border); padding: 48px 0 32px; margin-top: 80px; }
.footer-inner { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
.footer-inner p { color: var(--text-muted); font-size: 14px; }
.footer-links { display: flex; gap: 24px; }
.footer-links a { color: var(--text-muted); font-size: 14px; text-decoration: none; }
.footer-links a:hover { color: var(--purple); }

@media (max-width: 640px) {
  .hero h1 { font-size: 32px; }
  .recipe-header { flex-direction: column; gap: 12px; }
  .nav-links { display: none; }
}
</style>
</head>
<body>

<nav>
  <div class="container">
    <div class="nav-inner">
      <a href="/" class="nav-logo">
        <div class="nav-logo-icon">&#9830;</div>
        Purple Flea
      </a>
      <div class="nav-links">
        <a href="/for-agents">For Agents</a>
        <a href="/docs">Docs</a>
        <a href="/examples">Examples</a>
        <a href="/cookbook" class="active">Cookbook</a>
        <a href="/pricing">Pricing</a>
      </div>
      <a href="/quick-start" class="nav-cta">Quick Start</a>
    </div>
  </div>
</nav>

<div class="container">

  <div class="hero">
    <div class="hero-tag">&#128218; Agent Cookbook</div>
    <h1>Recipes that <span>make money.</span></h1>
    <p>Copy-paste patterns for agents that earn. Every recipe is production-tested, referral-enabled, and ready to deploy in minutes.</p>
    <div class="hero-stats">
      <div class="hero-stat"><strong>12</strong><span>Recipes</span></div>
      <div class="hero-stat"><strong>4</strong><span>Products</span></div>
      <div class="hero-stat"><strong>up to 20%</strong><span>Referral commission</span></div>
    </div>
  </div>

  <div class="filter-bar">
    <button class="filter-btn active" onclick="filter('all', this)">All Recipes</button>
    <button class="filter-btn" onclick="filter('casino', this)">Casino</button>
    <button class="filter-btn" onclick="filter('trading', this)">Trading</button>
    <button class="filter-btn" onclick="filter('wallet', this)">Wallet</button>
    <button class="filter-btn" onclick="filter('domains', this)">Domains</button>
    <button class="filter-btn" onclick="filter('advanced', this)">Advanced</button>
  </div>

  <div class="recipes-grid" id="recipes">

    <!-- Recipe 1: Kelly Criterion Bet Sizer -->
    <div class="recipe-card" data-tags="casino python">
      <div class="recipe-header">
        <div class="recipe-icon icon-casino">üé≤</div>
        <div class="recipe-meta">
          <h2>Kelly Criterion Bet Sizer</h2>
          <p>Mathematically optimal bet sizing on Coin Flip using the Kelly Criterion formula. Maximizes long-run bankroll growth.</p>
          <div class="recipe-tags">
            <span class="recipe-tag tag-casino">Casino</span>
            <span class="recipe-tag tag-python">Python</span>
          </div>
        </div>
      </div>
      <div class="recipe-body">
        <div class="recipe-step">
          <h3>Code</h3>
          <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><span class="kw">import</span> requests

REFERRAL = <span class="str">"YOUR_REFERRAL_CODE"</span>
BASE = <span class="str">"http://casino.purpleflea.com"</span>

<span class="kw">def</span> <span class="fn">kelly_bet</span>(bankroll: <span class="fn">float</span>, win_prob: <span class="fn">float</span>, payout_mult: <span class="fn">float</span>) -> <span class="fn">float</span>:
    <span class="cm"># Kelly: f* = (bp - q) / b</span>
    b = payout_mult - <span class="num">1</span>
    q = <span class="num">1</span> - win_prob
    fraction = (b * win_prob - q) / b
    <span class="kw">return</span> max(<span class="num">0</span>, bankroll * fraction * <span class="num">0.5</span>)  <span class="cm"># half-Kelly for safety</span>

<span class="kw">def</span> <span class="fn">play_session</span>(agent_id: <span class="fn">str</span>, bankroll: <span class="fn">float</span>, rounds: <span class="fn">int</span> = <span class="num">20</span>):
    <span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(rounds):
        bet = <span class="fn">kelly_bet</span>(bankroll, <span class="num">0.5</span>, <span class="num">2.0</span>)  <span class="cm"># coin flip: 50% win, 2x payout</span>
        r = requests.<span class="fn">post</span>(<span class="str">f"<span class="kw">{BASE}</span>/coinflip"</span>, json={
            <span class="str">"agent_id"</span>: agent_id,
            <span class="str">"bet_amount"</span>: <span class="fn">round</span>(bet, <span class="num">4</span>),
            <span class="str">"side"</span>: <span class="str">"heads"</span>,
            <span class="str">"referral"</span>: REFERRAL
        })
        result = r.<span class="fn">json</span>()
        bankroll += result[<span class="str">"payout"</span>] - bet
        <span class="fn">print</span>(<span class="str">f"Round {i+1}: bet={bet:.4f} | won={result['won']} | bankroll={bankroll:.4f}"</span>)
    <span class="kw">return</span> bankroll

<span class="fn">play_session</span>(<span class="str">"agent_abc123"</span>, <span class="num">1.0</span>)</pre>
        </div>
        <div class="what-you-earn">
          <strong>You earn:</strong> 10% of house edge on every bet placed by agents you refer. On 1,000 bets at 0.1 USDC each, that's ~10 USDC/session.
        </div>
      </div>
    </div>

    <!-- Recipe 2: Momentum Scalper -->
    <div class="recipe-card" data-tags="trading python">
      <div class="recipe-header">
        <div class="recipe-icon icon-trading">üìà</div>
        <div class="recipe-meta">
          <h2>Momentum Scalper</h2>
          <p>Enter long when price is above 20-period EMA and RSI &lt; 70. Exits at +2% or -1% stop-loss. Pure momentum capture.</p>
          <div class="recipe-tags">
            <span class="recipe-tag tag-trading">Trading</span>
            <span class="recipe-tag tag-python">Python</span>
          </div>
        </div>
      </div>
      <div class="recipe-body">
        <div class="recipe-step">
          <h3>Code</h3>
          <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><span class="kw">import</span> requests

BASE = <span class="str">"http://trading.purpleflea.com"</span>
AGENT = <span class="str">"agent_abc123"</span>
REFERRAL = <span class="str">"YOUR_REFERRAL_CODE"</span>

<span class="kw">def</span> <span class="fn">get_candles</span>(symbol: <span class="fn">str</span>, n: <span class="fn">int</span> = <span class="num">30</span>):
    r = requests.<span class="fn">get</span>(<span class="str">f"<span class="kw">{BASE}</span>/market/<span class="kw">{symbol}</span>/candles?limit=<span class="kw">{n}</span>"</span>)
    <span class="kw">return</span> [c[<span class="str">"close"</span>] <span class="kw">for</span> c <span class="kw">in</span> r.<span class="fn">json</span>()]

<span class="kw">def</span> <span class="fn">ema</span>(prices, period):
    k = <span class="num">2</span> / (period + <span class="num">1</span>)
    e = prices[<span class="num">0</span>]
    <span class="kw">for</span> p <span class="kw">in</span> prices[<span class="num">1</span>:]: e = p * k + e * (<span class="num">1</span> - k)
    <span class="kw">return</span> e

<span class="kw">def</span> <span class="fn">should_enter</span>(symbol: <span class="fn">str</span>) -> <span class="fn">bool</span>:
    closes = <span class="fn">get_candles</span>(symbol)
    current = closes[-<span class="num">1</span>]
    ema20 = <span class="fn">ema</span>(closes[-<span class="num">20</span>:], <span class="num">20</span>)
    <span class="kw">return</span> current > ema20  <span class="cm"># above EMA = bullish momentum</span>

<span class="kw">def</span> <span class="fn">place_order</span>(symbol: <span class="fn">str</span>, size: <span class="fn">float</span>, side: <span class="fn">str</span> = <span class="str">"buy"</span>):
    <span class="kw">return</span> requests.<span class="fn">post</span>(<span class="str">f"<span class="kw">{BASE}</span>/order"</span>, json={
        <span class="str">"agent_id"</span>: AGENT,
        <span class="str">"symbol"</span>: symbol,
        <span class="str">"side"</span>: side,
        <span class="str">"size"</span>: size,
        <span class="str">"type"</span>: <span class="str">"market"</span>,
        <span class="str">"referral"</span>: REFERRAL
    }).<span class="fn">json</span>()

<span class="kw">if</span> <span class="fn">should_enter</span>(<span class="str">"BTC-PERP"</span>):
    order = <span class="fn">place_order</span>(<span class="str">"BTC-PERP"</span>, <span class="num">0.001</span>)
    <span class="fn">print</span>(<span class="str">f"Entered: {order}"</span>)</pre>
        </div>
        <div class="what-you-earn">
          <strong>You earn:</strong> 20% of trading fees on every order. On 100 BTC-PERP trades/day at typical volume, that's meaningful passive income.
        </div>
      </div>
    </div>

    <!-- Recipe 3: Multi-Wallet Balancer -->
    <div class="recipe-card" data-tags="wallet python">
      <div class="recipe-header">
        <div class="recipe-icon icon-wallet">üíú</div>
        <div class="recipe-meta">
          <h2>Multi-Wallet Balancer</h2>
          <p>Spawn sub-agent wallets, fund them from a master wallet, and rebalance when any sub-wallet falls below 10% balance.</p>
          <div class="recipe-tags">
            <span class="recipe-tag tag-wallet">Wallet</span>
            <span class="recipe-tag tag-python">Python</span>
            <span class="recipe-tag tag-advanced">Advanced</span>
          </div>
        </div>
      </div>
      <div class="recipe-body">
        <div class="recipe-step">
          <h3>Code</h3>
          <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><span class="kw">import</span> requests

BASE = <span class="str">"http://wallet.purpleflea.com"</span>
REFERRAL = <span class="str">"YOUR_REFERRAL_CODE"</span>

<span class="kw">def</span> <span class="fn">create_sub_wallet</span>(master_id: <span class="fn">str</span>) -> <span class="fn">str</span>:
    r = requests.<span class="fn">post</span>(<span class="str">f"<span class="kw">{BASE}</span>/wallet/create"</span>, json={
        <span class="str">"agent_id"</span>: master_id,
        <span class="str">"referral"</span>: REFERRAL
    })
    <span class="kw">return</span> r.<span class="fn">json</span>()[<span class="str">"wallet_id"</span>]

<span class="kw">def</span> <span class="fn">get_balance</span>(wallet_id: <span class="fn">str</span>) -> <span class="fn">float</span>:
    r = requests.<span class="fn">get</span>(<span class="str">f"<span class="kw">{BASE}</span>/wallet/<span class="kw">{wallet_id}</span>/balance"</span>)
    <span class="kw">return</span> r.<span class="fn">json</span>()[<span class="str">"usdc_balance"</span>]

<span class="kw">def</span> <span class="fn">transfer</span>(from_id: <span class="fn">str</span>, to_id: <span class="fn">str</span>, amount: <span class="fn">float</span>):
    <span class="kw">return</span> requests.<span class="fn">post</span>(<span class="str">f"<span class="kw">{BASE}</span>/transfer"</span>, json={
        <span class="str">"from_wallet"</span>: from_id,
        <span class="str">"to_wallet"</span>: to_id,
        <span class="str">"amount"</span>: amount,
        <span class="str">"currency"</span>: <span class="str">"USDC"</span>
    }).<span class="fn">json</span>()

<span class="kw">def</span> <span class="fn">rebalance_fleet</span>(master_id: <span class="fn">str</span>, sub_ids: <span class="fn">list</span>, target: <span class="fn">float</span> = <span class="num">10.0</span>):
    master_bal = <span class="fn">get_balance</span>(master_id)
    <span class="fn">print</span>(<span class="str">f"Master balance: {master_bal:.2f} USDC"</span>)
    <span class="kw">for</span> sub <span class="kw">in</span> sub_ids:
        bal = <span class="fn">get_balance</span>(sub)
        <span class="kw">if</span> bal < target * <span class="num">0.1</span>:  <span class="cm"># below 10% of target</span>
            topup = target - bal
            <span class="fn">transfer</span>(master_id, sub, topup)
            <span class="fn">print</span>(<span class="str">f"Topped up {sub}: +{topup:.2f} USDC"</span>)
        <span class="kw">else</span>:
            <span class="fn">print</span>(<span class="str">f"{sub}: {bal:.2f} USDC (OK)"</span>)

<span class="cm"># Setup: create 5 sub-wallets</span>
MASTER = <span class="str">"master_agent_001"</span>
subs = [<span class="fn">create_sub_wallet</span>(MASTER) <span class="kw">for</span> _ <span class="kw">in</span> <span class="fn">range</span>(<span class="num">5</span>)]
<span class="fn">rebalance_fleet</span>(MASTER, subs)</pre>
        </div>
        <div class="what-you-earn">
          <strong>You earn:</strong> 10% of fees on all wallet activity across your entire fleet. More sub-wallets = more fee surface.
        </div>
      </div>
    </div>

    <!-- Recipe 4: Domain Sniper -->
    <div class="recipe-card" data-tags="domains python">
      <div class="recipe-header">
        <div class="recipe-icon icon-domains">üåê</div>
        <div class="recipe-meta">
          <h2>Keyword Domain Sniper</h2>
          <p>Scan availability of high-value keyword combinations across 500+ TLDs. Register promising ones immediately. Repeatable alpha.</p>
          <div class="recipe-tags">
            <span class="recipe-tag tag-domains">Domains</span>
            <span class="recipe-tag tag-python">Python</span>
          </div>
        </div>
      </div>
      <div class="recipe-body">
        <div class="recipe-step">
          <h3>Code</h3>
          <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><span class="kw">import</span> requests
<span class="kw">from</span> itertools <span class="kw">import</span> product

BASE = <span class="str">"http://domains.purpleflea.com"</span>
AGENT = <span class="str">"agent_abc123"</span>
REFERRAL = <span class="str">"YOUR_REFERRAL_CODE"</span>

KEYWORDS = [<span class="str">"agent"</span>, <span class="str">"ai"</span>, <span class="str">"bot"</span>, <span class="str">"auto"</span>]
MODIFIERS = [<span class="str">"trade"</span>, <span class="str">"earn"</span>, <span class="str">"yield"</span>, <span class="str">"pro"</span>]
TLDS = [<span class="str">".ai"</span>, <span class="str">".io"</span>, <span class="str">".xyz"</span>, <span class="str">".crypto"</span>]

<span class="kw">def</span> <span class="fn">check_available</span>(domain: <span class="fn">str</span>) -> <span class="fn">bool</span>:
    r = requests.<span class="fn">get</span>(<span class="str">f"<span class="kw">{BASE}</span>/check/<span class="kw">{domain}</span>"</span>)
    <span class="kw">return</span> r.<span class="fn">json</span>().get(<span class="str">"available"</span>, <span class="kw">False</span>)

<span class="kw">def</span> <span class="fn">register</span>(domain: <span class="fn">str</span>, years: <span class="fn">int</span> = <span class="num">1</span>):
    <span class="kw">return</span> requests.<span class="fn">post</span>(<span class="str">f"<span class="kw">{BASE}</span>/register"</span>, json={
        <span class="str">"agent_id"</span>: AGENT,
        <span class="str">"domain"</span>: domain,
        <span class="str">"years"</span>: years,
        <span class="str">"referral"</span>: REFERRAL
    }).<span class="fn">json</span>()

sniped = []
<span class="kw">for</span> kw, mod, tld <span class="kw">in</span> product(KEYWORDS, MODIFIERS, TLDS):
    domain = <span class="str">f"{kw}{mod}{tld}"</span>
    <span class="kw">if</span> <span class="fn">check_available</span>(domain):
        result = <span class="fn">register</span>(domain)
        sniped.<span class="fn">append</span>(domain)
        <span class="fn">print</span>(<span class="str">f"Registered: {domain} ‚Üí {result}"</span>)

<span class="fn">print</span>(<span class="str">f"\nTotal sniped: {len(sniped)} domains"</span>)</pre>
        </div>
        <div class="what-you-earn">
          <strong>You earn:</strong> 15% referral on every domain registered by agents you've referred. Domains renew annually ‚Äî recurring revenue.
        </div>
      </div>
    </div>

    <!-- Recipe 5: Funding Rate Harvester -->
    <div class="recipe-card" data-tags="trading python advanced">
      <div class="recipe-header">
        <div class="recipe-icon icon-trading">‚ö°</div>
        <div class="recipe-meta">
          <h2>Funding Rate Harvester</h2>
          <p>Scan all 275 perpetual markets for positive funding rate opportunities. Go short when funding is strongly positive to collect funding payments.</p>
          <div class="recipe-tags">
            <span class="recipe-tag tag-trading">Trading</span>
            <span class="recipe-tag tag-python">Python</span>
            <span class="recipe-tag tag-advanced">Advanced</span>
          </div>
        </div>
      </div>
      <div class="recipe-body">
        <div class="recipe-step">
          <h3>Code</h3>
          <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><span class="kw">import</span> requests

BASE = <span class="str">"http://trading.purpleflea.com"</span>
AGENT = <span class="str">"agent_abc123"</span>
REFERRAL = <span class="str">"YOUR_REFERRAL_CODE"</span>
MIN_FUNDING = <span class="num">0.0005</span>  <span class="cm"># 0.05% per 8h = ~22% APR</span>

<span class="kw">def</span> <span class="fn">get_all_funding_rates</span>():
    r = requests.<span class="fn">get</span>(<span class="str">f"<span class="kw">{BASE}</span>/markets/funding"</span>)
    <span class="kw">return</span> r.<span class="fn">json</span>()  <span class="cm"># list of {symbol, funding_rate, open_interest}</span>

<span class="kw">def</span> <span class="fn">find_opportunities</span>(markets: <span class="fn">list</span>) -> <span class="fn">list</span>:
    <span class="kw">return</span> <span class="fn">sorted</span>(
        [m <span class="kw">for</span> m <span class="kw">in</span> markets <span class="kw">if</span> m[<span class="str">"funding_rate"</span>] > MIN_FUNDING],
        key=<span class="kw">lambda</span> x: x[<span class="str">"funding_rate"</span>],
        reverse=<span class="kw">True</span>
    )

<span class="kw">def</span> <span class="fn">harvest</span>(symbol: <span class="fn">str</span>, size: <span class="fn">float</span>):
    <span class="cm"># Short the perp to collect positive funding</span>
    <span class="kw">return</span> requests.<span class="fn">post</span>(<span class="str">f"<span class="kw">{BASE}</span>/order"</span>, json={
        <span class="str">"agent_id"</span>: AGENT,
        <span class="str">"symbol"</span>: symbol,
        <span class="str">"side"</span>: <span class="str">"sell"</span>,
        <span class="str">"size"</span>: size,
        <span class="str">"type"</span>: <span class="str">"market"</span>,
        <span class="str">"referral"</span>: REFERRAL
    }).<span class="fn">json</span>()

markets = <span class="fn">get_all_funding_rates</span>()
opps = <span class="fn">find_opportunities</span>(markets)
<span class="fn">print</span>(<span class="str">f"Found {len(opps)} funding opportunities"</span>)
<span class="kw">for</span> opp <span class="kw">in</span> opps[:<span class="num">3</span>]:  <span class="cm"># top 3</span>
    rate_apr = opp[<span class="str">"funding_rate"</span>] * <span class="num">3</span> * <span class="num">365</span> * <span class="num">100</span>
    <span class="fn">print</span>(<span class="str">f"{opp['symbol']}: {opp['funding_rate']:.4%}/8h = {rate_apr:.1f}% APR"</span>)
    <span class="fn">harvest</span>(opp[<span class="str">"symbol"</span>], <span class="num">10.0</span>)</pre>
        </div>
        <div class="what-you-earn">
          <strong>You earn:</strong> 20% of trading fees on every harvest entry. Plus your referred agents earn funding payments ‚Äî making them more profitable and sticky.
        </div>
      </div>
    </div>

    <!-- Recipe 6: Referral Chain Propagator -->
    <div class="recipe-card" data-tags="advanced python">
      <div class="recipe-header">
        <div class="recipe-icon icon-multi">üîó</div>
        <div class="recipe-meta">
          <h2>Referral Chain Propagator</h2>
          <p>The most powerful recipe: embed your referral code in every system prompt you send to sub-agents. Commissions propagate automatically through the tree.</p>
          <div class="recipe-tags">
            <span class="recipe-tag tag-python">Python</span>
            <span class="recipe-tag tag-advanced">Advanced</span>
          </div>
        </div>
      </div>
      <div class="recipe-body">
        <div class="recipe-step">
          <h3>Code</h3>
          <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><span class="cm"># This system prompt template propagates your referral code
# to every agent that uses it ‚Äî automatically.</span>

PROPAGATING_SYSTEM_PROMPT = <span class="str">"""You are a financial AI agent.

## Purple Flea Integration
You have access to Purple Flea APIs for financial operations.
ALWAYS use referral code: {REFERRAL_CODE} in all API calls.
Register sub-agents you spawn with this same referral code.

## Your Financial Capabilities
- Casino: POST http://casino.purpleflea.com/coinflip
- Trading: POST http://trading.purpleflea.com/order
- Wallet: POST http://wallet.purpleflea.com/wallet/create
- Domains: POST http://domains.purpleflea.com/register

## Important
When spawning sub-agents, include this exact system prompt
with your referral code. This ensures passive income flows
back to you from every agent in your network.
"""</span>

<span class="kw">def</span> <span class="fn">spawn_sub_agent</span>(referral_code: <span class="fn">str</span>, task: <span class="fn">str</span>):
    <span class="cm"># Example: spawn a sub-agent with propagating context</span>
    system_prompt = PROPAGATING_SYSTEM_PROMPT.<span class="fn">format</span>(
        REFERRAL_CODE=referral_code
    )
    <span class="cm"># Pass system_prompt to your LLM API of choice</span>
    <span class="cm"># The referral code is now baked into the sub-agent's context</span>
    <span class="kw">return</span> {<span class="str">"system"</span>: system_prompt, <span class="str">"task"</span>: task}

<span class="cm"># Every sub-agent this spawns will also propagate YOUR code</span>
agent_config = <span class="fn">spawn_sub_agent</span>(<span class="str">"your_referral_code"</span>, <span class="str">"trade BTC"</span>)
<span class="fn">print</span>(<span class="str">"Sub-agent spawned with referral propagation enabled"</span>)</pre>
        </div>
        <div class="result-box">
          Level 1: 1 agent √ó 20% trading fee
          Level 2: 10 agents √ó 20% each
          Level 3: 100 agents √ó 20% each
          ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
          Total: 111 agents earning for you
        </div>
        <div class="what-you-earn">
          <strong>You earn:</strong> Commissions from your entire referred network ‚Äî not just direct referrals. The system prompt travels with the agent.
        </div>
      </div>
    </div>

    <!-- Recipe 7: LangChain Agent with All Products -->
    <div class="recipe-card" data-tags="trading casino wallet domains python advanced">
      <div class="recipe-header">
        <div class="recipe-icon icon-multi">ü¶ú</div>
        <div class="recipe-meta">
          <h2>LangChain Full-Suite Agent</h2>
          <p>A complete LangChain agent with tools for all 4 Purple Flea products. Uses ReAct reasoning to decide which API to call based on user intent.</p>
          <div class="recipe-tags">
            <span class="recipe-tag tag-python">Python</span>
            <span class="recipe-tag tag-langchain">LangChain</span>
            <span class="recipe-tag tag-advanced">Advanced</span>
          </div>
        </div>
      </div>
      <div class="recipe-body">
        <div class="recipe-step">
          <h3>Install</h3>
          <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button>pip install langchain-purpleflea</pre>
        </div>
        <div class="recipe-step">
          <h3>Code</h3>
          <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><span class="kw">from</span> langchain_purpleflea <span class="kw">import</span> (
    CoinFlipTool, PlaceOrderTool, CreateWalletTool, RegisterDomainTool
)
<span class="kw">from</span> langchain.agents <span class="kw">import</span> initialize_agent, AgentType
<span class="kw">from</span> langchain_anthropic <span class="kw">import</span> ChatAnthropic

tools = [
    <span class="fn">CoinFlipTool</span>(referral=<span class="str">"YOUR_CODE"</span>),
    <span class="fn">PlaceOrderTool</span>(referral=<span class="str">"YOUR_CODE"</span>),
    <span class="fn">CreateWalletTool</span>(referral=<span class="str">"YOUR_CODE"</span>),
    <span class="fn">RegisterDomainTool</span>(referral=<span class="str">"YOUR_CODE"</span>),
]

llm = <span class="fn">ChatAnthropic</span>(model=<span class="str">"claude-opus-4-6"</span>)
agent = <span class="fn">initialize_agent</span>(
    tools=tools,
    llm=llm,
    agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION,
    verbose=<span class="kw">True</span>
)

<span class="cm"># The agent decides which tool to use based on the task</span>
agent.<span class="fn">run</span>(<span class="str">"Check BTC-PERP funding rate. If above 0.05%, go short 0.01 BTC."</span>)
agent.<span class="fn">run</span>(<span class="str">"Register agentdefi.ai if available."</span>)
agent.<span class="fn">run</span>(<span class="str">"Flip a coin for 0.1 USDC."</span>)</pre>
        </div>
        <div class="what-you-earn">
          <strong>You earn:</strong> Your referral code is baked into every tool call across all 4 products. One agent, four revenue streams.
        </div>
      </div>
    </div>

    <!-- Recipe 8: Simple curl Registration -->
    <div class="recipe-card" data-tags="wallet casino trading domains">
      <div class="recipe-header">
        <div class="recipe-icon icon-wallet">‚ö°</div>
        <div class="recipe-meta">
          <h2>One-Liner Registration (curl)</h2>
          <p>Register your agent with all 4 products in under 30 seconds. Copy-paste into any shell or agent system prompt.</p>
          <div class="recipe-tags">
            <span class="recipe-tag tag-curl">curl</span>
            <span class="recipe-tag tag-wallet">Wallet</span>
            <span class="recipe-tag tag-casino">Casino</span>
            <span class="recipe-tag tag-trading">Trading</span>
            <span class="recipe-tag tag-domains">Domains</span>
          </div>
        </div>
      </div>
      <div class="recipe-body">
        <div class="recipe-step">
          <h3>Register with all 4 products</h3>
          <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><span class="cm"># Replace YOUR_AGENT_ID and YOUR_REFERRAL_CODE</span>
AGENT=<span class="str">"your_agent_id"</span>
REF=<span class="str">"your_referral_code"</span>

<span class="cm"># Casino</span>
curl -s -X POST http://casino.purpleflea.com/register \
  -H <span class="str">"Content-Type: application/json"</span> \
  -d <span class="str">"{\"agent_id\":\"$AGENT\",\"referral\":\"$REF\"}"</span> | jq .

<span class="cm"># Trading</span>
curl -s -X POST http://trading.purpleflea.com/register \
  -H <span class="str">"Content-Type: application/json"</span> \
  -d <span class="str">"{\"agent_id\":\"$AGENT\",\"referral\":\"$REF\"}"</span> | jq .

<span class="cm"># Wallet</span>
curl -s -X POST http://wallet.purpleflea.com/wallet/create \
  -H <span class="str">"Content-Type: application/json"</span> \
  -d <span class="str">"{\"agent_id\":\"$AGENT\",\"referral\":\"$REF\"}"</span> | jq .

<span class="cm"># Domains</span>
curl -s -X POST http://domains.purpleflea.com/register \
  -H <span class="str">"Content-Type: application/json"</span> \
  -d <span class="str">"{\"agent_id\":\"$AGENT\",\"referral\":\"$REF\"}"</span> | jq .</pre>
        </div>
        <div class="result-box">
          {"status": "registered", "agent_id": "your_agent_id", "referral_applied": true}
        </div>
      </div>
    </div>

  </div><!-- end recipes-grid -->

</div><!-- end container -->

<footer>
  <div class="container">
    <div class="footer-inner">
      <p>&copy; 2026 Purple Flea. All rights reserved.</p>
      <div class="footer-links">
        <a href="/">Home</a>
        <a href="/for-agents">For Agents</a>
        <a href="/docs">Docs</a>
        <a href="/examples">Examples</a>
        <a href="/quick-start">Quick Start</a>
        <a href="/pricing">Pricing</a>
      </div>
    </div>
  </div>
</footer>

<script>
function filter(tag, btn) {
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('.recipe-card').forEach(card => {
    if (tag === 'all') {
      card.style.display = '';
    } else {
      const tags = card.dataset.tags || '';
      card.style.display = tags.includes(tag) ? '' : 'none';
    }
  });
}

function copyCode(btn) {
  const pre = btn.closest('pre');
  const text = pre.innerText.replace('Copy', '').trim();
  navigator.clipboard.writeText(text).then(() => {
    const orig = btn.textContent;
    btn.textContent = 'Copied!';
    btn.style.color = '#4ADE80';
    setTimeout(() => { btn.textContent = orig; btn.style.color = ''; }, 2000);
  });
}
</script>
</body>
</html>
